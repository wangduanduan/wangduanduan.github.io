<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.151.0"><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>æ´é¦™æ˜¥</title><meta name=keywords content="Blog,Portfolio,PaperMod"><meta name=description content="Eddie Wangçš„ä¸ªäººåšå®¢"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/><link crossorigin=anonymous href=/assets/css/stylesheet.a2acda249b8eac62938bb2d2f1c562c5f74d5728640d2a1a7d6aeaec5c50ef24.css integrity="sha256-oqzaJJuOrGKTi7LS8cVixfdNVyhkDSoafWrq7FxQ7yQ=" rel="preload stylesheet" as=style><link rel=icon href=https://wdd.js.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/favicon.ico><link rel=apple-touch-icon href=https://wdd.js.org/favicon.ico><link rel=mask-icon href=https://wdd.js.org/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wdd.js.org/index.xml title=rss><link rel=alternate type=application/json href=https://wdd.js.org/index.json title=json><link rel=alternate hreflang=en href=https://wdd.js.org/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/firacode@6.2.0/distr/fira_code.css><style>body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,helvetica neue,Arial,noto sans,sans-serif,apple color emoji,segoe ui emoji;font-size:16px;line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1,h2,h3,h4,h5,h6{font-weight:600;letter-spacing:-.02em}code,pre{font-family:fira code,jetbrains mono,Consolas,monospace;font-variant-ligatures:normal;font-size:.95em}</style><meta property="og:url" content="https://wdd.js.org/"><meta property="og:site_name" content="æ´é¦™æ˜¥"><meta property="og:title" content="æ´é¦™æ˜¥"><meta property="og:description" content="Eddie Wangçš„ä¸ªäººåšå®¢"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="æ´é¦™æ˜¥"><meta name=twitter:description content="Eddie Wangçš„ä¸ªäººåšå®¢"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"æ´é¦™æ˜¥","url":"https://wdd.js.org/","description":"Eddie Wangçš„ä¸ªäººåšå®¢","logo":"https://wdd.js.org/favicon.ico","sameAs":["https://github.com/wangduanduan","mailto://1779706607@qq.com","https://wdd.js.org/index.xml","https://yuque.com/wangdd"]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org/ accesskey=h title="æ´é¦™æ˜¥ (Alt + H)"><img src=https://wdd.js.org/favicon.ico alt aria-label=logo height=35>æ´é¦™æ˜¥</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/books/ title=è¯»ä¹¦><span>è¯»ä¹¦</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/fe/ title=å‰ç«¯><span>å‰ç«¯</span></a></li><li><a href=https://wdd.js.org/search/ title=æœç´¢><span>æœç´¢</span></a></li><li><a href=https://wdd.js.org/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://wdd.js.org/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://wdd.js.org/about/ title=æˆ‘><span>æˆ‘</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨brewä½œä¸ºdeepinçš„åŒ…ç®¡ç†å·¥å…·</h2></header><div class=entry-content><p>11æœˆ2å·ï¼Œæˆ‘çš„ä¸»åŠ›å¼€å‘å·¥å…·macbookå¼€å§‹é€€å½¹ã€‚
æˆ‘æ¢äº†nuc11 i7, å®‰è£…äº†å›½äº§çš„deepin(æ·±åº¦)æ“ä½œç³»ç»Ÿã€‚æ€»ä½“ä½“éªŒè›®å¥½çš„ï¼Œåªæ˜¯apt-getçš„è½¯ä»¶åŒ…é‡Œï¼Œå¤ªå¤šéƒ½æ˜¯å¾ˆè€çš„åŒ…ã€‚æ‰€ä»¥æˆ‘æƒ³åˆ°ä»¥å‰ç”¨macçš„åŒ…ç®¡ç†å·¥å…·homebrew, æ®è¯´å®ƒä¸ä»…ä»…å¯ä»¥åœ¨macä¸Šå·¥ä½œï¼Œä¸»æµçš„linuxä¹Ÿæ˜¯èƒ½å¤Ÿä½¿ç”¨çš„ã€‚
homebrewçš„ä»‹ç»æ˜¯ï¼šThe Missing Package Manager for macOS (or Linux)ã€‚ä¹Ÿå°±æ˜¯è¯´brewå®Œå…¨å¯ä»¥åœ¨linuxä¸Šè¿è¡Œã€‚
å®‰è£…æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼š
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)" ä¸Šé¢çš„shellæ‰§è¡Œä¹‹åï¼Œbrewå°±å®‰è£…æˆåŠŸäº†ã€‚
å’Œmacä¸åŒçš„æ˜¯ï¼Œlinux homebrewçš„å®‰è£…åŒ…çš„å¯æ‰§è¡Œå‘½ä»¤çš„ç›®å½•æ˜¯ï¼š/home/linuxbrew/.linuxbrew/bin, æ‰€ä»¥éœ€è¦æŠŠå®ƒåŠ å…¥åˆ°PATHä¸­ï¼Œå®‰è£…çš„è½¯ä»¶æ‰èƒ½æ­£ç¡®æ‰§è¡Œã€‚
å‚è€ƒ https://brew.sh/</p></div><footer class=entry-footer><span title='2021-11-18 08:42:53 +0800 CST'>2021-11-18 08:42:53</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨brewä½œä¸ºdeepinçš„åŒ…ç®¡ç†å·¥å…·" href=https://wdd.js.org/posts/2021/11/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å°è±¡ç¬”è®°ä¸å¤ªæ™ºèƒ½çš„æ™ºèƒ½æ›¿æ¢</h2></header><div class=entry-content><p>ä¸ºä»€ä¹ˆæ˜¯å°è±¡ç¬”è®° ä½œä¸ºä¸€ä¸ªç¬”è®°ï¼Œæˆ–è€…è¯´æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œä¸€ä¸ªæœ€åŸºæœ¬çš„è¦æ±‚ï¼Œå°±æ˜¯èƒ½æŒ‰ç…§ç”¨æˆ·çš„æŒ‰é”®è¾“å…¥ã€‚è€Œä¸æ˜¯ç”¨æˆ·è¾“å…¥äº†Aï¼Œç„¶ååœ¨é¡µé¢ä¸Šçœ‹åˆ°äº†Bã€‚
ä½†æ˜¯å¯¹äºå°è±¡ç¬”è®°æ¥è¯´ï¼Œæˆ‘å·²ç»é‡åˆ°è¿‡å¥½å¤šæ¬¡å› ä¸ºè¾“å…¥é—®é¢˜ï¼Œå‡ ä¹æƒ³è¦æ”¾å¼ƒå°è±¡ç¬”è®°ã€‚ä½†æ˜¯å°±ç›®å‰æ¥è®²ï¼Œä»ç„¶æ²¡æœ‰å¥½ç”¨çš„æ›¿ä»£å“ã€‚
å¯¹äºç¬”è®°è½¯ä»¶æ¥è¯´ï¼Œæˆ‘æœ‰ä»¥ä¸‹çš„å‡ ä¸ªæœ€ä¸ºåŸºç¡€çš„è¦æ±‚ã€‚
å¿…é¡»è·¨å¹³å°ã€‚èƒ½å¤Ÿæœ‰æ¡Œé¢ç«¯Appå’ŒIOSæˆ–è€…å®‰å“çš„APP å¿…é¡»åŒæ­¥è¦å¿«ã€‚ å¿…é¡»è¦èƒ½æœ‰ç½‘é¡µå‰ªè—çš„æ’ä»¶ å¿…é¡»è¦å°‘æŠ˜è…¾ï¼Œç”¨æˆ·ä½“éªŒå¥½ã€‚æˆ‘çš„ç›®çš„æ˜¯è®°å½•å†…å®¹ï¼Œè€Œä¸æ˜¯æŠ˜è…¾å„ç§åŒæ­¥æˆ–è€…ç½‘ç»œé…ç½®ã€‚ å¿…é¡»æ˜¯ä»˜è´¹çš„äº§å“ã€‚å…è´¹çš„äº§å“ï¼Œæ˜¯æ²¡æœ‰å¯æŒç»­å‘å±•æ½œåŠ›çš„ã€‚å½“ç„¶ï¼Œä»˜è´¹éœ€è¦åœ¨æ¥å—èŒƒå›´ä¹‹å†…ã€‚ å¿…é¡»è¶³å¤Ÿç¨³å®š ç”¨æˆ·ç•Œé¢ï¼Œä½“éªŒå¿…é¡»è¶³å¤Ÿå¥½ å¿…é¡»è¦ç¦»çº¿ä½¿ç”¨ å°±ç›®å‰æ¥è¯´ï¼Œèƒ½æ»¡è¶³ä»¥ä¸Šå‡ ä¸ªè¦æ±‚çš„ï¼Œå±ˆæŒ‡å¯æ•°ã€‚
å°è±¡ç¬”è®°è™½ç„¶æœ‰æ¶å¿ƒçš„å¹¿å‘Šæ¨é€(å³ä½¿ä¼šå‘˜ä¹Ÿæœ‰å¹¿å‘Š)ï¼Œä½†æ˜¯ä¸€èˆ¬åœ¨éç‰¹æ®Šçš„æ—¥å­ï¼Œå¹¿å‘Šä¸å›ä¸€ç›´å­˜åœ¨çš„ã€‚
å°è±¡ç¬”è®°ä¸å¤ªæ™ºèƒ½çš„æ›¿æ¢ æŠŠè‹±æ–‡å•å¼•å·æ›¿æ¢æˆä¸­æ–‡å•å¼•å· æŠŠä¸¤ä¸ªâ€“å¤©æ¢æˆä¸€ä¸ªä¸­æ–‡ç ´æŠ˜å· ä»¥ä¸Šä¸¤ä¸ªé—®é¢˜ï¼Œåœ¨ç²˜è´´ä»£ç çš„æ—¶å€™ï¼Œæ˜¯è‡´å‘½çš„é—®é¢˜ã€‚æˆ‘æœ¬æ¥ç²˜è´´çš„æ˜¯ä¸¤ä¸ªâ€“ï¼Œç²˜è´´åˆ°å°è±¡ç¬”è®°é‡Œå±…ç„¶å˜æˆä¸€ä¸ªä¸­æ–‡ç ´æŠ˜å·ï¼Œé‚£ä¹ˆåæœŸåœ¨å¤åˆ¶å‡ºæ¥ç”¨çš„ï¼Œå¿…ç„¶å‡ºç°é—®é¢˜ã€‚
æˆ‘é—®äº†å®˜æ–¹çš„å®¢æœï¼Œå®˜æ–¹çš„å®¢æˆ·ä¹Ÿä¸çŸ¥é“æ€ä¹ˆè§£å†³ã€‚
åæ¥æˆ‘è‡ªå·±åœ¨ç½‘ä¸Šæœç´¢ï¼Œå‘ç°äº†è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚
ä»¥ä¸Šæ‰€æœ‰çš„å…³äºæ›¿æ¢çš„é—®é¢˜ï¼Œéƒ½æ˜¯å’Œç¼–è¾‘å™¨çš„æ›¿æ¢è®¾ç½®æœ‰å…³ã€‚
æ‰“å¼€ä¸€ä¸ªç¬”è®°ï¼Œç„¶åç‚¹å‡»å³é”®
é€‰æ‹©æ›¿æ¢ï¼Œå¯ä»¥çœ‹åˆ°é‡Œé¢æœ‰æ™ºèƒ½å¼•å·ï¼Œåªèƒ½ç ´æŠ˜å·ï¼Œæ™ºèƒ½è¿æ¥ï¼Œæ–‡æœ¬æ›¿æ¢ï¼Œå»ºè®®æŠŠè¿™å‡ ä¸ªéƒ½å–æ¶ˆå‹¾é€‰
è¿˜æœ‰ä¸€ä¸ªå¯èƒ½æ€§ï¼Œå°±æ˜¯åœ¨**ç¼–è¾‘->æ‹¼å†™å’Œè¯­æ³•->è‡ªåŠ¨æ‹¼å†™çº æ­£ï¼Œ**è¿™ä¸ªè¦å…³é—­ã€‚</p></div><footer class=entry-footer><span title='2021-10-02 12:25:34 +0800 CST'>2021-10-02 12:25:34</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to å°è±¡ç¬”è®°ä¸å¤ªæ™ºèƒ½çš„æ™ºèƒ½æ›¿æ¢" href=https://wdd.js.org/posts/2021/10/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ç®€å•å®ç”¨çš„M4æ•™ç¨‹</h2></header><div class=entry-content><p>æ–‡æœ¬å¤„ç†çš„éš¾ç‚¹ æœ‰ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼Œæ‘˜æŠ„å…¶ä¸­ä¸¤è¡Œå†…å®¹å¦‚ä¸‹ï¼Œé‡Œé¢æœ‰ä¸¤ä¸ªé…ç½®db_addr, local_ipè¿™ä¸¤ä¸ªé…ç½®ï¼Œéœ€è¦åœ¨ä¸åŒç¯å¢ƒè¦ä¿®æ”¹çš„ã€‚
db_addr=1.2.3.4:3306 local_ip=192.168.2.4 ä½†æ˜¯å“ªäº›åœ°æ–¹è¦ä¿®æ”¹å‘¢ï¼Ÿä¸ºäº†æé†’åç»­çš„ç»´æŠ¤è€…ï¼Œæˆ‘ä»¬ç»™è¦ä¿®æ”¹çš„åœ°æ–¹åŠ ä¸ªå¤‡æ³¨å§ã€‚
db_addr=1.2.3.4:3306 # è¿™é‡Œè¦ä¿®æ”¹ local_ip=192.168.2.4 # è¿™é‡Œè¦ä¿®æ”¹ .... ... if len(a) = 1024 { # è¿™é‡Œè¦ä¿®æ”¹1024 ... } ... ç”¨sedæ›¿æ¢ï¼Ÿ è®©åˆ«äººä¸€ä¸ªä¸€ä¸ªåœ°æ–¹å»ä¿®æ”¹ï¼Œä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œæœ‰æ²¡æœ‰å¯èƒ½ç”¨è„šæœ¬å»å¤„ç†å‘¢ï¼Ÿä¾‹å¦‚æˆ‘ä»¬ç”¨DB_ADDRå’ŒLOCAL_IPè¿™ç§å­—ç¬¦ä¸²ä½œä¸ºå ä½ç¬¦ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ç”¨sedä¹‹ç±»çš„å‘½ä»¤å»åšæ›¿æ¢äº†ã€‚
db_addr=DB_ADDR local_ip=LOCAL_IP sed -i 's/DB_ADDR/1.2.3.4:3306/g;s/LOCAL_IP/192.168.0.1/g' 1.cfg è¿™æ ·åšæ˜¯æœ‰ç‚¹æ–¹ä¾¿äº†ï¼Œä½†æ˜¯ä¹Ÿæœ‰ä»¥ä¸‹å‡ ä¸ªé—®é¢˜
å¦‚æœå®šä¹‰çš„å ä½ç¬¦å¤ªå¤šï¼Œsedä¼šå˜å¾—è¶Šæ¥è¶Šé•¿ å¦‚æœæŸäº›å ä½ç¬¦é‡Œæœ¬èº«å°±å«æœ‰/æˆ–è€…ä¸€äº›ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ï¼Œå°±éœ€è¦åšç‰¹æ®Šå¤„ç†äº† ç”¨M4å§ï¼Œä¸“ä¸šçš„äººåšä¸“ä¸šçš„äº‹æƒ… apt-get install m4 é€šè¿‡å‘½ä»¤è¡Œå®šä¹‰å® 1.m4
db_addr=DB_ADDR local_ip=LOCAL_IP .... ... if len(a) = MAX_LEN { ... } ... M4å¯ä»¥ä½¿ç”¨-Dæ¥å®šä¹‰å®å’Œå®å¯¹åº”çš„å€¼ï¼Œé»˜è®¤è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼Œæˆ‘ä»¬å¯ä»¥ç”¨>å°†è¾“å‡ºå†™åˆ°æ–‡ä»¶ä¸­
m4 -D DB_ADDR=1.2.3.4:3306 -D LOCAL_IP=192.168.2.2 -D MAX_LEN=2048 1.m4 db_addr=1.2.3.4:3306 local_ip=192.168.2.2 .... ... if 1 = 2048 { ... } ... ç”¨defineè¯­å¥å®šä¹‰å® ç”¨define()è¯­å¥æ¥å®šä¹‰å® ç”¨`â€˜æ¥ä½œä¸ºå­—ç¬¦ä¸²å¼•ç”¨ï¼Œé¿å…è¢«å±•å¼€ define(`DB_ADDR', `1.2.3.4:3306') define(`LOCAL_IP', `192.168.2.2') define(`MAX_LEN', `2048') db_addr=DB_ADDR local_ip=LOCAL_IP .... ... if len(a) = MAX_LEN { ... } ... æ‰§è¡Œå‘½ä»¤m4 1.m4, å¯ä»¥çœ‹åˆ°å®å±•å¼€ï¼Œä½†æ˜¯æœ‰å¾ˆå¤šç©ºè¡Œã€‚
...</p></div><footer class=entry-footer><span title='2021-09-25 12:22:19 +0800 CST'>2021-09-25 12:22:19</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to ç®€å•å®ç”¨çš„M4æ•™ç¨‹" href=https://wdd.js.org/posts/2021/09/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨æ ‘è“æ´¾3b+ä½œä¸ºè¾…åŠ©å¼€å‘ä½“éªŒ</h2></header><div class=entry-content><p>é…ç½® æ ‘è“æ´¾3B+çš„é…ç½®
4æ ¸1G CPU ARMv7 Processor 64G SDå¡ å¸¸ç”¨è½¯ä»¶ neovim LXTerminalç»ˆç«¯ chromeæµè§ˆå™¨ è°·æ­Œæ‹¼éŸ³è¾“å…¥æ³• å¸¸ç”¨è¯­è¨€ golang c nodejs å¤–è®¾ é”®ç›˜é¼ æ ‡ï¼š é›·æŸ æ— çº¿æœºæ¢°é”®ç›˜åŠ é¼ æ ‡ 150å—å·¦å³ å±å¹•ï¼šä¸€å—ipadå¤§å°å¤–æ¥å±å¹•ï¼Œ400å—å·¦å³ å¸¸ç”¨å·¥ä½œ Golang UDP Serverå¼€å‘ï¼Œ æ€»ä½“è¿˜ç®—æµç•…ã€‚å‰ææ—¶ä¸è¦åŠ è½½å¤ªå¤šçš„neovimæ’ä»¶ï¼Œç‰¹åˆ«è±¡coc-vim, go-vimç­‰æ’ä»¶ï¼Œå®‰è£…è¿‡åè®©ä½ å¡çš„ç»æœ›ã€‚æ¯æ¬¡å½“æˆ‘ç»æœ›ä¹‹æ—¶ï¼Œæˆ‘å°±å…³é—­äº†å›¾å½¢ç•Œé¢ï¼Œå›åˆ°ç»ˆç«¯ç»§ç»­å¹²æ´»ã€‚ä½†æ˜¯å³ä½¿ä½¿ç”¨çº¯æ–‡æœ¬æ–¹å¼ç™»å½•ï¼Œè¿è¡Œvimè¿˜æ˜¯å¾ˆå¡ã€‚ åæ¥æˆ‘åœ¨macbook proä¸Šä¹Ÿç”¨neovimå¼€å‘ï¼Œå‘ç°ä¹Ÿæ˜¯å¾ˆå¡ã€‚äºæ˜¯æˆ‘å°±é‡Šç„¶äº†ï¼Œ9åƒå¤šçš„macbookéƒ½å¡ï¼Œ300å¤šçš„æ ‘è“æ´¾å¡ä¸€ç‚¹æ€ä¹ˆäº†ï¼ ä½†æ˜¯å¡é¡¿è¿˜æ˜¯éå¸¸å½±å“å¿ƒæƒ…çš„ï¼Œäºæ˜¯æˆ‘å°±å¤§é‡ç²¾ç®€vimçš„æ’ä»¶ã€‚ æˆ‘åŸºæœ¬ä¸Šå°±ç”¨ä¸¤ä¸ªæ’ä»¶ï¼Œéƒ½æ˜¯å’ŒçŠ¶æ€æ æœ‰å…³çš„ã€‚å…¶ä»–åäºŒä¸ªæ’ä»¶éƒ½ç»™æ³¨é‡Šæ‰äº† call plug#begin('~/.vim/plugged') Plug 'vim-airline/vim-airline' Plug 'vim-airline/vim-airline-themes' Plug 'jiangmiao/auto-pairs' "Plug 'yonchu/accelerated-smooth-scroll' "Plug 'preservim/tagbar', { 'for': ['go', 'c']} "Plug 'airblade/vim-gitgutter' "Plug 'fatih/vim-go', { 'do': ':GoUpdateBinaries', 'for': 'go' } "Plug 'dense-analysis/ale' "Plug 'vim-scripts/matchit.zip' "Plug 'pangloss/vim-javascript', {'for':'javascript'} "Plug 'leafgarland/typescript-vim' "Plug 'neoclide/coc.nvim', {'branch': 'release'} "Plug 'jremmen/vim-ripgrep' "Plug 'plasticboy/vim-markdown' "Plug 'mzlogin/vim-markdown-toc' call plug#end() filetype plugin indent on filetype plugin on filetype indent on set guicursor= set history=1000 let g:netrw_banner=0 let g:ale_linters = { \ 'javascript': ['standard'], \ 'typescript': ['tsserver'] \} let g:ale_fixers = {'javascript': ['standard']} let g:ale_lint_on_save = 1 let g:ale_fix_on_save = 1 let g:ale_typescript_tsserver_executable='tsserver' let g:airline#extensions#tabline#enabled = 1 let g:ale_set_loclist = 0 let g:ale_set_quickfix = 1 let g:ale_open_list = 0 let g:vim_markdown_folding_disabled = 1 let g:vmt_cycle_list_item_markers = 1 let g:tagbar_sort = 0 " colorscheme codedark " let g:airline_theme = 'codedark' " " buffer let mapleader = "," nnoremap &lt;Leader>j :bp&lt;CR> " previous buffer nnoremap &lt;Leader>k :bn&lt;CR> " next buffer nnoremap &lt;Leader>n :bf&lt;CR> " previous buffer nnoremap &lt;Leader>m :bl&lt;CR> " next buffer nnoremap &lt;Leader>l :b#&lt;CR> " previous buffer nnoremap &lt;Leader>e :e&lt;CR> " open netrw nnoremap &lt;Leader>d :bd&lt;CR> " close buffer nnoremap &lt;Leader>g :!go fmt %&lt;CR> " go fmt current file nnoremap &lt;Leader>tm :%s/\s\+$//e&lt;CR> " trim space at endofline nnoremap &lt;Leader>a A nnoremap &lt;Leader>w :w&lt;CR> nnoremap &lt;Leader>c :clo&lt;CR> nnoremap &lt;Leader>/ :Rg&lt;Space> inoremap jj &lt;ESC> highlight CocErrorFloat ctermfg=White let g:netrw_list_hide= '.*\.swp$' let g:ctrlp_custom_ignore = { \ 'dir': '\v[\/]\.?(git|hg|svn|node_modules)$', \ 'file': '\v\.(exe|so|dll|min.js)$', \ 'link': 'some_bad_symbolic_links', \ } set autoread " au CursorHold,CursorHoldI * :e " au FocusGained,BufEnter * :e set so=7 set ruler set cmdheight=2 set hid set backspace=eol,start,indent set whichwrap+=&lt;,>,h,l set ignorecase set smartcase set hlsearch set incsearch set showmatch set mat=2 syntax enable set background=dark set ffs=unix,dos,mac "set ai "Auto indent "set si "Smart indent set wrap "Wrap lines set cursorline set tabstop=4 set shiftwidth=4 set expandtab set background=dark " colorscheme solarized " let g:ackprg = 'rg --vimgrep --type-not sql --smart-case' map ; : autocmd FileType javascript setlocal ts=2 sts=2 shiftwidth=2 ä½†æ˜¯æ²¡æœ‰go-vimå†™golangè¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿çš„ï¼Œç‰¹åˆ«æ˜¯ä¿å­˜çš„æ—¶å€™æ ¼å¼åŒ–ï¼Œä½†æ˜¯ä¹Ÿæœ‰æ–¹æ¡ˆ, æ‰§è¡Œvimçš„Exå‘½ä»¤ï¼Œï¼š!go fmt % è§†é¢‘ çœ‹è§†é¢‘æ˜¯éå¸¸å±é™©çš„è¡Œä¸ºï¼Œæœ‰å¯èƒ½éœ€è¦å¼ºåˆ¶å…³æœºé‡å¯ã€‚</p></div><footer class=entry-footer><span title='2021-08-30 21:18:15 +0800 CST'>2021-08-30 21:18:15</span>&nbsp;Â·&nbsp;<span>2 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨æ ‘è“æ´¾3b+ä½œä¸ºè¾…åŠ©å¼€å‘ä½“éªŒ" href=https://wdd.js.org/posts/2021/08/mlg4mt/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>æ ‘è“æ´¾3b+è¸©å‘è®°å½•</h2></header><div class=entry-content><p>é€‰æ‹©é‚£ä¸ªç‰ˆæœ¬çš„ç³»ç»Ÿï¼Ÿ ä¸è¦è¿‡é«˜çš„ä¼°ç®—æ ‘è“æ´¾çš„æ€§èƒ½ï¼Œæœ€å¥½ä¸è¦é€‰æ‹©é‚£äº›å…·æœ‰æ¼‚äº®ç•Œé¢çš„ubuntuæˆ–è€…manjaro, å› ä¸ºå½“ä½ ä½¿ç”¨è¿™äº›å¸¦æ¡Œé¢çš„ç³»ç»Ÿæ—¶ï¼Œå¾ˆå¤§æ¦‚ç‡ç•Œé¢èƒ½è®©ä½ å¡çš„æƒ³æŠŠæ ‘è“æ´¾ç ¸äº†ã€‚
æ‰€ä»¥ä¼˜å…ˆé€‰æ‹©ä¸å¸¦å›¾å½¢ç•Œé¢çš„liteç‰ˆæœ¬çš„ç³»ç»Ÿï¼Œå¦‚æœç¡®å®éœ€è¦çš„è¯ï¼Œå¯ä»¥å†å®‰è£…lxde
ç½‘çº¿æ’äº†ï¼Œè¿˜æ˜¯æ— æ³•è”ç½‘ æ’äº†ç½‘çº¿ï¼Œç½‘å£ä¸Šçš„ç»¿ç¯ä¹Ÿæ˜¯åœ¨é—ªçƒï¼Œä½†æ˜¯eth0å°±æ˜¯æ— æ³•è”ç½‘æˆåŠŸã€‚çœŸæ˜¯æ°”äººã€‚
è§£å†³æ–¹æ¡ˆï¼š ç¼–è¾‘ /etc/network/interfaces, å°†é‡Œé¢çš„å†…å®¹æ”¹å†™æˆä¸‹é¢çš„ï¼Œç„¶åé‡å¯æ ‘è“æ´¾ã€‚
è¿™ä¸ªé…ç½®æ–‡ä»¶çš„æ¶µä¹‰æ˜¯ï¼šåœ¨å¯åŠ¨æ—¶å°±ä½¿ç”¨eth0æœ‰çº¿ç½‘å¡ï¼Œå¹¶ä¸”ä½¿ç”¨dhcpç»™è¿™ä¸ªç½‘å¡è‡ªåŠ¨é…ç½®IP
auto eth0 iface eth0 inet dhcp iface etho inet6 dhcp source-directory /etc/network/interfaces.d æ— æ¡Œé¢ç‰ˆæœ¬ï¼Œå¦‚ä½•æ‰‹å·¥å®‰è£…æ¡Œé¢ é¦–å…ˆå®‰è£…lxde
sudo apt update sudo apt install lxde -y ç„¶åé€šè¿‡raspi-config, é…ç½®é»˜è®¤ä»æ¡Œé¢å¯åŠ¨
sudo rasip-config é€‰æ‹©ç³»ç»Ÿé…ç½®, æŒ‰å›è½¦é”®è¿›å…¥ é€‰æ‹©Boot/Auto loginï¼Œ æŒ‰å›è½¦è¿›å…¥
é€‰æ‹©Desktop, å›è½¦ç¡®è®¤ã€‚ä¿å­˜ä¹‹åï¼Œé€€å‡ºé‡å¯ã€‚
é”®ç›˜æ— æ³•è¾“å…¥| | åœ¨linuxä¸­æ˜¯ç®¡é“çš„æ„æ€ï¼Œç„¶è€Œæˆ‘çš„é”®ç›˜å´æ— æ³•è¾“å…¥ã€‚æœ€ç»ˆå‘ç°æ˜¯é”®ç›˜å¸ƒå±€çš„åŸå› ã€‚
åœ¨å›¾æ ‡ä¸Šå³é”®ï¼Œé€‰æ‹©é…ç½®
æ³¨æ„è¿™é‡Œæ˜¯US, è¿™æ˜¯æ­£å¸¸çš„ã€‚å¦‚æœæ˜¯UKï¼Œå°±æ˜¯è‹±å¼å¸ƒå±€ï¼Œæ˜¯æœ‰é—®é¢˜çš„ï¼Œéœ€è¦æŠŠUKçš„åˆ é™¤ï¼Œé‡æ–°å¢åŠ ä¸€ä¸ªUSçš„ã€‚
å¦‚ä½•å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„neovim? æ ‘è“æ´¾ä½¿ç”¨aptå®‰è£…çš„neovimï¼Œ ç‰ˆæœ¬å¤ªè€äº†ã€‚å¾ˆå¤šæ’ä»¶ä½¿ç”¨ä¸Šéƒ½ä¼šä½“éªŒä¸å¥½ã€‚æ‰€ä»¥å»ºè®®å®‰è£…æœ€æ–°ç‰ˆçš„neovimã€‚
...</p></div><footer class=entry-footer><span title='2021-08-14 11:01:17 +0800 CST'>2021-08-14 11:01:17</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to æ ‘è“æ´¾3b+è¸©å‘è®°å½•" href=https://wdd.js.org/posts/2021/08/uuvor0/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>js sdk è·¨å±‚ç©¿é€é—®é¢˜</h2></header><div class=entry-content><p>å…³äºjs sdkçš„è®¾è®¡ï¼Œè¿™ç¯‡æ–‡æ¡£åŸºæœ¬ä¸Šè¯¦ç»†ä»‹ç»äº†å¾ˆå¤šçš„ç‚¹ï¼Œå€¼å¾—æ·±å…¥é˜…è¯»ä¸€éã€‚https://github.com/hueitan/javascript-sdk-design
ç„¶è€Œæœ€è¿‘åœ¨é‡æ„æŸä¸ªjs sdkæ—¶ï¼Œä¹Ÿå‘ç°äº†ä¸€äº›é—®é¢˜ï¼Œè¿™ä¸ªé—®é¢˜å¹¶ä¸å­˜åœ¨äºä¸Šè¿°æ–‡ç« ä¸­çš„ã€‚
js sdkåœ¨æ”¶åˆ°æœåŠ¡ç«¯çš„å“åº”æ—¶ï¼Œç›´æ¥å°†serverç«¯è¿”å›çš„é”™è¯¯ç ç»™åˆ°ç”¨æˆ·ã€‚
è¿™é‡Œä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªå“åº”ç ï¼Œå®é™…ä¸Šæ˜¯js sdkå’Œserverä¹‹é—´çš„æ¶ˆæ¯äº¤æµã€‚å¹¶ä¸æ˜¯js sdkå’Œç”¨æˆ·ä¹‹é—´çš„æ¶ˆæ¯äº¤æµã€‚
å¦‚æœæˆ‘ä»¬å°†serverç«¯çš„å“åº”ç›´æ¥è¿”å›ç»™ç”¨æˆ·ï¼Œåˆ™js sdkå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªé€æ˜ä»£ç†ã€‚ç”¨æˆ·å°†ä¼šå’Œserverç«¯äº§ç”Ÿå¼ºè€¦åˆã€‚å¦‚æœserverç«¯æœ‰ä¸å…¼å®¹çš„å˜åŒ–ï¼Œå°†ä¼šç›´æ¥å½±å“åˆ°ç”¨æˆ·çš„ä½¿ç”¨ã€‚
æ‰€ä»¥è¾ƒå¥½çš„åšæ³•æ˜¯js sdkå°†è¿™ä¸ªé”™è¯¯å°è£…ä¸ºå¦ä¸€ä¸ªç§è¡¨ç°å½¢å¼ï¼Œå’Œserverç«¯åˆ†ç¦»å‡ºæ¥ã€‚</p></div><footer class=entry-footer><span title='2021-08-12 13:46:39 +0800 CST'>2021-08-12 13:46:39</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to js sdk è·¨å±‚ç©¿é€é—®é¢˜" href=https://wdd.js.org/posts/2021/08/kbcih7/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>é¢å‘å¼‚å¸¸ç¼–ç¨‹todo</h2></header><div class=entry-content><p>ç¨‹åºå¯èƒ½å¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯æŒ‰ç…§æ­£å¸¸çš„é€»è¾‘è¿è¡Œï¼Œç„¶è€Œä¹Ÿæœ‰å°‘æ•°çš„æ¦‚ç‡ï¼Œç¨‹åºå‘ç”Ÿå¼‚å¸¸ã€‚
ä¼˜ç§€ç¨‹åºï¼Œä¸ä»…ä»…è¦è€ƒè™‘æ­£å¸¸è¿è¡Œï¼Œè¿˜éœ€è¦è€ƒè™‘ä¸¤ç‚¹ï¼š
å¦‚ä½•å¤„ç†å¼‚å¸¸ å¦‚ä½•åœ¨å‘ç”Ÿå¼‚å¸¸åï¼Œå¿«é€Ÿå®šä½åŸå›  æ­£å¸¸çš„å¤„ç†å¦‚æœç§°ä¸ºæ”¶ç›Šçš„è¯ï¼Œå¼‚å¸¸çš„å¤„ç†å°±æ˜¯è¦èƒ½å¤ŸåŠæ—¶æ­¢æŸã€‚
èƒ½ç¨³å®šè¿è¡Œ364å¤©çš„ç¨‹åºï¼Œå¾ˆå¯èƒ½å› ä¸ºä¸€å¤©çš„é—®é¢˜ï¼Œå°±è¢«å®¢æˆ·æŠ›å¼ƒã€‚å› ä¸ºè¿™ä¸€å¤©çš„æŸå¤±ï¼Œå°±å¯èƒ½ä¼šè¶…è¿‡ä¹‹å‰æ”¶ç›Šçš„æ€»å’Œã€‚
å¼‚å¸¸åº”å½“å¦‚ä½•å¤„ç† å¦‚æœäº‹æƒ…æœ‰å˜åçš„å¯èƒ½ï¼Œä¸ç®¡è¿™ç§å¯èƒ½æ€§æœ‰å¤šå°ï¼Œå®ƒæ€»ä¼šå‘ç”Ÿã€‚ã€Šè«éå®šå¾‹ã€‹
å¯¹äºç¨‹åºæ¥è¯´ï¼Œé¿å…å˜åçš„æ–¹æ³•åªæœ‰ä¸€ä¸ªï¼Œå°±æ˜¯ä¸è¦è¿è¡Œç¨‹åºï¼ˆçº¯ç²¹åºŸè¯ğŸ˜‚ï¼‰ã€‚
1. åŠæ—¶å´©æºƒ var conn = nil var maxConnectTimes = 3 var reconnectDelay = 3 * 1000 var currentReconnectTimes = 0 var timeId = 0 func InitDb () { conn = connect("æ•°æ®åº“") conn.on("connected", ()=>{ // å°†å½“å‰é‡è¿æ¬¡æ•°é‡åˆ¶ä¸º0 currentReconnectTimes = 0 }) conn.on("error", ReconnectDb) } func ReconnectDb () { conn.Close() // å¦‚æœé‡è¿æ¬¡æ•°å¤§äºæœ€å¤§é‡è¿æ¬¡æ•°ï¼Œå°†ä¸åœ¨é‡è¿ if currentReconnecTimes > maxConnectTimes { return } // å¦‚æœå·²ç»å‚¬åœ¨é‡è¿çš„ä»»åŠ¡ï¼Œåˆ™å…ˆå…³é—­ if timeId != 0 { cleanTimeout(timeId) } // å½“å‰é‡è¿æ¬¡æ•°å¢åŠ  currentReconnectTimes++ // å¼€å§‹å»¶è¿Ÿé‡è¿ timeId = setTimeout(InitDb, reconnectDelay) } 2. å¦‚ä½•å¿«é€Ÿå®šä½é—®é¢˜ ç¬¬ä¸€ï¼Œä»£ç çš„æ•¬ç•ä¹‹å¿ƒ ç¬¬äºŒï¼ŒåŠæ—¶å‘Šè­¦ã€‚æ—¥å¿—ï¼Œæˆ–è€…httpè¯·æ±‚ ç¬¬ä¸‰ï¼Œç¼–ç¨‹æ—¶ï¼Œå°±è¦è€ƒè™‘å¼‚å¸¸ã€‚ä¾‹å¦‚ç¨‹åºä¾èµ– MQæˆ–è€…Mysqlï¼Œå½“ä¸ä¹‹äº¤äº’çš„é“¾æ¥æ–­å¼€åï¼Œåº”è¯¥æ€æ ·å¤„ç†ï¼Ÿ ç¬¬å››ï¼Œå¤šå®ä¾‹é—®é¢˜è€ƒè™‘ ç¬¬äº”ï¼Œæ£€æŸ¥æ¸…å•</p></div><footer class=entry-footer><span title='2021-08-05 08:58:30 +0800 CST'>2021-08-05 08:58:30</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to é¢å‘å¼‚å¸¸ç¼–ç¨‹todo" href=https://wdd.js.org/posts/2021/08/brh6mu/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ç›‘æ§podé‡å¯å¹¶å†™æ—¥å¿—æ–‡ä»¶</h2></header><div class=entry-content><p>ä¸€èˆ¬æ¥è¯´ï¼Œç›‘æ§podçŠ¶æ€é‡å¯å’Œå‘Šè­¦ï¼Œå¯ä»¥ä½¿ç”¨æ™®ç½—ç±³ä¿®æ–¯æˆ–è€…kubewatchã€‚
ä½†æ˜¯å¦‚æœä½ åªæƒ³å°†æŸä¸ªpodé‡å¯äº†ï¼Œå¾€æŸä¸ªæ—¥å¿—æ–‡ä»¶ä¸­å†™ä¸€æ¡è®°å½•ï¼Œé‚£ä¹ˆä¸‹é¢çš„æ–¹å¼å°†æ˜¯éå¸¸ç®€å•çš„ã€‚
å®ç°çš„æ€è·¯æ˜¯ä½¿ç”¨kubectl è·å–æ‰€æœ‰podçš„çŠ¶æ€ä¿¡æ¯ï¼Œç»Ÿè®¡å‘ç”Ÿè¿‡é‡å¯çš„pod, ç„¶åå’Œä¹‹å‰çš„é‡å¯æ¬¡æ•°åšå¯¹æ¯”ï¼Œå¦‚æœæ¯”ä¹‹å‰è®°å½•çš„æ¬¡æ•°å¤§ï¼Œé‚£ä¹ˆè‚¯å®šæ˜¯å‘ç”Ÿè¿‡é‡å¯äº†ã€‚
#!/bin/bash now=$(date "+%Y-%m-%d %H:%M:%S") log_file="/var/log/pod.restart.log" ns="some-namespace" echo $now start pod restart monitor >> $log_file # touchä¸€ä¸‹ä¹‹å‰çš„è®°å½•æ–‡ä»¶ï¼Œé˜²æ­¢æ–‡ä»¶ä¸å­˜åœ¨ touch restart.old.log # ç”Ÿæˆæœ¬æ¬¡çš„ç»Ÿè®¡æ•°æ® kubectl get pod -n $ns -o wide | awk '$4 > 0{print $1,$4}' | grep -v NAME > restart.now.log # æŒ‰è¡Œè¯»å–æœ¬æ¬¡ç»Ÿè®¡æ•°æ® # æ•°æ®æ ¼å¼ä¸ºï¼špodname é‡å¯æ¬¡æ•° while read line do # pod name name=$(echo $line | awk '{print $1}') # é‡å¯æ¬¡æ•° count=$(echo $line | awk '{print $2}') # æ£€æŸ¥æœ¬æ¬¡é‡å¯çš„podåç§°æ˜¯å¦åœ¨ä¹‹å‰çš„è®°å½•ä¸­å­˜åœ¨ if grep $name restart.old.log; then # å¦‚æœå­˜åœ¨ï¼Œåˆ™å–å‡ºä¹‹å‰è®°å½•çš„é‡å¯æ¬¡æ•° t=$(grep $name restart.old.log | awk '{print $2}') # å’Œæœ¬æ¬¡è®°å½•çš„é‡å¯æ¬¡æ•°æ¯”è¾ƒï¼Œå¦‚æœæœ¬æ¬¡çš„é‡å¯æ¬¡æ•°è¾ƒå¤§ # åˆ™è¯´æ˜podä¸€å®šé‡å¯è¿‡ if [ $count -gt $t]; then echo $now ERROR pod_restart $name >> $log_file fi else # å¦‚æœé‡å¯çš„podä¸å­˜åœ¨ä¹‹å‰çš„è®°å½•ä¸­ï¼Œä¹Ÿè¯´æ˜podé‡å¯è¿‡ echo $now ERROR pod_restart $name >> $log_file fi done &lt; restart.now.log # åˆ é™¤è€çš„è®°å½•æ–‡ä»¶ rm -f restart.old.log # å°†æ–°çš„è®°å½•æ–‡ä»¶é‡å‘½åä¸ºè€çš„è®°å½•æ–‡ä»¶ mv restart.now.log restart.old.log ç„¶åå¯ä»¥å°†ä¸Šé¢çš„è„šæœ¬åšæˆå®šæ—¶ä»»åŠ¡ï¼Œæ¯åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ã€‚é‚£ä¹ˆå°±å¯ä»¥å°†podé‡å¯çš„ä¿¡æ¯å†™å…¥æ–‡ä»¶ã€‚
...</p></div><footer class=entry-footer><span title='2021-07-28 21:21:33 +0800 CST'>2021-07-28 21:21:33</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to ç›‘æ§podé‡å¯å¹¶å†™æ—¥å¿—æ–‡ä»¶" href=https://wdd.js.org/posts/2021/07/giqfii/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>udp cluster å¤šè¿›ç¨‹è°ƒåº¦ç­–ç•¥å­¦ä¹ </h2></header><div class=entry-content><p>æœ¬æ¥æˆ‘çš„ç›®çš„æ˜¯ä½¿ç”¨clusteræ¨¡å—çš„forkå‡ºå¤šä¸ªè¿›ç¨‹ï¼Œè®©å„ä¸ªè¿›ç¨‹éƒ½èƒ½å¤„ç†udpæ¶ˆæ¯çš„ã€‚ä½†æ˜¯æœ€ç»ˆæµ‹è¯•å‘ç°ï¼Œå®é™…ä¸Šä»…æœ‰ä¸€ä¸ªè¿›ç¨‹å¤„ç†äº†ç»å¤§æ•°æ¶ˆæ¯ï¼Œå…¶ä»–çš„è¿›ç¨‹ï¼Œè¦ä¹ˆä¸å¤„ç†æ¶ˆæ¯ï¼Œè¦ä¹ˆå¤„ç†çš„éå¸¸å°‘çš„æ¶ˆæ¯ã€‚
ç„¶è€Œä½¿ç”¨clusteræ¥å¼€å¯httpæœåŠ¡çš„å¤šè¿›ç¨‹ï¼Œå´èƒ½å¤Ÿè¾¾åˆ°å¤šè¿›ç¨‹çš„è´Ÿè½½ã€‚
serverç«¯demoä»£ç ï¼š const cluster = require('cluster') const numCPUs = require('os').cpus().length const { logger } = require('./logger') const dgram = require('dgram') // const { createHTTPServer, createUDPServer } = require('./app') const port = 8088 if (cluster.isMaster) { for (let i = 0; i &lt; numCPUs; i++) { cluster.fork() } cluster.on('exit', (worker, code, signal) => { logger.info(`å·¥ä½œè¿›ç¨‹ ${worker.process.pid} å·²é€€å‡º`) }) } else { const server = dgram.createSocket({ type: 'udp4', reuseAddr: true }) server.on('error', (err) => { logger.info(`udp server error:\n${err.stack}`) server.close() }) server.on('message', (msg, rinfo) => { logger.info(`${process.pid} udp server got: ${msg} from ${rinfo.address}:${rinfo.port}`) }) server.on('listening', () => { const address = server.address() logger.info(`udp server listening ${address.address}:${address.port}`) }) server.bind(port) } æ—¥å¿—åº“å¦‚ä¸‹ï¼š
...</p></div><footer class=entry-footer><span title='2021-07-21 12:57:03 +0800 CST'>2021-07-21 12:57:03</span>&nbsp;Â·&nbsp;<span>4 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to udp cluster å¤šè¿›ç¨‹è°ƒåº¦ç­–ç•¥å­¦ä¹ " href=https://wdd.js.org/posts/2021/07/tniabf/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä½¿ç”¨nginxä¸ºudpæœåŠ¡è´Ÿè½½å‡è¡¡</h2></header><div class=entry-content><p>å¯¹nginxçš„æœ€ä½ç‰ˆæœ¬è¦æ±‚æ˜¯ï¼Ÿ 1.9.13 The ngx_stream_proxy_module module (1.9.0) allows proxying data streams over TCP, UDP (1.9.13), and UNIX-domain sockets.
ç®€å•çš„é…ç½®æ˜¯ä»€ä¹ˆæ ·ï¼Ÿ ä¾‹å¦‚ç›‘å¬æœ¬åœ°53çš„udpç«¯å£ï¼Œç„¶åè½¬å‘åˆ°192.168.136.130å’Œ192.168.136.131çš„53ç«¯å£
æ³¨æ„äº‹é¡¹
streamæ˜¯é¡¶å±‚çš„é…ç½®ï¼Œä¸èƒ½åŒ…å«åœ¨httpæ¨¡å—é‡Œé¢ proxy_responseså¾ˆé‡è¦ï¼Œå¦‚æœä½ çš„udpæœåŠ¡åªæ¥å—udpæ¶ˆæ¯ï¼Œå¹¶ä¸å‘é€udpæ¶ˆæ¯ï¼Œé‚£ä¹ˆåŠ¡å¿…å°†proxy_responsesçš„å€¼è®¾ç½®ä¸º0 stream { upstream dns_upstreams { server 192.168.136.130:53; server 192.168.136.131:53; } server { listen 53 udp; proxy_pass dns_upstreams; proxy_timeout 1s; proxy_responses 0; error_log logs/dns.log; } } | Syntax: | proxy_responses number;
Default: â€” Context: stream, server |
This directive appeared in version 1.9.13.
Sets the number of datagrams expected from the proxied server in response to a client datagram if the UDP protocol is used. The number serves as a hint for session termination. By default, the number of datagrams is not limited. If zero value is specified, no response is expected. However, if a response is received and the session is still not finished, the response will be handled.
...</p></div><footer class=entry-footer><span title='2021-07-17 19:28:18 +0800 CST'>2021-07-17 19:28:18</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to ä½¿ç”¨nginxä¸ºudpæœåŠ¡è´Ÿè½½å‡è¡¡" href=https://wdd.js.org/posts/2021/07/tom7mv/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://wdd.js.org/page/11/>Â«&nbsp;Prev&nbsp;
</a><a class=next href=https://wdd.js.org/page/13/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=https://wdd.js.org/>æ´é¦™æ˜¥</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>