<!doctype html><html lang=en dir=auto><head><meta name=generator content="Hugo 0.119.0"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>洞香春</title><meta name=keywords content="Blog,Portfolio,PaperMod"><meta name=description content="Eddie Wang的个人博客"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/><link crossorigin=anonymous href=/assets/css/stylesheet.6d3944e058d85363bbe8a792a9b5f40002bca80be859dc19c466dd8de223973e.css integrity="sha256-bTlE4FjYU2O76KeSqbX0AAK8qAvoWdwZxGbdjeIjlz4=" rel="preload stylesheet" as=style><link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wdd.js.org/index.xml><link rel=alternate type=application/json href=https://wdd.js.org/index.json><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="洞香春"><meta property="og:description" content="Eddie Wang的个人博客"><meta property="og:type" content="website"><meta property="og:url" content="https://wdd.js.org/"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="洞香春"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="洞香春"><meta name=twitter:description content="Eddie Wang的个人博客"><script type=application/ld+json>{"@context":"https://schema.org","@type":"Organization","name":"洞香春","url":"https://wdd.js.org","description":"Eddie Wang的个人博客","thumbnailUrl":"https://wdd.js.org/cowboy.ico","sameAs":["https://github.com/wangduanduan","mailto://1779706607@qq.com","https://wdd.js.org/index.xml","https://yuque.com/wangdd"]}</script></head><body class="list dark" id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/fe/ title=Frontend><span>Frontend</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/container/ title=k8s/docker><span>k8s/docker</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/shell/ title=Shell><span>Shell</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-entry><header class=entry-header><h2>Linux内核参数rp_filter</h2></header><div class=entry-content><p>问题现象 主机上有两个网卡ens192和ens224。ens129网卡是对内网络的网卡，ens224是对网网络的网卡。 SIP信令阶段都是正常的，但是发现，对于来自node3的RTP流， 并没有从ens192网卡转发给node1上。 sequenceDiagram title network autonumber node1->>ens192: INVITE ens224->>node2: INVITE node2->>ens224: 200 ok ens192->>node1: 200 ok node1->>ens192: ACK ens224->>node2: ACK node1-->>ens192: RTP out ens224-->>node3: RTP out node3-->>ens224: RTP in 抓包程序抓到了node3发送到ens224上的包，但是排查应用服务器的日志发现，似乎应用服务器根本没有收到node3上过来的包, 所以也就无法转发。 因而怀疑是不是在内核上被拦截了。 后来通过将rp_filter设置为0, 然后语音流的转发就正常了。 事后复盘 node3的这个IP直接往应用服务器上发包，可能会被拦截。因为在信令建立的阶段，应用服务器并没有主动发 在kernel文档上 rp_filter - INTEGER 0 - No source validation. 1 - Strict mode as defined in RFC3704 Strict Reverse Path Each incoming packet is tested against the FIB and if the interface is not the best reverse path the packet check will fail....</p></div><footer class=entry-footer><span title='2022-06-13 00:00:00 +0800 CST'>2022-06-13 00:00:00</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to Linux内核参数rp_filter" href=https://wdd.js.org/network/rp_filter/></a></article><article class=post-entry><header class=entry-header><h2>mysql placeholder的错误使用方式</h2></header><div class=entry-content><p>Error EXTRA *mysql.MySQLError=Error 1064: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ‘? ( 然而我仔细看了看sql语句，没有看出来究竟哪里有sql报错。
然而当我把作为placeholder的问号去掉，直接用表的名字，sql是可以直接执行的。我意识到这个可能是和placeholder有关。
搜索了一下，看到一个链接 https://github.com/go-sql-driver/mysql/issues/848
Placeholder can’t be used for table name or column name. It’s MySQL spec. Not bug of this project.
大意是说，placeholder是不能作为表名或者列名的。
在mysql关于prepared文档介绍中，在允许使用prepared的语句里，没有看到create table可以用placeholderhttps://dev.mysql.com/doc/refman/8.0/en/sql-prepared-statements.html
prepared语句的优点有以下几个
优化查询速度 防止sql注入 但是也有一些限制
不是所有语句都能用prepared语句。常见的用法应该是作为select where之后的条件，或者INSERT语句之后的值 不支持一个sql中多条查询语句的形式</p></div><footer class=entry-footer><span title='2022-06-11 23:51:34 +0800 CST'>2022-06-11 23:51:34</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to mysql placeholder的错误使用方式" href=https://wdd.js.org/posts/2022/06/vvdqw6/></a></article><article class=post-entry><header class=entry-header><h2>WebRTC 人声检测与舒适噪音</h2></header><div class=entry-content><p>人声检测 VAD 人声检测(VAD: Voice Activity Detection)是区分语音中是人说话的声音，还是其他例如环境音的一种功能。
除此以外，人声检测还能用于减少网络中语音包传输的数据量，从而极大的降低语音的带宽，极限情况下能降低50%的带宽。
在一个通话中，一般都是只有一个人说话，另一人听。很少可能是两个人都说话的。
例如A在说话的时候，B可能在等待。
虽然B在等待过程中，B的语音流依然再按照原始速度和编码再发给A, 即使这里面是环境噪音或者是无声。
A ----> B # A在说话 A &lt;--- B # B在等待过程中，B的语音流依然再按照原始速度和编码再发给A 如果B具有VAD检测功能，那么B就可以在不说话的时候，发送特殊标记的语音流或者通过减少语音流发送的频率，来减少无意义语音的发送。
从而极大的降低B->A的语音流。
下图是Wireshark抓包的两种RTP包，g711编码的占214字节，但是用舒适噪音编码的只有63字节。将近减少了4倍的带宽。
舒适噪音生成器 CNG 舒适噪音(CN stands for Comfort Noise), 是一种模拟的背景环境音。舒适噪音生成器在接收端根据发送到给的参数，来产生类似接收端的舒适噪音, 用来模拟发送方的噪音环境。
CN也是一种RTP包的格式，定义在RFC 3389
舒适噪音的payload, 也被称作静音插入描述帧(SID: a Silence Insertion Descriptor frame), 包括一个字节的数据，用来描述噪音的级别。也可以包含其他的额外的数据。早期版本的舒适噪音的格式定义在RFC 1890中，这个版本的格式只包含一个字段，就是噪音级别。
噪音级别占用一个字节，其中第一个bit必须是0， 因此噪音级别有127中可能。
0 1 2 3 4 5 6 7 +-+-+-+-+-+-+-+-+ |0| level | +-+-+-+-+-+-+-+-+ 跟着噪音级别的后续字节都是声音的频谱信息。
Byte 1 2 3 ... M+1 +-----+-----+-----+-----+-----+ |level| N1 | N2 | ....</p></div><footer class=entry-footer><span title='2022-06-01 08:27:53 +0800 +0800'>2022-06-01 08:27:53</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to WebRTC 人声检测与舒适噪音" href=https://wdd.js.org/freeswitch/webrtc-vad-cng/></a></article><article class=post-entry><header class=entry-header><h2>Hugo博客常见问题以及解决方案</h2></header><div class=entry-content><p>如何在markdown中插入图片 在static 目录中创建 images 目录，然后把图片放到images目录中。
在文章中引用的时候
![](/images/qianxun.jpeg#center) Warning 我之前创建的文件夹的名字叫做 img, 本地可以正常显示，但是部署之后，就无法显示图片了。
最后我把img改成images才能正常在网页上显示。</p></div><footer class=entry-footer><span title='2022-05-28 21:08:43 +0800 +0800'>2022-05-28 21:08:43</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to Hugo博客常见问题以及解决方案" href=https://wdd.js.org/posts/2022/05/hugo-blog-faq/></a></article><article class=post-entry><header class=entry-header><h2>Shell 教程技巧</h2></header><div class=entry-content><p>复制文本到剪贴板 sudo apt install xclip vim ~/.zshrc
alias copy='xclip -selection clipboard' 这样我们就可以用copy命令来考本文件内容到系统剪贴板了。
copy aaa.txt 判断工作区是否clean if [ -z "$(git status --porcelain)" ]; then # Working directory clean else # Uncommitted changes fi</p></div><footer class=entry-footer><span title='2022-05-28 12:39:50 +0800 +0800'>2022-05-28 12:39:50</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to Shell 教程技巧" href=https://wdd.js.org/posts/2022/05/shell-101/></a></article><article class=post-entry><header class=entry-header><h2>C和gdb调试</h2></header><div class=entry-content><p>开启coredump #如果该命令的返回值是0，则表示不开启coredump ulimit -c # 开启coredump ulimit -c unlimited 准备c文件 #include&lt;stdio.h> void crash() { char * p = NULL; *p = 0; } int main(){ printf("hello world 1"); int phone [4]; phone[232] = 12; crash(); return 0; } 编译执行 gcc -g hello.c -o hello ./hello 之后程序崩溃，产生core文件。
gdb分析 gdb 启动的二进制文件 core文件
gdb ./hello ./core 之后输入： bt full 可以查看到更详细的信息
➜ c-sandbox gdb ./hello ./core GNU gdb (Raspbian 7.12-6) 7.12.0.20161007-git Copyright (C) 2016 Free Software Foundation, Inc....</p></div><footer class=entry-footer><span title='2022-05-28 12:35:26 +0800 +0800'>2022-05-28 12:35:26</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to C和gdb调试" href=https://wdd.js.org/posts/2022/05/c-and-gdb/></a></article><article class=post-entry><header class=entry-header><h2>Tmux 常见问题以及解决方案</h2></header><div class=entry-content><p>oh my tmux 关闭第二键ctrl-a ctrl-a可以用来移动光标到行首的，不要作为tmux的第二键
set -gu prefix2 unbind C-a Tmux reload config :source-file ～/.tmux.conf tmux 显示时间 ctrl b + t tmux从当前目录打开新的窗口 bind '"' split-window -c "#{pane_current_path}" bind % split-window -h -c "#{pane_current_path}" bind c new-window -c "#{pane_current_path}"</p></div><footer class=entry-footer><span title='2022-05-28 12:30:58 +0800 +0800'>2022-05-28 12:30:58</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to Tmux 常见问题以及解决方案" href=https://wdd.js.org/posts/2022/05/tmux-faq/></a></article><article class=post-entry><header class=entry-header><h2>hugo博客增加mermaid 绘图插件</h2></header><div class=entry-content><p>增加mermaid shortcodes 在themes/YourTheme/layouts/shortcodes/mermaid.html 增加如下内容
&lt;script async type="application/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@9.1.1/dist/mermaid.min.js"> var config = { startOnLoad:true, theme:'{{ if .Get "theme" }}{{ .Get "theme" }}{{ else }}dark{{ end }}', align:'{{ if .Get "align" }}{{ .Get "align" }}{{ else }}center{{ end }}' }; mermaid.initialize(config); &lt;/script> &lt;div class="mermaid"> {{.Inner}} &lt;/div> 在blog中增加如下代码 Warning 注意下面的代码，你在实际写的时候，要把 /* 和 */ 删除 {{/*&lt; mermaid align="left" theme="neutral" */>}} pie title French Words I Know "Merde" : 50 "Oui" : 35 "Alors" : 10 "Non" : 5 {{/*&lt; /mermaid >*/}} pie title French Words I Know "...</p></div><footer class=entry-footer><span title='2022-05-27 11:49:44 +0800 +0800'>2022-05-27 11:49:44</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to hugo博客增加mermaid 绘图插件" href=https://wdd.js.org/posts/2022/05/02-hugo-add-mermaid/></a></article><article class=post-entry><header class=entry-header><h2>klogg: 目前我最喜欢的日志查看工具</h2></header><div class=entry-content><p>项目信息 github地址 https://github.com/variar/klogg
1. 安装 klogg是个跨平台软件，windows, mac, linux都可以安装。具体安装方式参考github项目地址
2. 界面布局 文件信息栏 日志栏 过滤器设置栏 过滤后的日志显示栏 3. 文件加载 klogg支持多种方式加载日志文件
将日志文件拖动到klogg中 直接将常见的压缩包文件拖动到klogg中，klogger将会自动将其解压后展示 支持从http url地址下载日志，然后查看 支持从剪贴板复制日志，然后展示 4. 过滤表达式 因为klogg支持正则过滤，所以他的功能就非常强悍了。
逻辑表达式
表达式 例子 备注 与 and “open” and “close” 包含open，并且包含close 或 or “open” or “close” 包含open, 或者 close 非 not not(“open”) 不包含open 与或非同时支持复杂的运算，例如包含open 但是不包含close: "open" and not("close")
5. 快捷方式 klogg的快捷方式很多参考了vim, vim使用者非常高兴。
键 动作 arrows 上下或者左右移动 [number] j/k 支持用j/k上下移动 h/l 支持用h/l左右移动 ^ or $ 滚动到某行的开始或者结尾 [number] g 跳到对应的行 entered G 跳到第一行 Shift+G 跳到最后一行 Alt+G 显示跳到某一行的对话框 ’ or " 在当前屏幕快速搜索 (forward and backward) n or N 向前或者向后跳 * or ....</p></div><footer class=entry-footer><span title='2022-04-13 19:41:53 +0800 CST'>2022-04-13 19:41:53</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to klogg: 目前我最喜欢的日志查看工具" href=https://wdd.js.org/posts/2022/04/cipwms/></a></article><article class=post-entry><header class=entry-header><h2>macbook pro 使用1664天的感受</h2></header><div class=entry-content><p>我之前写过一篇文章《macbook pro使用三年后的感受》，今天这篇文章是用4.5年的感受。
再次梳理一下，中间遇到过的问题
蝴蝶键盘很早有有些问题了，最近疫情在家，键盘被用坏了，J键直接坏了。只能外接键盘来用 屏幕下方出现淡红色的纹路，不太明显，基本不影响使用 中间我自己给macbook换过一次电池，换电池之前只要不插电，macbook很容易就关机了 风扇经常转，噪音有点吵，我已经觉得无所谓了 17年买这台电脑的时候，应该是9400左右。配置应该是最低配的 i5双核2.3Ghz, 8G内存，128硬盘的。
有些人可能惊讶，128G的硬盘怎么能够用的。但是我的确够用，我的磁盘还有将近50G的剩余空间呢。
我不是视频或者影音工作者，用的软件比较少。整个应用程序所占用的空间才4个多G。剩下的文稿可能大部分是代码。
由于我我基本上都是远程用ssh连上nuc上开发，所以mac上的资料更少。
但是macbook键盘坏了这个问题，是不能忍的。偶尔要移动办工的时候，不可能再带个外接键盘吧。
是时候准备和陪伴我4.5年的电脑说再见了。
本来想买14寸的macbook pro m1的，但是重量的增加以及很丑的刘海也是我不能忍的。
所以我觉得我会买一台轻便点的windows笔记本，而且windows还有一个很吸引我的点，就是linux子系统。这个linux子系统，要比mac的系统更加linux。
各位同学有没有推荐的windows的轻便笔记本呢？</p></div><footer class=entry-footer><span title='2022-04-04 21:29:13 +0800 CST'>2022-04-04 21:29:13</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to macbook pro 使用1664天的感受" href=https://wdd.js.org/posts/2022/04/er3vob/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://wdd.js.org/page/5/>«&nbsp;Prev&nbsp;</a>
<a class=next href=https://wdd.js.org/page/7/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=https://wdd.js.org>洞香春</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>