<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>opensips centos7 安装与升级 | 洞香春</title>
<meta name=keywords content><meta name=description content="环境声明 系统 centos7 已经安装opensips 2.2 需要升级目标 opensips 2.4.6 要求：当前系统上没有部署mysql服务端程序 升级步骤 升级分为两步
opensips 应用升级，包括源码的下载，编译等等 opensips 数据库升级，使用opensipsdbctl工具迁移老的数据 Edge: opensips应用升级 升级过程以Makefile交付，可以先新建一个空的目录，如 /root/opensips-update/
# file: /root/opensips-update/Makefile VERSION=2.4.6 download: wget https://opensips.org/pub/opensips/$(VERSION)/opensips-$(VERSION).tar.gz; tar -zxvf opensips-$(VERSION).tar.gz; build: cd opensips-$(VERSION); make all -j4 include_modules=&#34;db_mysql httpd db_http siprec&#34;; # siprec是可选的 make install include_modules=&#34;db_mysql httpd db_http siprec&#34;; # siprec是可选的 新建空目录/root/opensips-update/ 在新目录中创建名为 Makefile的文件, 内容如上面所示 执行 make download 执行 make build Core: opensips应用升级 make all -j4 include_modules=&#34;db_mysql httpd&#34; make install include_modules=&#34;db_mysql httpd&#34; 可能遇到的报错以及解决方案 主要的问题可能是某些包冲突，或者某些库没有安装依赖。在解决问题后，需要重新编译。"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/opensips/ch3/centos7-2.4/><link crossorigin=anonymous href=/assets/css/stylesheet.6d3944e058d85363bbe8a792a9b5f40002bca80be859dc19c466dd8de223973e.css integrity="sha256-bTlE4FjYU2O76KeSqbX0AAK8qAvoWdwZxGbdjeIjlz4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="opensips centos7 安装与升级"><meta property="og:description" content="环境声明 系统 centos7 已经安装opensips 2.2 需要升级目标 opensips 2.4.6 要求：当前系统上没有部署mysql服务端程序 升级步骤 升级分为两步
opensips 应用升级，包括源码的下载，编译等等 opensips 数据库升级，使用opensipsdbctl工具迁移老的数据 Edge: opensips应用升级 升级过程以Makefile交付，可以先新建一个空的目录，如 /root/opensips-update/
# file: /root/opensips-update/Makefile VERSION=2.4.6 download: wget https://opensips.org/pub/opensips/$(VERSION)/opensips-$(VERSION).tar.gz; tar -zxvf opensips-$(VERSION).tar.gz; build: cd opensips-$(VERSION); make all -j4 include_modules=&#34;db_mysql httpd db_http siprec&#34;; # siprec是可选的 make install include_modules=&#34;db_mysql httpd db_http siprec&#34;; # siprec是可选的 新建空目录/root/opensips-update/ 在新目录中创建名为 Makefile的文件, 内容如上面所示 执行 make download 执行 make build Core: opensips应用升级 make all -j4 include_modules=&#34;db_mysql httpd&#34; make install include_modules=&#34;db_mysql httpd&#34; 可能遇到的报错以及解决方案 主要的问题可能是某些包冲突，或者某些库没有安装依赖。在解决问题后，需要重新编译。"><meta property="og:type" content="article"><meta property="og:url" content="https://wdd.js.org/opensips/ch3/centos7-2.4/"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="opensips"><meta property="article:published_time" content="2019-07-02T19:42:05+08:00"><meta property="article:modified_time" content="2019-07-02T19:42:05+08:00"><meta property="og:site_name" content="洞香春"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="opensips centos7 安装与升级"><meta name=twitter:description content="环境声明 系统 centos7 已经安装opensips 2.2 需要升级目标 opensips 2.4.6 要求：当前系统上没有部署mysql服务端程序 升级步骤 升级分为两步
opensips 应用升级，包括源码的下载，编译等等 opensips 数据库升级，使用opensipsdbctl工具迁移老的数据 Edge: opensips应用升级 升级过程以Makefile交付，可以先新建一个空的目录，如 /root/opensips-update/
# file: /root/opensips-update/Makefile VERSION=2.4.6 download: wget https://opensips.org/pub/opensips/$(VERSION)/opensips-$(VERSION).tar.gz; tar -zxvf opensips-$(VERSION).tar.gz; build: cd opensips-$(VERSION); make all -j4 include_modules=&#34;db_mysql httpd db_http siprec&#34;; # siprec是可选的 make install include_modules=&#34;db_mysql httpd db_http siprec&#34;; # siprec是可选的 新建空目录/root/opensips-update/ 在新目录中创建名为 Makefile的文件, 内容如上面所示 执行 make download 执行 make build Core: opensips应用升级 make all -j4 include_modules=&#34;db_mysql httpd&#34; make install include_modules=&#34;db_mysql httpd&#34; 可能遇到的报错以及解决方案 主要的问题可能是某些包冲突，或者某些库没有安装依赖。在解决问题后，需要重新编译。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"OpenSIPS2.4.X 中文实战系列","item":"https://wdd.js.org/opensips/"},{"@type":"ListItem","position":3,"name":"opensips centos7 安装与升级","item":"https://wdd.js.org/opensips/ch3/centos7-2.4/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"opensips centos7 安装与升级","name":"opensips centos7 安装与升级","description":"环境声明 系统 centos7 已经安装opensips 2.2 需要升级目标 opensips 2.4.6 要求：当前系统上没有部署mysql服务端程序 升级步骤 升级分为两步\nopensips 应用升级，包括源码的下载，编译等等 opensips 数据库升级，使用opensipsdbctl工具迁移老的数据 Edge: opensips应用升级 升级过程以Makefile交付，可以先新建一个空的目录，如 /root/opensips-update/\n# file: /root/opensips-update/Makefile VERSION=2.4.6 download: wget https://opensips.org/pub/opensips/$(VERSION)/opensips-$(VERSION).tar.gz; tar -zxvf opensips-$(VERSION).tar.gz; build: cd opensips-$(VERSION); make all -j4 include_modules=\u0026#34;db_mysql httpd db_http siprec\u0026#34;; # siprec是可选的 make install include_modules=\u0026#34;db_mysql httpd db_http siprec\u0026#34;; # siprec是可选的 新建空目录/root/opensips-update/ 在新目录中创建名为 Makefile的文件, 内容如上面所示 执行 make download 执行 make build Core: opensips应用升级 make all -j4 include_modules=\u0026#34;db_mysql httpd\u0026#34; make install include_modules=\u0026#34;db_mysql httpd\u0026#34; 可能遇到的报错以及解决方案 主要的问题可能是某些包冲突，或者某些库没有安装依赖。在解决问题后，需要重新编译。","keywords":[],"articleBody":"环境声明 系统 centos7 已经安装opensips 2.2 需要升级目标 opensips 2.4.6 要求：当前系统上没有部署mysql服务端程序 升级步骤 升级分为两步\nopensips 应用升级，包括源码的下载，编译等等 opensips 数据库升级，使用opensipsdbctl工具迁移老的数据 Edge: opensips应用升级 升级过程以Makefile交付，可以先新建一个空的目录，如 /root/opensips-update/\n# file: /root/opensips-update/Makefile VERSION=2.4.6 download: wget https://opensips.org/pub/opensips/$(VERSION)/opensips-$(VERSION).tar.gz; tar -zxvf opensips-$(VERSION).tar.gz; build: cd opensips-$(VERSION); make all -j4 include_modules=\"db_mysql httpd db_http siprec\"; # siprec是可选的 make install include_modules=\"db_mysql httpd db_http siprec\"; # siprec是可选的 新建空目录/root/opensips-update/ 在新目录中创建名为 Makefile的文件, 内容如上面所示 执行 make download 执行 make build Core: opensips应用升级 make all -j4 include_modules=\"db_mysql httpd\" make install include_modules=\"db_mysql httpd\" 可能遇到的报错以及解决方案 主要的问题可能是某些包冲突，或者某些库没有安装依赖。在解决问题后，需要重新编译。\n1. linux2.6.x86_64 conflicts with file from package .linux2.6.x86_64 conflicts with file from package MySQL-server-5.1.7-0.i386 file /usr/share/mysql/italian/errmsg.sys from install of MySQL-server-5.5.28-1.linux2.6.x86_64 conflicts with file from package MySQL-server-5.1.7-0.i386 file /usr/share/mysql/japanese/errmsg.sys from install of MySQL-server-5.5.28-\n解决方案：rpm -qa | grep mysql | xargs rpm -e –nodeps\n2. my_con.h:29:19: fatal error: mysql.h: No such file or directory my_con.h:29:19: fatal error: mysql.h: No such file or directory\n解决方案：yum install mysql-devel -y\n3. siprec_uuid.h:29:23: fatal error: uuid/uuid.h: No such file or directory ERROR3:\nsiprec_uuid.h:29:23: fatal error: uuid/uuid.h: No such file or directory #include 解决方案：yum install libuuid-devel -y\n4. regex.so: undefined symbol: debug 数据库迁移 opensips不同的版本，所需要的模块对应的表可能都不同，所以需要迁移数据库。\n迁移数据库需要opensipsdbctl命令，这个命令会根据opensipscrlrc文件链接opensips所使用的数据库。\nopensips的升级有个特点新版本的opensipsdbctl只用用来升级之前版本的opensips。\n从官方文档可以看出 2.2版本的opensips要升级到2.4，中间需要经过2.3。也就是说，你需要用opensips 2.3中的opensipsdbctl将 2.2升级到2.3，然后使用opensips 2.4中的opensipsdbctl将 2.3升级到2.4。\n为了加快升级速度，避免在安装不必要的版本，我构建了两个docker镜像，这两个镜像分别是2.3版本的opensips和2.4版本的opensips。我们可以使用这两个镜像中的opensipsdbctl来升级数据库。\ndocker pull ccr.ccs.tencentyun.com/wangdd/opensips-base:2.3.1 docker pull ccr.ccs.tencentyun.com/wangdd/opensips-base:2.4.2 先从2.2升级到2.3\ndocker run -it --name opensips --rm ccr.ccs.tencentyun.com/wangdd/opensips-base:2.3.1 bash vim /usr/local/etc/opensipsctlrc opensipsdbctl migrate opensips_old_db opensips_new_db # 下面会让你输入数据库密码， # 下面可能让你输入y/n, 一律输入y # 如果让你选择字符集，则输入 latin1 然后基于老的数据库，创建新的数据库。对于老的数据库，opensipsdbctl并不会改变它的任何字段。\n首先需要配置/usr/local/etc/opensips/opensipsctlrc文件，把mysql相关的配置修改正确。\n有可能升级过后opensips -V 输出的还是老版本的opensips, 这是需要\n排查PATH /usr/local/sbin/ 是不是在 /usr/sbin的前面 重新连接shell， 有可能环境变量还未更新 可执行文件的位置 # 2.x版本的 /usr/local/sbin/ # 1.x 版本的 /usr/sbin 报错 Jul 18 19:37:22 [28181] ERROR:core:sr_load_module: could not open module : /usr/local/lib64/opensips/modules/regex.so: undefined symbol: debug Jul 18 19:37:22 [28181] ERROR:core:load_module: failed to load module Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 26, column 13-14: failed to load module regex.so Jul 18 19:37:22 [28181] ERROR:core:sr_load_module: could not open module : /usr/local/lib64/opensips/modules/rest_client.so: undefined symbol: debug Jul 18 19:37:22 [28181] ERROR:core:load_module: failed to load module Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 57, column 13-14: failed to load module rest_client.so Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: parameter not found in module Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 99, column 20-21: Parameter not found in module - can't set Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: parameter not found in module Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 101, column 20-21: Parameter not found in module - can't set Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: parameter not found in module Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 102, column 20-21: Parameter not found in module - can't set Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: parameter not found in module Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 103, column 20-21: Parameter not found in module - can't set Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: parameter not found in module Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 104, column 20-21: Parameter not found in module - can't set Jul 18 19:37:22 [28181] ERROR:core:sr_load_module: could not open module : /usr/local/lib64/opensips/modules/carrierroute.so: undefined symbol: debug Jul 18 19:37:22 [28181] ERROR:core:load_module: failed to load module Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 146, column 13-14: failed to load module carrierroute.so Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: no module matching carrierroute found Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 147, column 20-21: Parameter not found in module - can't set Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: no module matching carrierroute found Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 148, column 20-21: Parameter not found in module - can't set Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: no module matching carrierroute found Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 149, column 19-20: Parameter not found in module - can't set Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: no module matching carrierroute found Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 150, column 20-21: Parameter not found in module - can't set Jul 18 19:37:23 [28181] ERROR:core:sr_load_module: could not open module : /usr/local/lib64/opensips/modules/dialplan.so: undefined symbol: debug Jul 18 19:37:23 [28181] ERROR:core:load_module: failed to load module Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 161, column 13-14: failed to load module dialplan.so Jul 18 19:37:23 [28181] ERROR:core:set_mod_param_regex: no module matching dialplan found Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 162, column 20-21: Parameter not found in module - can't set Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 26-28: syntax error Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 26-28: bare word found, command calls need '()' Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 26-28: bad command!) Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 35-36: bare word found, command calls need '()' Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 35-36: bad command: missing ';'? Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 37-39: bad command!) Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 53-54: syntax error Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 53-54: bad command: missing ';'? Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 53-54: bad command!) Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 54-55: bad command!) Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 255, column 2-4: syntax error Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 255, column 2-4: Jul 18 19:37:23 [28181] ERROR:core:main: bad config file (26 errors) Jul 18 19:37:23 [28181] NOTICE:core:main: Exiting.... ","wordCount":"995","inLanguage":"en","datePublished":"2019-07-02T19:42:05+08:00","dateModified":"2019-07-02T19:42:05+08:00","author":{"@type":"Person","name":"Eddie Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/opensips/ch3/centos7-2.4/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/fe/ title=Frontend><span>Frontend</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/container/ title=k8s/docker><span>k8s/docker</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/shell/ title=Shell><span>Shell</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/opensips/>OpenSIPS2.4.X 中文实战系列</a></div><h1 class=post-title>opensips centos7 安装与升级</h1><div class=post-meta>&lt;span title='2019-07-02 19:42:05 +0800 CST'>2019-07-02 19:42:05&lt;/span>&amp;nbsp;·&amp;nbsp;5 min&amp;nbsp;·&amp;nbsp;Eddie Wang&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/opensips/ch3/centos7-2.4/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e7%8e%af%e5%a2%83%e5%a3%b0%e6%98%8e aria-label=环境声明>环境声明</a></li><li><a href=#%e5%8d%87%e7%ba%a7%e6%ad%a5%e9%aa%a4 aria-label=升级步骤>升级步骤</a><ul><li><a href=#edge-opensips%e5%ba%94%e7%94%a8%e5%8d%87%e7%ba%a7 aria-label="Edge: opensips应用升级">Edge: opensips应用升级</a></li><li><a href=#core-opensips%e5%ba%94%e7%94%a8%e5%8d%87%e7%ba%a7 aria-label="Core: opensips应用升级">Core: opensips应用升级</a></li></ul></li><li><a href=#%e5%8f%af%e8%83%bd%e9%81%87%e5%88%b0%e7%9a%84%e6%8a%a5%e9%94%99%e4%bb%a5%e5%8f%8a%e8%a7%a3%e5%86%b3%e6%96%b9%e6%a1%88 aria-label=可能遇到的报错以及解决方案>可能遇到的报错以及解决方案</a><ul><li><a href=#1-linux26x86_64-conflicts-with-file-from-package aria-label="1. linux2.6.x86_64 conflicts with file from package">1. linux2.6.x86_64 conflicts with file from package</a></li><li><a href=#2my_conh2919-fatal-error-mysqlh-no-such-file-or-directory aria-label="2. my_con.h:29:19: fatal error: mysql.h: No such file or directory">2. my_con.h:29:19: fatal error: mysql.h: No such file or directory</a></li><li><a href=#3siprec_uuidh2923-fatal-error-uuiduuidh-no-such-file-or-directory aria-label="3. siprec_uuid.h:29:23: fatal error: uuid/uuid.h: No such file or directory">3. siprec_uuid.h:29:23: fatal error: uuid/uuid.h: No such file or directory</a></li><li><a href=#4regexso-undefined-symbol-debug aria-label="4. regex.so: undefined symbol: debug">4. regex.so: undefined symbol: debug</a></li><li><a href=#%e6%95%b0%e6%8d%ae%e5%ba%93%e8%bf%81%e7%a7%bb aria-label=数据库迁移>数据库迁移</a></li></ul></li><li><a href=#%e5%8f%af%e6%89%a7%e8%a1%8c%e6%96%87%e4%bb%b6%e7%9a%84%e4%bd%8d%e7%bd%ae aria-label=可执行文件的位置>可执行文件的位置</a></li><li><a href=#%e6%8a%a5%e9%94%99 aria-label=报错>报错</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=环境声明>环境声明<a hidden class=anchor aria-hidden=true href=#环境声明>#</a></h1><ul><li>系统 centos7</li><li>已经安装opensips 2.2</li><li>需要升级目标 opensips 2.4.6</li><li>要求：当前系统上没有部署mysql服务端程序</li></ul><h1 id=升级步骤>升级步骤<a hidden class=anchor aria-hidden=true href=#升级步骤>#</a></h1><p>升级分为两步</p><ol><li>opensips 应用升级，包括源码的下载，编译等等</li><li>opensips 数据库升级，使用opensipsdbctl工具迁移老的数据</li></ol><h2 id=edge-opensips应用升级>Edge: opensips应用升级<a hidden class=anchor aria-hidden=true href=#edge-opensips应用升级>#</a></h2><p>升级过程以Makefile交付，可以先新建一个空的目录，如 /root/opensips-update/</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># file: /root/opensips-update/Makefile</span>
</span></span><span style=display:flex><span>VERSION<span style=color:#f92672>=</span>2.4.6
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>download:
</span></span><span style=display:flex><span>	wget https://opensips.org/pub/opensips/<span style=color:#66d9ef>$(</span>VERSION<span style=color:#66d9ef>)</span>/opensips-<span style=color:#66d9ef>$(</span>VERSION<span style=color:#66d9ef>)</span>.tar.gz;
</span></span><span style=display:flex><span>  tar -zxvf opensips-<span style=color:#66d9ef>$(</span>VERSION<span style=color:#66d9ef>)</span>.tar.gz;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>build:
</span></span><span style=display:flex><span>	cd opensips-<span style=color:#66d9ef>$(</span>VERSION<span style=color:#66d9ef>)</span>;
</span></span><span style=display:flex><span>  make all -j4 include_modules<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;db_mysql httpd db_http siprec&#34;</span>; <span style=color:#75715e># siprec是可选的</span>
</span></span><span style=display:flex><span>  make install include_modules<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;db_mysql httpd db_http siprec&#34;</span>; <span style=color:#75715e># siprec是可选的</span>
</span></span></code></pre></div><ol><li>新建空目录/root/opensips-update/</li><li>在新目录中创建名为 Makefile的文件, 内容如上面所示</li><li>执行 make download</li><li>执行 make build</li></ol><h2 id=core-opensips应用升级>Core: opensips应用升级<a hidden class=anchor aria-hidden=true href=#core-opensips应用升级>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>make all -j4 include_modules<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;db_mysql httpd&#34;</span>
</span></span><span style=display:flex><span>make install include_modules<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;db_mysql httpd&#34;</span>
</span></span></code></pre></div><h1 id=可能遇到的报错以及解决方案>可能遇到的报错以及解决方案<a hidden class=anchor aria-hidden=true href=#可能遇到的报错以及解决方案>#</a></h1><p>主要的问题可能是某些包冲突，或者某些库没有安装依赖。在解决问题后，需要重新编译。</p><h2 id=1-linux26x86_64-conflicts-with-file-from-package>1. linux2.6.x86_64 conflicts with file from package<a hidden class=anchor aria-hidden=true href=#1-linux26x86_64-conflicts-with-file-from-package>#</a></h2><blockquote><p>.linux2.6.x86_64 conflicts with file from package MySQL-server-5.1.7-0.i386
    file /usr/share/mysql/italian/errmsg.sys from install of MySQL-server-5.5.28-1.linux2.6.x86_64 conflicts with file from package MySQL-server-5.1.7-0.i386
    file /usr/share/mysql/japanese/errmsg.sys from install of MySQL-server-5.5.28-</p></blockquote><p>解决方案：<strong>rpm -qa | grep mysql | xargs rpm -e &ndash;nodeps</strong></p><h2 id=2my_conh2919-fatal-error-mysqlh-no-such-file-or-directory>2. my_con.h:29:19: fatal error: mysql.h: No such file or directory<a hidden class=anchor aria-hidden=true href=#2my_conh2919-fatal-error-mysqlh-no-such-file-or-directory>#</a></h2><blockquote><p>my_con.h:29:19: fatal error: mysql.h: No such file or directory</p></blockquote><p>解决方案：<strong>yum install mysql-devel -y</strong></p><h2 id=3siprec_uuidh2923-fatal-error-uuiduuidh-no-such-file-or-directory>3. siprec_uuid.h:29:23: fatal error: uuid/uuid.h: No such file or directory<a hidden class=anchor aria-hidden=true href=#3siprec_uuidh2923-fatal-error-uuiduuidh-no-such-file-or-directory>#</a></h2><p>ERROR3:</p><blockquote><p>siprec_uuid.h:29:23: fatal error: uuid/uuid.h: No such file or directory
#include &lt;uuid/uuid.h></p></blockquote><p>解决方案：<strong>yum install libuuid-devel -y</strong></p><h2 id=4regexso-undefined-symbol-debug>4. regex.so: undefined symbol: debug<a hidden class=anchor aria-hidden=true href=#4regexso-undefined-symbol-debug>#</a></h2><h2 id=数据库迁移>数据库迁移<a hidden class=anchor aria-hidden=true href=#数据库迁移>#</a></h2><p>opensips不同的版本，所需要的模块对应的表可能都不同，所以需要迁移数据库。</p><p>迁移数据库需要opensipsdbctl命令，这个命令会根据opensipscrlrc文件链接opensips所使用的数据库。</p><p>opensips的升级有个特点新版本的opensipsdbctl只用用来升级之前版本的opensips。</p><p>从官方文档可以看出 2.2版本的opensips要升级到2.4，中间需要经过2.3。也就是说，你需要用opensips 2.3中的opensipsdbctl将 2.2升级到2.3，然后使用opensips 2.4中的opensipsdbctl将 2.3升级到2.4。</p><p><img loading=lazy src=2022-11-30-21-34-07.png alt></p><p>为了加快升级速度，避免在安装不必要的版本，我构建了两个docker镜像，这两个镜像分别是2.3版本的opensips和2.4版本的opensips。我们可以使用这两个镜像中的opensipsdbctl来升级数据库。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker pull ccr.ccs.tencentyun.com/wangdd/opensips-base:2.3.1
</span></span><span style=display:flex><span>docker pull ccr.ccs.tencentyun.com/wangdd/opensips-base:2.4.2
</span></span></code></pre></div><p>先从2.2升级到2.3</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -it --name opensips --rm ccr.ccs.tencentyun.com/wangdd/opensips-base:2.3.1 bash
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>vim /usr/local/etc/opensipsctlrc
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>opensipsdbctl migrate opensips_old_db opensips_new_db
</span></span><span style=display:flex><span><span style=color:#75715e># 下面会让你输入数据库密码，</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 下面可能让你输入y/n, 一律输入y</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 如果让你选择字符集，则输入 latin1</span>
</span></span></code></pre></div><p>然后基于老的数据库，创建新的数据库。对于老的数据库，opensipsdbctl并不会改变它的任何字段。</p><p>首先需要配置/usr/local/etc/opensips/opensipsctlrc文件，把mysql相关的配置修改正确。</p><p>有可能升级过后opensips -V 输出的还是老版本的opensips, 这是需要</p><ul><li>排查PATH /usr/local/sbin/ 是不是在 /usr/sbin的前面</li><li>重新连接shell， 有可能环境变量还未更新</li></ul><h1 id=可执行文件的位置>可执行文件的位置<a hidden class=anchor aria-hidden=true href=#可执行文件的位置>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 2.x版本的</span>
</span></span><span style=display:flex><span>/usr/local/sbin/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1.x 版本的</span>
</span></span><span style=display:flex><span>/usr/sbin
</span></span></code></pre></div><h1 id=报错>报错<a hidden class=anchor aria-hidden=true href=#报错>#</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:sr_load_module: could not open module &lt;/usr/local/lib64/opensips/modules/regex.so&gt;: /usr/local/lib64/opensips/modules/regex.so: undefined symbol: debug
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:load_module: failed to load module
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 26, column 13-14: failed to load module regex.so
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:sr_load_module: could not open module &lt;/usr/local/lib64/opensips/modules/rest_client.so&gt;: /usr/local/lib64/opensips/modules/rest_client.so: undefined symbol: debug
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:load_module: failed to load module
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 57, column 13-14: failed to load module rest_client.so
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:set_mod_param_regex: parameter &lt;failed_transaction_flag&gt; not found in module &lt;acc&gt;
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 99, column 20-21: Parameter &lt;failed_transaction_flag&gt; not found in module &lt;acc&gt; - can<span style=color:#e6db74>&#39;t set
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: parameter &lt;db_flag&gt; not found in module &lt;acc&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 101, column 20-21: Parameter &lt;db_flag&gt; not found in module &lt;acc&gt; - can&#39;</span>t set
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:set_mod_param_regex: parameter &lt;db_missed_flag&gt; not found in module &lt;acc&gt;
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 102, column 20-21: Parameter &lt;db_missed_flag&gt; not found in module &lt;acc&gt; - can<span style=color:#e6db74>&#39;t set
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: parameter &lt;cdr_flag&gt; not found in module &lt;acc&gt;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 103, column 20-21: Parameter &lt;cdr_flag&gt; not found in module &lt;acc&gt; - can&#39;</span>t set
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:set_mod_param_regex: parameter &lt;db_extra&gt; not found in module &lt;acc&gt;
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 104, column 20-21: Parameter &lt;db_extra&gt; not found in module &lt;acc&gt; - can<span style=color:#e6db74>&#39;t set
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] ERROR:core:sr_load_module: could not open module &lt;/usr/local/lib64/opensips/modules/carrierroute.so&gt;: /usr/local/lib64/opensips/modules/carrierroute.so: undefined symbol: debug
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] ERROR:core:load_module: failed to load module
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 146, column 13-14: failed to load module carrierroute.so
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: no module matching carrierroute found
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 147, column 20-21: Parameter &lt;db_url&gt; not found in module &lt;carrierroute&gt; - can&#39;</span>t set
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:set_mod_param_regex: no module matching carrierroute found
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 148, column 20-21: Parameter &lt;config_source&gt; not found in module &lt;carrierroute&gt; - can<span style=color:#e6db74>&#39;t set
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] ERROR:core:set_mod_param_regex: no module matching carrierroute found
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:22 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 149, column 19-20: Parameter &lt;use_domain&gt; not found in module &lt;carrierroute&gt; - can&#39;</span>t set
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:set_mod_param_regex: no module matching carrierroute found
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:22 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 150, column 20-21: Parameter &lt;db_failure_table&gt; not found in module &lt;carrierroute&gt; - can<span style=color:#e6db74>&#39;t set
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:23 [28181] ERROR:core:sr_load_module: could not open module &lt;/usr/local/lib64/opensips/modules/dialplan.so&gt;: /usr/local/lib64/opensips/modules/dialplan.so: undefined symbol: debug
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:23 [28181] ERROR:core:load_module: failed to load module
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 161, column 13-14: failed to load module dialplan.so
</span></span></span><span style=display:flex><span><span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:23 [28181] ERROR:core:set_mod_param_regex: no module matching dialplan found
</span></span></span><span style=display:flex><span><span style=color:#e6db74>Jul 18 19:37:23 [28181] CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 162, column 20-21: Parameter &lt;db_url&gt; not found in module &lt;dialplan&gt; - can&#39;</span>t set
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 26-28: syntax error
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 26-28: bare word &lt;uri&gt; found, command calls need <span style=color:#e6db74>&#39;()&#39;</span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 26-28: bad command!<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 35-36: bare word &lt;myself&gt; found, command calls need <span style=color:#e6db74>&#39;()&#39;</span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 35-36: bad command: missing <span style=color:#e6db74>&#39;;&#39;</span>?
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 37-39: bad command!<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 53-54: syntax error
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 53-54: bad command: missing <span style=color:#e6db74>&#39;;&#39;</span>?
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 53-54: bad command!<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 244, column 54-55: bad command!<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 255, column 2-4: syntax error
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> CRITICAL:core:yyerror: parse error in config file /usr/local//etc/opensips/opensips.cfg, line 255, column 2-4:
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> ERROR:core:main: bad config file <span style=color:#f92672>(</span><span style=color:#ae81ff>26</span> errors<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Jul <span style=color:#ae81ff>18</span> 19:37:23 <span style=color:#f92672>[</span>28181<span style=color:#f92672>]</span> NOTICE:core:main: Exiting....
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://wdd.js.org>洞香春</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>