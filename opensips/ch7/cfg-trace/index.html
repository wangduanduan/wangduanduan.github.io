<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>script_trace 打印opensips的脚本执行过程 | 洞香春</title><meta name=keywords content><meta name=description content="script_trace是核心函数，不需要引入模块。
script_trace([log_level, pv_format_string[, info_string]]) This function start the script tracing - this helps to better understand the flow of execution in the OpenSIPS script, like what function is executed, what line it is, etc. Moreover, you can also trace the values of pseudo-variables, as script execution progresses. The blocks of the script where script tracing is enabled will print a line for each individual action that is done (e.g. assignments, conditional tests, module functions, core functions, etc."><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/opensips/ch7/cfg-trace/><link crossorigin=anonymous href=/assets/css/stylesheet.6d3944e058d85363bbe8a792a9b5f40002bca80be859dc19c466dd8de223973e.css integrity="sha256-bTlE4FjYU2O76KeSqbX0AAK8qAvoWdwZxGbdjeIjlz4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="script_trace 打印opensips的脚本执行过程"><meta property="og:description" content="script_trace是核心函数，不需要引入模块。
script_trace([log_level, pv_format_string[, info_string]]) This function start the script tracing - this helps to better understand the flow of execution in the OpenSIPS script, like what function is executed, what line it is, etc. Moreover, you can also trace the values of pseudo-variables, as script execution progresses. The blocks of the script where script tracing is enabled will print a line for each individual action that is done (e.g. assignments, conditional tests, module functions, core functions, etc."><meta property="og:type" content="article"><meta property="og:url" content="https://wdd.js.org/opensips/ch7/cfg-trace/"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="opensips"><meta property="article:published_time" content="2020-05-27T16:54:47+08:00"><meta property="article:modified_time" content="2020-05-27T16:54:47+08:00"><meta property="og:site_name" content="洞香春"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="script_trace 打印opensips的脚本执行过程"><meta name=twitter:description content="script_trace是核心函数，不需要引入模块。
script_trace([log_level, pv_format_string[, info_string]]) This function start the script tracing - this helps to better understand the flow of execution in the OpenSIPS script, like what function is executed, what line it is, etc. Moreover, you can also trace the values of pseudo-variables, as script execution progresses. The blocks of the script where script tracing is enabled will print a line for each individual action that is done (e.g. assignments, conditional tests, module functions, core functions, etc."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"OpenSIPS2.4.X 中文实战系列","item":"https://wdd.js.org/opensips/"},{"@type":"ListItem","position":3,"name":"script_trace 打印opensips的脚本执行过程","item":"https://wdd.js.org/opensips/ch7/cfg-trace/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"script_trace 打印opensips的脚本执行过程","name":"script_trace 打印opensips的脚本执行过程","description":"script_trace是核心函数，不需要引入模块。\nscript_trace([log_level, pv_format_string[, info_string]]) This function start the script tracing - this helps to better understand the flow of execution in the OpenSIPS script, like what function is executed, what line it is, etc. Moreover, you can also trace the values of pseudo-variables, as script execution progresses. The blocks of the script where script tracing is enabled will print a line for each individual action that is done (e.g. assignments, conditional tests, module functions, core functions, etc.","keywords":[],"articleBody":"script_trace是核心函数，不需要引入模块。\nscript_trace([log_level, pv_format_string[, info_string]]) This function start the script tracing - this helps to better understand the flow of execution in the OpenSIPS script, like what function is executed, what line it is, etc. Moreover, you can also trace the values of pseudo-variables, as script execution progresses. The blocks of the script where script tracing is enabled will print a line for each individual action that is done (e.g. assignments, conditional tests, module functions, core functions, etc.). Multiple pseudo-variables can be monitored by specifying a pv_format_string (e.g. \"$ru---$avp(var1)\"). The logs produced by multiple/different traced regions of your script can be differentiated (tagged) by specifying an additional plain string - info_string - as the 3rd parameter. To disable script tracing, just do script_trace(). Otherwise, the tracing will automatically stop at the end the end of the top route. Example of usage: script_trace( 1, \"$rm from $si, ruri=$ru\", \"me\"); will produce: [line 578][me][module consume_credentials] -\u003e (INVITE from 127.0.0.1 , ruri=sip:111211@opensips.org) [line 581][me][core setsflag] -\u003e (INVITE from 127.0.0.1 , ruri=sip:111211@opensips.org) [line 583][me][assign equal] -\u003e (INVITE from 127.0.0.1 , ruri=sip:111211@opensips.org) [line 592][me][core if] -\u003e (INVITE from 127.0.0.1 , ruri=sip:tester@opensips.org) [line 585][me][module is_avp_set] -\u003e (INVITE from 127.0.0.1 , ruri=sip:tester@opensips.org) [line 589][me][core if] -\u003e (INVITE from 127.0.0.1 , ruri=sip:tester@opensips.org) [line 586][me][module is_method] -\u003e (INVITE from 127.0.0.1 , ruri=sip:tester@opensips.org) [line 587][me][module trace_dialog] -\u003e (INVITE 127.0.0.1 , ruri=sip:tester@opensips.org) [line 590][me][core setflag] -\u003e (INVITE from 127.0.0.1 , ruri=sip:tester@opensips.org) ","wordCount":"229","inLanguage":"en","datePublished":"2020-05-27T16:54:47+08:00","dateModified":"2020-05-27T16:54:47+08:00","author":{"@type":"Person","name":"Eddie Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/opensips/ch7/cfg-trace/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/fe/ title=Frontend><span>Frontend</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/container/ title=k8s/docker><span>k8s/docker</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/shell/ title=Shell><span>Shell</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/opensips/>OpenSIPS2.4.X 中文实战系列</a></div><h1 class=post-title>script_trace 打印opensips的脚本执行过程</h1><div class=post-meta><span title='2020-05-27 16:54:47 +0800 CST'>2020-05-27 16:54:47</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Eddie Wang&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/opensips/ch7/cfg-trace/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>script_trace是核心函数，不需要引入模块。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>script_trace([log_level,</span> <span style=color:#960050;background-color:#1e0010>pv_format_string[,</span> <span style=color:#960050;background-color:#1e0010>info_string]])</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>This</span> <span style=color:#960050;background-color:#1e0010>function</span> <span style=color:#960050;background-color:#1e0010>start</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>script</span> <span style=color:#960050;background-color:#1e0010>tracing</span> <span style=color:#960050;background-color:#1e0010>-</span> <span style=color:#960050;background-color:#1e0010>this</span> <span style=color:#960050;background-color:#1e0010>helps</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>better</span> <span style=color:#960050;background-color:#1e0010>understand</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>flow</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>execution</span> <span style=color:#960050;background-color:#1e0010>in</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>OpenSIPS</span> <span style=color:#960050;background-color:#1e0010>script,</span> <span style=color:#960050;background-color:#1e0010>like</span> <span style=color:#960050;background-color:#1e0010>what</span> <span style=color:#960050;background-color:#1e0010>function</span> <span style=color:#960050;background-color:#1e0010>is</span> <span style=color:#960050;background-color:#1e0010>executed,</span> <span style=color:#960050;background-color:#1e0010>what</span> <span style=color:#960050;background-color:#1e0010>line</span> <span style=color:#960050;background-color:#1e0010>it</span> <span style=color:#960050;background-color:#1e0010>is,</span> <span style=color:#960050;background-color:#1e0010>etc.</span> <span style=color:#960050;background-color:#1e0010>Moreover,</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>can</span> <span style=color:#960050;background-color:#1e0010>also</span> <span style=color:#960050;background-color:#1e0010>trace</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>values</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>pseudo-variables,</span> <span style=color:#960050;background-color:#1e0010>as</span> <span style=color:#960050;background-color:#1e0010>script</span> <span style=color:#960050;background-color:#1e0010>execution</span> <span style=color:#960050;background-color:#1e0010>progresses.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>The</span> <span style=color:#960050;background-color:#1e0010>blocks</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>script</span> <span style=color:#960050;background-color:#1e0010>where</span> <span style=color:#960050;background-color:#1e0010>script</span> <span style=color:#960050;background-color:#1e0010>tracing</span> <span style=color:#960050;background-color:#1e0010>is</span> <span style=color:#960050;background-color:#1e0010>enabled</span> <span style=color:#960050;background-color:#1e0010>will</span> <span style=color:#960050;background-color:#1e0010>print</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>line</span> <span style=color:#960050;background-color:#1e0010>for</span> <span style=color:#960050;background-color:#1e0010>each</span> <span style=color:#960050;background-color:#1e0010>individual</span> <span style=color:#960050;background-color:#1e0010>action</span> <span style=color:#960050;background-color:#1e0010>that</span> <span style=color:#960050;background-color:#1e0010>is</span> <span style=color:#960050;background-color:#1e0010>done</span> <span style=color:#960050;background-color:#1e0010>(e.g.</span> <span style=color:#960050;background-color:#1e0010>assignments,</span> <span style=color:#960050;background-color:#1e0010>conditional</span> <span style=color:#960050;background-color:#1e0010>tests,</span> <span style=color:#960050;background-color:#1e0010>module</span> <span style=color:#960050;background-color:#1e0010>functions,</span> <span style=color:#960050;background-color:#1e0010>core</span> <span style=color:#960050;background-color:#1e0010>functions,</span> <span style=color:#960050;background-color:#1e0010>etc.).</span> <span style=color:#960050;background-color:#1e0010>Multiple</span> <span style=color:#960050;background-color:#1e0010>pseudo-variables</span> <span style=color:#960050;background-color:#1e0010>can</span> <span style=color:#960050;background-color:#1e0010>be</span> <span style=color:#960050;background-color:#1e0010>monitored</span> <span style=color:#960050;background-color:#1e0010>by</span> <span style=color:#960050;background-color:#1e0010>specifying</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>pv_format_string</span> <span style=color:#960050;background-color:#1e0010>(e.g.</span> <span style=color:#e6db74>&#34;$ru---$avp(var1)&#34;</span><span style=color:#960050;background-color:#1e0010>).</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>The</span> <span style=color:#960050;background-color:#1e0010>logs</span> <span style=color:#960050;background-color:#1e0010>produced</span> <span style=color:#960050;background-color:#1e0010>by</span> <span style=color:#960050;background-color:#1e0010>multiple/different</span> <span style=color:#960050;background-color:#1e0010>traced</span> <span style=color:#960050;background-color:#1e0010>regions</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>your</span> <span style=color:#960050;background-color:#1e0010>script</span> <span style=color:#960050;background-color:#1e0010>can</span> <span style=color:#960050;background-color:#1e0010>be</span> <span style=color:#960050;background-color:#1e0010>differentiated</span> <span style=color:#960050;background-color:#1e0010>(tagged)</span> <span style=color:#960050;background-color:#1e0010>by</span> <span style=color:#960050;background-color:#1e0010>specifying</span> <span style=color:#960050;background-color:#1e0010>an</span> <span style=color:#960050;background-color:#1e0010>additional</span> <span style=color:#960050;background-color:#1e0010>plain</span> <span style=color:#960050;background-color:#1e0010>string</span> <span style=color:#960050;background-color:#1e0010>-</span> <span style=color:#960050;background-color:#1e0010>info_string</span> <span style=color:#960050;background-color:#1e0010>-</span> <span style=color:#960050;background-color:#1e0010>as</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>3rd</span> <span style=color:#960050;background-color:#1e0010>parameter.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>To</span> <span style=color:#960050;background-color:#1e0010>disable</span> <span style=color:#960050;background-color:#1e0010>script</span> <span style=color:#960050;background-color:#1e0010>tracing,</span> <span style=color:#960050;background-color:#1e0010>just</span> <span style=color:#960050;background-color:#1e0010>do</span> <span style=color:#960050;background-color:#1e0010>script_trace().</span> <span style=color:#960050;background-color:#1e0010>Otherwise,</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>tracing</span> <span style=color:#960050;background-color:#1e0010>will</span> <span style=color:#960050;background-color:#1e0010>automatically</span> <span style=color:#960050;background-color:#1e0010>stop</span> <span style=color:#960050;background-color:#1e0010>at</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>end</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>end</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>top</span> <span style=color:#960050;background-color:#1e0010>route.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Example of usage</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    script_trace<span style=color:#f92672>(</span> 1, <span style=color:#e6db74>&#34;</span>$rm<span style=color:#e6db74> from </span>$si<span style=color:#e6db74>, ruri=</span>$ru<span style=color:#e6db74>&#34;</span>, <span style=color:#e6db74>&#34;me&#34;</span><span style=color:#f92672>)</span>;
</span></span><span style=display:flex><span><span style=color:#a6e22e>will produce</span><span style=color:#f92672>:</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span><span style=color:#a6e22e>[line 578][me][module consume_credentials] -&gt; (INVITE from 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>111211@opensips.org)
</span></span><span style=display:flex><span><span style=color:#a6e22e>[line 581][me][core setsflag] -&gt; (INVITE from 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>111211@opensips.org)
</span></span><span style=display:flex><span><span style=color:#a6e22e>[line 583][me][assign equal] -&gt; (INVITE from 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>111211@opensips.org)
</span></span><span style=display:flex><span><span style=color:#a6e22e>[line 592][me][core if] -&gt; (INVITE from 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>tester@opensips.org)
</span></span><span style=display:flex><span><span style=color:#a6e22e>[line 585][me][module is_avp_set] -&gt; (INVITE from 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>tester@opensips.org)
</span></span><span style=display:flex><span><span style=color:#a6e22e>[line 589][me][core if] -&gt; (INVITE from 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>tester@opensips.org)
</span></span><span style=display:flex><span><span style=color:#a6e22e>[line 586][me][module is_method] -&gt; (INVITE from 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>tester@opensips.org)
</span></span><span style=display:flex><span><span style=color:#a6e22e>[line 587][me][module trace_dialog] -&gt; (INVITE 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>tester@opensips.org)
</span></span><span style=display:flex><span><span style=color:#a6e22e>[line 590][me][core setflag] -&gt; (INVITE from 127.0.0.1 , ruri=sip</span><span style=color:#f92672>:</span>tester@opensips.org) 
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://wdd.js.org>洞香春</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>