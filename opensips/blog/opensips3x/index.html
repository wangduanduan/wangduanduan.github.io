<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Introducing OpenSIPS 3.0 | 洞香春</title><meta name=keywords content><meta name=description content="You already know the story – one more year, one more evolution cycle, one more OpenSIPS major release. Even more, a new OpenSIPS direction is about to start. So let me introduce you to the upcoming OpenSIPS 3.0 .For the upcoming OpenSIPS 3.0 release (and 3.x family) the main focus is on the **_devops _**concept. Shortly said, this translates into:
making the OpenSIPS script writing/developing much easier simplifying the operational activities around OpenSIPS What features and functionalities a software is able to deliver is a very important factor."><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/opensips/blog/opensips3x/><link crossorigin=anonymous href=/assets/css/stylesheet.6d3944e058d85363bbe8a792a9b5f40002bca80be859dc19c466dd8de223973e.css integrity="sha256-bTlE4FjYU2O76KeSqbX0AAK8qAvoWdwZxGbdjeIjlz4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="Introducing OpenSIPS 3.0"><meta property="og:description" content="You already know the story – one more year, one more evolution cycle, one more OpenSIPS major release. Even more, a new OpenSIPS direction is about to start. So let me introduce you to the upcoming OpenSIPS 3.0 .For the upcoming OpenSIPS 3.0 release (and 3.x family) the main focus is on the **_devops _**concept. Shortly said, this translates into:
making the OpenSIPS script writing/developing much easier simplifying the operational activities around OpenSIPS What features and functionalities a software is able to deliver is a very important factor."><meta property="og:type" content="article"><meta property="og:url" content="https://wdd.js.org/opensips/blog/opensips3x/"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="opensips"><meta property="article:published_time" content="2019-07-31T13:31:30+08:00"><meta property="article:modified_time" content="2019-07-31T13:31:30+08:00"><meta property="og:site_name" content="洞香春"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Introducing OpenSIPS 3.0"><meta name=twitter:description content="You already know the story – one more year, one more evolution cycle, one more OpenSIPS major release. Even more, a new OpenSIPS direction is about to start. So let me introduce you to the upcoming OpenSIPS 3.0 .For the upcoming OpenSIPS 3.0 release (and 3.x family) the main focus is on the **_devops _**concept. Shortly said, this translates into:
making the OpenSIPS script writing/developing much easier simplifying the operational activities around OpenSIPS What features and functionalities a software is able to deliver is a very important factor."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"OpenSIPS2.4.X 中文实战系列","item":"https://wdd.js.org/opensips/"},{"@type":"ListItem","position":3,"name":"Introducing OpenSIPS 3.0","item":"https://wdd.js.org/opensips/blog/opensips3x/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Introducing OpenSIPS 3.0","name":"Introducing OpenSIPS 3.0","description":"You already know the story – one more year, one more evolution cycle, one more OpenSIPS major release. Even more, a new OpenSIPS direction is about to start. So let me introduce you to the upcoming OpenSIPS 3.0 .For the upcoming OpenSIPS 3.0 release (and 3.x family) the main focus is on the **_devops _**concept. Shortly said, this translates into:\nmaking the OpenSIPS script writing/developing much easier simplifying the operational activities around OpenSIPS What features and functionalities a software is able to deliver is a very important factor.","keywords":[],"articleBody":"You already know the story – one more year, one more evolution cycle, one more OpenSIPS major release. Even more, a new OpenSIPS direction is about to start. So let me introduce you to the upcoming OpenSIPS 3.0 .For the upcoming OpenSIPS 3.0 release (and 3.x family) the main focus is on the **_devops _**concept. Shortly said, this translates into:\nmaking the OpenSIPS script writing/developing much easier simplifying the operational activities around OpenSIPS What features and functionalities a software is able to deliver is a very important factor. Nevertheless, how easy to use and operate the software is, it;s a another factor with almost the same importance . Especially if we consider the case of OpenSIPS which is a very complex software to configure, to integrate and to operate in large scale multi-party platforms.\nThe “dev” aspects in OpenSIPS 3.0 This release is looking to improve the experience of the OpenSIPS script writer (developer), by enhancing and simplifying the OpenSIPS script, at all its level.The script re-formatting (as structure), the addition of full pre-processor support, the enhancement of the script variable’s naming and support, the standardization of the complex modparams (and many other) will address the script writers needs of\neasiness flexibility strength when comes to creating, managing and maintaining more and more complex OpenSIPS configurations.The full list of “dev” oriented features along with explanations and details is to be found on the official 3.0 planning document.\nThe “ops” aspects in OpenSIPS 3.0 The operational activity is a continues job, starting from day one, when you started to run your OpenSIPS. Usually there is a lot of time, effort and resources invested in this operational activities, so any extra help in the area is more than welcome.OpenSIPS 3.0 is planning several enhancements and new concepts in order to help with operating OpenSIPS – making it simpler to run, to monitor, to troubleshoot and diagnose.We are especially looking at reducing the need of restarts during service time – restarting your production OpenSIPS is something that any devops engineer will try to avoid as much as possible. New features as auto-scaling (as number of processes), runtime changes of module parameters or script reload are addressing this fear. Even when a restart cannot be avoided, the internal memory persistence during restart may minimize the impact.But when comes to vital operational activities like monitoring and understanding what is going one with your OpenSIPS or troubleshooting calls or traffic handled by your OpenSIPS, the most important new additions for helping to operate OpenSIPS are:\ntracing console – provided by the new ‘opensipsctl’ tool, the console will allow you to see in realtime various information related to specifics call only. The information may be the OpenSIPS logs, SIP packets, script logs, rest queries, maybe DB queries self diagnosis tool – also provided by the opensipsctl tool, this is a logic that collects various information from a running OpenSIPS (via MI) in regards to thresholds, load information, statistics and logs in order to locate and indicate a potential problem or bottleneck with your OpenSIPS. There are even more features that will simply the way you operate your OpenSIPS – the full list (with explanations) is available on the official 3.0 planning document.\nMore Integration aspects withe OpenSIPS 3.0 The work to make possible the integration of OpenSIPS with other external components is a never-ending job. This release will make no exception and address this need.A major rework of the Management Interface is ongoing, with the sole purpose of standardizing and simplifying the way you interact with the MI interface. Shifting to Json encoding as the only way to pack data and re-structuring all the available transport (protocols) for interacting with the MI interface will enhance your experience in using this interface from any other language / application.The 3.0 release is planning to provide new modules for more integration capabilities:\n**SMPP **module – a bidirectional gateway / translator between SIP (MESSAGE requests) and SMPP protocol. RabbitMQ consumer module – a RabbitMQ consumer that pushes the messages as events into the OpenSIPS script. A more detailed description is available on the official 3.0 planning document.\nCommunity opinion is important The opinion of the community matters to us, so we need your feedback and comments in regards to the 3.0 Dev Plan.To express yourself on the 3.0 Dev Plan, please see the online form — you can give scores to the items in the plan and you can suggest other items. This feedback will be very useful for us in order to align the Dev Plan to the real needs of our community, of the people actually using OpenSIPS. Besides our ideas listed in the form, you can of course come with your own ideas, or feature requests that we will gladly take into considerations.The deadline for submitting your answers in the form is 6th of January 2019. After this deadline we will gather all your submissions and sort them according to your feedback. We will use the result to filter the topics you consider interesting and prioritize the most wanted ones.Also, to talk more in details about the features of this new release, a public audio conferencewill be available on 20th of December 2018, 4 pm GMT , thanks to the kind sponsorship of UberConference. Anyone is welcome to join to find out more details or to ask questions about OpenSIPS 3.0.This is a public and open conference, so no registration is needed.\nThe timeline The timeline for OpenSIPS 3.0 is:\nBeta Release – 18-31 March 2019 Stable Release – 22-29 April 2019 General Availability – 30th of April 2019, during OpenSIPS Summit 2019 ","wordCount":"935","inLanguage":"en","datePublished":"2019-07-31T13:31:30+08:00","dateModified":"2019-07-31T13:31:30+08:00","author":{"@type":"Person","name":"Eddie Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/opensips/blog/opensips3x/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/books/ title=读书><span>读书</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/fe/ title=前端><span>前端</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/opensips/>OpenSIPS2.4.X 中文实战系列</a></div><h1 class=post-title>Introducing OpenSIPS 3.0</h1><div class=post-meta><span title='2019-07-31 13:31:30 +0800 CST'>2019-07-31 13:31:30</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Eddie Wang&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/opensips/blog/opensips3x/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#the-dev-aspects-in-opensips-30 aria-label="The “dev” aspects in OpenSIPS 3.0">The “dev” aspects in OpenSIPS 3.0</a></li><li><a href=#the-ops-aspects-in-opensips-30 aria-label="The “ops” aspects in OpenSIPS 3.0">The “ops” aspects in OpenSIPS 3.0</a></li><li><a href=#more-integration-aspects-withe-opensips-30 aria-label="More Integration aspects withe OpenSIPS 3.0">More Integration aspects withe OpenSIPS 3.0</a></li><li><a href=#community-opinion-is-important aria-label="Community opinion is important">Community opinion is important</a></li><li><a href=#the-timeline aria-label="The timeline">The timeline</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p>You already know the story – one more year, one more evolution cycle, one more OpenSIPS major release. Even more, a new OpenSIPS direction is about to start. So let me introduce you to the upcoming OpenSIPS 3.0 .For the upcoming OpenSIPS 3.0 release (and 3.x family) the main focus is on the **_devops _**concept. Shortly said, this translates into:</p><ul><li>making the OpenSIPS script writing/developing much easier</li><li>simplifying the operational activities around OpenSIPS</li></ul><p>What features and functionalities a software is able to deliver is a very important factor. Nevertheless, how easy to use and operate the software is, it;s a another factor with almost the same importance . Especially if we consider the case of OpenSIPS which is a very complex software to configure, to integrate and to operate in large scale multi-party platforms.</p><h3 id=the-dev-aspects-in-opensips-30>The “dev” aspects in OpenSIPS 3.0<a hidden class=anchor aria-hidden=true href=#the-dev-aspects-in-opensips-30>#</a></h3><p>This release is looking to improve the experience of the OpenSIPS script writer (developer), by enhancing and simplifying the OpenSIPS script, at all its level.The <strong>script re-formatting</strong> (as structure), the addition of <strong>full pre-processor support</strong>, the enhancement of the <strong>script variable’s naming and support</strong>, the standardization of the complex modparams (and many other) will address the script writers needs of</p><ul><li>easiness</li><li>flexibility</li><li>strength</li></ul><p>when comes to creating, managing and maintaining more and more complex OpenSIPS configurations.The full list of “dev” oriented features along with explanations and details is to be found on the <a href=https://www.opensips.org/Development/Opensips-3-0-Planning#development>official 3.0 planning document</a>.</p><h3 id=the-ops-aspects-in-opensips-30>The “ops” aspects in OpenSIPS 3.0<a hidden class=anchor aria-hidden=true href=#the-ops-aspects-in-opensips-30>#</a></h3><p>The operational activity is a continues job, starting from day one, when you started to run your OpenSIPS. Usually there is a lot of time, effort and resources invested in this operational activities, so any extra help in the area is more than welcome.OpenSIPS 3.0 is planning several enhancements and new concepts in order to help with operating OpenSIPS – making it simpler to run, to monitor, to troubleshoot and diagnose.We are especially looking at reducing the need of restarts during service time – restarting your production OpenSIPS is something that any devops engineer will try to avoid as much as possible. New features as <strong>auto-scaling</strong> (as number of processes), <strong>runtime changes of module parameters</strong> or <strong>script reload</strong> are addressing this fear. Even when a restart cannot be avoided, the internal memory persistence during restart may minimize the impact.But when comes to vital operational activities like monitoring and understanding what is going one with your OpenSIPS or troubleshooting calls or traffic handled by your OpenSIPS, the most important new additions for helping to operate OpenSIPS are:</p><ul><li><strong>tracing console</strong> – provided by the new ‘opensipsctl’ tool, the console will allow you to see in realtime various information related to specifics call only. The information may be the OpenSIPS logs, SIP packets, script logs, rest queries, maybe DB queries</li><li><strong>self diagnosis tool</strong> – also provided by the opensipsctl tool, this is a logic that collects various information from a running OpenSIPS (via MI) in regards to thresholds, load information, statistics and logs in order to locate and indicate a potential problem or bottleneck with your OpenSIPS.</li></ul><p>There are even more features that will simply the way you operate your OpenSIPS – the full list (with explanations) is available on the <a href=https://www.opensips.org/Development/Opensips-3-0-Planning#operational>official 3.0 planning document</a>.</p><h3 id=more-integration-aspects-withe-opensips-30>More Integration aspects withe OpenSIPS 3.0<a hidden class=anchor aria-hidden=true href=#more-integration-aspects-withe-opensips-30>#</a></h3><p>The work to make possible the integration of OpenSIPS with other external components is a never-ending job. This release will make no exception and address this need.A major <strong>rework of the Management Interface</strong> is ongoing, with the sole purpose of standardizing and simplifying the way you interact with the MI interface. Shifting to Json encoding as the only way to pack data and re-structuring all the available transport (protocols) for interacting with the MI interface will enhance your experience in using this interface from any other language / application.The 3.0 release is planning to provide new modules for more integration capabilities:</p><ul><li>**SMPP **module – a bidirectional gateway / translator between SIP (MESSAGE requests) and SMPP protocol.</li><li><strong>RabbitMQ consumer</strong> module – a RabbitMQ consumer that pushes the messages as events into the OpenSIPS script.</li></ul><p>A more detailed description is available on the <a href=https://www.opensips.org/Development/Opensips-3-0-Planning#integration>official 3.0 planning document</a>.</p><h3 id=community-opinion-is-important>Community opinion is important<a hidden class=anchor aria-hidden=true href=#community-opinion-is-important>#</a></h3><p>The opinion of the community matters to us, so we need your feedback and comments in regards to the 3.0 Dev Plan.To express yourself on the 3.0 Dev Plan, please see the <strong><a href=https://docs.google.com/forms/d/e/1FAIpQLSeFZ4KYa81LHO7xYyi1GfLklQK4IomXQNdfeu4KqYaT5peHLQ/viewform>online form</a></strong> — you can give scores to the items in the plan and you can suggest other items. This feedback will be very useful for us in order to align the Dev Plan to the real needs of our community, of the people actually using OpenSIPS. Besides our ideas listed in the form, you can of course come with your own ideas, or feature requests that we will gladly take into considerations.The deadline for submitting your answers in the <strong><a href=https://docs.google.com/forms/d/e/1FAIpQLSeFZ4KYa81LHO7xYyi1GfLklQK4IomXQNdfeu4KqYaT5peHLQ/viewform>form</a></strong> is 6th of January 2019. After this deadline we will gather all your submissions and sort them according to your feedback. We will use the result to filter the topics you consider interesting and prioritize the most wanted ones.Also, to talk more in details about the features of this new release, a public <a href=https://www.uberconference.com/opensips>audio conference</a>will be available on <a href="https://www.timeanddate.com/worldclock/fixedtime.html?msg=Introducing+OpenSIPS+3.0&amp;iso=20181220T16&amp;p1=1440&amp;ah=1">20th of December 2018, 4 pm GMT</a> , thanks to the kind sponsorship of <a href=https://www.uberconference.com/>UberConference</a>. Anyone is welcome to join to find out more details or to ask questions about <a href=http://opensips.org/>OpenSIPS</a> 3.0.This is a public and open conference, so no registration is needed.</p><h3 id=the-timeline>The timeline<a hidden class=anchor aria-hidden=true href=#the-timeline>#</a></h3><p>The timeline for OpenSIPS 3.0 is:</p><ul><li>Beta Release – 18-31 March 2019</li><li>Stable Release – 22-29 April 2019</li><li>General Availability – 30th of April 2019, during <a href=http://www.opensips.org/events/Summit-2019Amsterdam/>OpenSIPS Summit 2019</a></li></ul></div><footer class=post-footer><ul class=post-tags></ul></footer><script src=https://giscus.app/client.js data-repo=wangduanduan/wangduanduan.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxMTkyMjMyNjA=" data-category=Announcements data-category-id=DIC_kwDOBxsz3M4CAjBq data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://wdd.js.org>洞香春</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>