<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>1001个Vim高级技巧 - 0-55 | 洞香春</title><meta name=keywords content="vim"><meta name=description content="Info C表示按住Ctrl, C-o表示同时按住Ctrl和o 1. 在tmux中 vim-airline插件颜色显示不正常 解决方案：
export TERM=screen-256color 2. buffer相关操作 :ls # 显示所有打开的buffer :b {bufferName} #支持tab键自动补全 :bd # 关闭当前buffer :bn # 切换到下一个buffer :bp # 切换到上一个buffer :b# # 切换到上一个访问过的buffer :b1 # 切换到buffer1 :bm # 切换到最近修改过的buffer :sb {bufferName} # 上下分屏 :vert sb {bufferName} # 左右分屏 3. 跳转到对应的符号上 下面这种符号，一般都是成双成对的，只要在其中一个上按%, 就会自动跳转到对应的符号
() [] {} 4. 关闭netrw的banner 如果熟练的是用了netrw，就可以把默认开启的banner给关闭掉。
let g:netrw_banner = 0 let g:netrw_liststyle = 3 let g:netrw_winsize = 25 5. 如何同时保存所有发生变化的文件？ 把所有发生变化的文件给保存 :wa 把所有发生变化的文件都保存，然后退出vim :xa 退出vim, 所有发生变化的文件都不保存，:qa!"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/vim/vim-tips/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ceab085cbbf58c0ec96f6d415d51b3b44e204edfd71a45b4fa2d4aac13f119d0.css integrity="sha256-zqsIXLv1jA7Jb21BXVGztE4gTt/XGkW0+i1KrBPxGdA=" rel="preload stylesheet" as=style><link crossorigin=anonymous herf=/font-awesome/css/font-awesome.min.css rel=stylesheet type=text/css><link rel=preload href=/cowboy.ico as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.117.0"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="1001个Vim高级技巧 - 0-55"><meta property="og:description" content="Info C表示按住Ctrl, C-o表示同时按住Ctrl和o 1. 在tmux中 vim-airline插件颜色显示不正常 解决方案：
export TERM=screen-256color 2. buffer相关操作 :ls # 显示所有打开的buffer :b {bufferName} #支持tab键自动补全 :bd # 关闭当前buffer :bn # 切换到下一个buffer :bp # 切换到上一个buffer :b# # 切换到上一个访问过的buffer :b1 # 切换到buffer1 :bm # 切换到最近修改过的buffer :sb {bufferName} # 上下分屏 :vert sb {bufferName} # 左右分屏 3. 跳转到对应的符号上 下面这种符号，一般都是成双成对的，只要在其中一个上按%, 就会自动跳转到对应的符号
() [] {} 4. 关闭netrw的banner 如果熟练的是用了netrw，就可以把默认开启的banner给关闭掉。
let g:netrw_banner = 0 let g:netrw_liststyle = 3 let g:netrw_winsize = 25 5. 如何同时保存所有发生变化的文件？ 把所有发生变化的文件给保存 :wa 把所有发生变化的文件都保存，然后退出vim :xa 退出vim, 所有发生变化的文件都不保存，:qa!"><meta property="og:type" content="article"><meta property="og:url" content="https://wdd.js.org/vim/vim-tips/"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="vim"><meta property="article:published_time" content="2022-05-27T19:25:48+08:00"><meta property="article:modified_time" content="2022-05-27T19:25:48+08:00"><meta property="og:site_name" content="洞香春"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="1001个Vim高级技巧 - 0-55"><meta name=twitter:description content="Info C表示按住Ctrl, C-o表示同时按住Ctrl和o 1. 在tmux中 vim-airline插件颜色显示不正常 解决方案：
export TERM=screen-256color 2. buffer相关操作 :ls # 显示所有打开的buffer :b {bufferName} #支持tab键自动补全 :bd # 关闭当前buffer :bn # 切换到下一个buffer :bp # 切换到上一个buffer :b# # 切换到上一个访问过的buffer :b1 # 切换到buffer1 :bm # 切换到最近修改过的buffer :sb {bufferName} # 上下分屏 :vert sb {bufferName} # 左右分屏 3. 跳转到对应的符号上 下面这种符号，一般都是成双成对的，只要在其中一个上按%, 就会自动跳转到对应的符号
() [] {} 4. 关闭netrw的banner 如果熟练的是用了netrw，就可以把默认开启的banner给关闭掉。
let g:netrw_banner = 0 let g:netrw_liststyle = 3 let g:netrw_winsize = 25 5. 如何同时保存所有发生变化的文件？ 把所有发生变化的文件给保存 :wa 把所有发生变化的文件都保存，然后退出vim :xa 退出vim, 所有发生变化的文件都不保存，:qa!"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"VIM之路","item":"https://wdd.js.org/vim/"},{"@type":"ListItem","position":3,"name":"1001个Vim高级技巧 - 0-55","item":"https://wdd.js.org/vim/vim-tips/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"1001个Vim高级技巧 - 0-55","name":"1001个Vim高级技巧 - 0-55","description":"Info C表示按住Ctrl, C-o表示同时按住Ctrl和o 1. 在tmux中 vim-airline插件颜色显示不正常 解决方案：\nexport TERM=screen-256color 2. buffer相关操作 :ls # 显示所有打开的buffer :b {bufferName} #支持tab键自动补全 :bd # 关闭当前buffer :bn # 切换到下一个buffer :bp # 切换到上一个buffer :b# # 切换到上一个访问过的buffer :b1 # 切换到buffer1 :bm # 切换到最近修改过的buffer :sb {bufferName} # 上下分屏 :vert sb {bufferName} # 左右分屏 3. 跳转到对应的符号上 下面这种符号，一般都是成双成对的，只要在其中一个上按%, 就会自动跳转到对应的符号\n() [] {} 4. 关闭netrw的banner 如果熟练的是用了netrw，就可以把默认开启的banner给关闭掉。\nlet g:netrw_banner = 0 let g:netrw_liststyle = 3 let g:netrw_winsize = 25 5. 如何同时保存所有发生变化的文件？ 把所有发生变化的文件给保存 :wa 把所有发生变化的文件都保存，然后退出vim :xa 退出vim, 所有发生变化的文件都不保存，:qa!","keywords":["vim"],"articleBody":" Info C表示按住Ctrl, C-o表示同时按住Ctrl和o 1. 在tmux中 vim-airline插件颜色显示不正常 解决方案：\nexport TERM=screen-256color 2. buffer相关操作 :ls # 显示所有打开的buffer :b {bufferName} #支持tab键自动补全 :bd # 关闭当前buffer :bn # 切换到下一个buffer :bp # 切换到上一个buffer :b# # 切换到上一个访问过的buffer :b1 # 切换到buffer1 :bm # 切换到最近修改过的buffer :sb {bufferName} # 上下分屏 :vert sb {bufferName} # 左右分屏 3. 跳转到对应的符号上 下面这种符号，一般都是成双成对的，只要在其中一个上按%, 就会自动跳转到对应的符号\n() [] {} 4. 关闭netrw的banner 如果熟练的是用了netrw，就可以把默认开启的banner给关闭掉。\nlet g:netrw_banner = 0 let g:netrw_liststyle = 3 let g:netrw_winsize = 25 5. 如何同时保存所有发生变化的文件？ 把所有发生变化的文件给保存 :wa 把所有发生变化的文件都保存，然后退出vim :xa 退出vim, 所有发生变化的文件都不保存，:qa! 6. 插入当前时间 :r!date 7. 光标下的文件跳转 按gf可以跳转光标下的文件\nimport {say} from './api' 也有可能跳的不准确，或者找不到，因为vim不知道文件后缀\n:set suffixesadd+=.js 8. 文件对比 如果你安装了vim, vimdiff就会自动携带\nvimdiff a.txt b.txt 9. 在插入模式快速删除 C-h 删除前一个字符 C-w 删除前一个单词 C-u 删除到行首 10. 在多行末尾增加特定的字符 例如下面的命令，可以在多行末尾增加;\n:%s/$/;/ 11. 对撤销进行撤销 u可以用来撤销，C-r可以用来对撤销进行撤销\n12. 重新读取文件 假如你对一个文件进行了一些修改，但是还没有保存，这是你想丢弃这些修改，如果用撤销的话，太麻烦。\n你可以用下面的命令，让vim重新读取磁盘上的文件，覆盖当前buffer中的文件。\n:e! 13. 对当前buffer执行外部命令 例如对go代码进行格式化\n:!go fmt % 也可以是一个json文件，我们可以用行选中之后执行:'\u003c,'\u003e!jq, 如果需要对全文进行json格式化，可以使用:%!jq\n{\"name\":\"wdd\",\"age\":1} { \"name\": \"wdd\", \"age\": 1 } Warning !和命令之间不能有空格 14. 只读模式打开文件 只读模式打开文件: vim -R file 禁止修改打开文件: vim -M file 15. 显示或者隐藏特殊字符 :set list :set nolist 16. 把另一个文件读取到当前buffer里面 b.txt是另一个文件\n# 读取到光标的位置 :read b.txt # 读区到当前buffer的开头 :0read b.txt # 读区到当前buffer的结尾 :$read b.txt 17. 把当前文件的一部分写入到另一个文件中 # 把当前文件写入到c.txt, 如果c.txt存在，则写入失败 :write c.txt # 把当前文件写入到c.txt, 如果c.txt存在，则强制写入 # 注意这里!必须紧跟着write, 并且空格是必须的，否则就是执行外部命令了 :write! c.txt # 把当前文件的当前行到文件末尾写入到c.txt :.$write c.txt # 把当前文件以追加的方式写入到另一个文件中 :write \u003e\u003ec.txt 18. 自带文件浏览器的必背命令 :Sex # 文件浏览器上下分布 :Vex # 文件浏览器左右分布 F1 打开帮助信息 % 创建文件 d 创建目录 D 删除文件或者目录 R 文件重命名 gh 隐藏以.开头的文件 返回上一级 t 用新的标签页面页面打开文件 c 把浏览的目录设置为当前工作的目录 19. 执行命令后，快速进入插入模式 C 从光标处删除到行尾，然后进入插入模式 S 清空当前行的内容，然后进入插入模式 s 删除光标下的字符，然后进入插入模式 O\t在当前行上插入一行，然后进入插入模式 o\t在当前行下插入一行，然后进入插入模式 I\t光标移动当当前行的一个字符前，然后进入插入模式 A\t贯标移动到当前航的最后一个字符后，然后进入插入模式 20. 必会的几个寄存器 有名寄存器 a-z 黑洞寄存器 _ 表达式寄存器 = 当前文件名寄存器 % 上次查找的模式寄存器 / 复制专用寄存器 0 C-r 是用来调用寄存器的。比如说我想粘贴当前文件名，我只需要按C-r %, 就可以自动粘贴到当前的文件中\n21. 基于tag的跳转 C-] 跳到对应tag上 C-o 跳回来 C-t 跳回来 C-w ] 在新的window中打开标签 C-w } 预览 pclose 关闭预览 22. html标签删除 dit 删除标签内部的元素 dat 删除标签 23. 原始格式粘贴 如果粘贴到vim中的文本缩进出现问题，\n:set paste 然后再执行C-v粘贴\n取消粘贴模式用 :set nopaste\n24. 按列删除或者按列保留 # 只保留第二列 :%!awk '{print $2}' # 删除第二列 :%!awk '{$2=\"\";print $0}' 25. 查找多个关键词 /key1\\|key2\\|key3 26. 快速将光标所在行移动到屏幕中央 zz 26. 窗口快捷键 工作区切分窗口命令 s 水平切分窗口，新窗口仍然显示当前缓冲区 v 垂直切分窗口，新窗口仍然显示当前缓冲区 sp {file} 水平切分为当前窗口，新窗口中载入file vsp {file} 垂直切分窗口，并在新窗口载入file 窗口之间切换 w 在窗口间循环切换 h 切换到左边窗口 l 切换到右边窗口 j 切换到下边的窗口 k 切换到上边的窗口 窗口关闭 :clo[se] 关闭活动窗口 :on[ly] 关闭其他窗口 窗口改变大小 = 使所有窗口等宽等高 _ 最大化活动窗口的高度 | 最大化活动 27. 9种插入模式 i 进入插入模式，所输入新的内容将会在正常模式所在光标的前面 a 进入插入模式，所输入的新的内容将会在正常模式所在光标的后面 你知道从插入模式退出的时候，光标会向前移动一个字符吗？\n进入插入模式的技巧\ni 在光标前插入 a 在光标后插入 A 在行的末尾进入插入 I (大写的i), 在行的第一个非空白字符前进入插入模式 C 删除光标后的所有字符，然后进入插入模式 s 删除光标后的一个字符，然后进入插入模式 S 清空当前行，然后进入插入模式 o 在当前行的下面一行新建一行，并进入插入模式 O 在当前行的上面一行新建一行，并进入插入模式 28. 算数运算 ctrl a 对数字进行加运算， 如果光标不在数字上，将会自动向后移动道对应的数字上 ctrl x 对数字进行减运算 29. 可视模式快捷键 v 激活面向字符的可视模式 再按一次，可以退出 V 激活面向行的可视模式， 再按一次可以退出 ctrl v 激活面向列的可视模式 gv 重选上次的选区 o 移动选区的端点 30. 把光标所在的单词插入到Ex C-r C-w 31. 全局 文件另存为 :saveas filename 关闭当前窗口 :close 32. 光标移动 移动光标到页面顶部，中部，底部 H,M,L 移动到下个单词开头，结尾 w,e 移动到上个单词开头 b 移动光标 上下左右 k,j,h,l 移动到匹配的括号 % 移动到行首 0 移动到行首非空白字符 ^ 移动到行尾非空白字符 g 移动到行尾 $ 移动到文件第一行 gg 移动到文件最后一行 G 移动到第10行 10G 移动屏幕使光标居中 zz 跳转到上一次的位置 ctrl+o 例如你在159行，然后你按了gg, 光标调到了第一行，然后你按ctrl+o, 光标会回到159行 跳转到下一次的位置 ctrl+i 跳转到下个同样单词的地方 * 跳转到上个同样单词的地方 # 跳到字符a出现的位置 fa, Fa 调到字符a出现的前一个位置 ta, Ta 跳到之前的位置 `` 跳到之前修改的位置 `. 跳到选区的起始位置 `\u003c 跳到选区的结束位置 `\u003e 33. 滚动屏幕 向下，向上滚动一屏 ctrl+b, ctrl+f 向下，向上滚动半屏 ctrl+d, ctrl+u 34. 插入模式 光标前、后插入 i，a 行首，行尾插入 I, A 在当前行上、下另一起行插入 O, o 从当前单词末尾插入 ea 退出插入模式 esc 删除前一个单词 ctrl+w 删除到行首 ctrl+u 35. 编辑 替换光标下的字符 r 将下一行合并到当前行 J 将下一行合并到当前行，并一种中间的空白字符 gJ 清空当前行，并进入插入模式 cc 清空当前单词，并进入插入模式 cw 撤销修改 u 删除光标下的一个字符，然后进入插入模式 s 36. 选择文本 普通光标选择, 进入选择文本模式 v 行选择，进入选择文本模式 V 块选择，进入选择文本模式 ctrl+v 在多行行首插入注释# ctrl+v 然后选择快，然后输入I, 然后输入#， 然后按esc 注意，输入I指令时，光标只会定位到一个位置，编辑的内容也只是在一个位置，但是按了esc后，多行都会出现# 进入选择文本模式之后 选择光标所在单词（光标要先位于单词上） aw 选择光标所在()区域，包括()， 光标要先位于一个括号上 ab 选择光标所在[]区域，包括[], 光标要先位于一个括号上 aB 选择光标所在()区域，不包括()， 光标要先位于一个括号上 ib 选择光标所在[]区域，不包括[], 光标要先位于一个括号上 iB 退出可视化区域 esc 37. 选择文本命令 向左右缩进 \u003c, \u003e 复制 y 剪切 d 大小写转换 ~ 38. 标记 显示标记列表 :marks 标记当前位置为a ma 跳转到标记a的位置 `a 39. 剪切删除 剪切当前行 dd 剪切2行 2dd 剪切当前单词 dw 从光标所在位置剪切到行尾 D, d$ 剪切当前字符 x 删除单引号中的内容 di’ da’ 删除包括' 删除双引号中的内容 di\" da\" 删除包括\" 删除中括号中的内容 di[ da[ 删除包括[ 删除大括号中的内容 di{ da{ 删除包括{ 删除括号中的内容 di( da( 删除包含( 从当前光标位置，删除到到字符a dta 40. global命令 删除所有不包含匹配项的文本行 :v/re/d re可以是字符，也可以是正则 显示所有不包含匹配项的文本行 :v/re/p re可以是字符，也可以是正则 删除包含匹配项的行 :g/re/d re可以是字符，也可以是正则 显示所有包含匹配项的行 :g/re/p re可以是字符，也可以是正则 41. 文本对象 当前单词 iw 当前单词和一个空格 aw 当前句子 is 当前句子和一个空格 as 当前段落 ip 当前段落和一个空行 ap 一对圆括号 a) 或 ab 圆括号内部 i) 或 ib 一对花括号 a}或 aB 花括号内部 i}或 iB a表示匹配两点和两点之间的字符), }, ], \u003e , ‘, “, `, t(xml) i表示匹配两点内部之间的字符 42. 复制 复制当前行 yy 复制2行 2yy 复制当前单词 yw 从光标所在位置复制到行尾 y$ 复制单引号中的内容 yi’ ya’ 复制包括' 复制双引号中的内容 yi\" ya” 复制包括\" 复制中括号中的内容 yi[ ya[ 复制包括[ 复制大括号中的内容 yi{ ya{ 复制包括{ 43. 粘贴 在光标后粘贴 p 在光标前粘贴 P 44. 保存退出 保存 w 保存并退出 wq 不保存退出 q! 保存所有tab页并退出 wqa 46. 查找 向下查找key /key 向上查找key ?key 下一个key n 上一个key N 移除搜索结果高亮 :noh 设置搜索高亮 :set hlsearch 统计当前模式匹配的个数 :%s///gn 47. 字符串替换 全文将old替换为new %s/old/new/g 全文将old替换为new, 但是会一个一个确认 %s/old/new/gc 48. 多文件搜索 多文件搜索 :vimgrep /key/ {file} vimgrep /export/ */ 切换到下一个文件 cn 切换到上一个文件 cp 查看搜索结果列表 copen 查看文件缓冲区 :ls 49. 窗口分割 水平分割窗口 :split 默认split仅针对当前文件，如果在新窗口打开新的文件，可以：split file 垂直分割窗口 :vsplit 打开空白的窗口 :new 关闭分割的窗口 ctrl+wq, :close 有时候ctrl+wq不管用，需要用close 窗口之间切换 ctrl+ww 切换到左边窗口 ctrl+wh 切换到右边窗口 ctrl+wl 切换到下边窗口 ctrl+wj 切换到上边窗口 ctrl+wk 关闭所有窗口 :qall 这表示 “quit all” (全部退出)。如果任何一个窗口没有存盘，Vim 都不会退出。同时光 标会自动跳到那个窗口，你可以用 “:write” 命令保存该文件或者 “:quit!” 放弃修改。 保存所有窗口修改后的内容 :wall 如果你知道有窗口被改了，而你想全部保存 关闭所有窗口，放弃所有修改 :qall! 注意，这个命令是不能撤销的。 保存所有修改，然后退出vim :wqall 窗口更多内容 http://vimcdoc.sourceforge.net/doc/usr_08.html#usr_08.txt\n50. 宏 录制宏a qa 停止录制宏 q 51. 标签页 新建标签页 tabnew 在新标签页中打开file tabnew file 切换到下个标签页 gt 切换到上个标签页 gT 关闭当前标签页 :tabclose, :tabc 关闭其他标签页 :tabo, :tabonly 在所有标签页中执行命令 :tabdo commad :tabdo w 52. 文本折叠 折叠文本内容 zfap http://vimcdoc.sourceforge.net/doc/usr_28.html#usr_28.txt 打开折叠 zo 关闭折叠 zc 展开所有折叠 zr 打开所有光标行上的折叠用 zO 关闭所有光标行上的折叠用 zC 删除一个光标行上的折叠用 zd 删除所有光标行上的折叠用 zD 53. 设置 设置vim编辑器的宽度 set columns=200 54. 自动补全 使用自动补全的下一个列表项 ctrl+n 使用自动补全的上一个列表项 ctrl+p 确认当前选择项 ctrl+y 还原最早输入项 ctrl+e 55. 杂项 在vim中执行外部命令 :!ls -al 查看当前光标所在行与百分比 ctrl+g 挂起vim, 使其在后台运行 ctrl+z 查看后台挂起的程序 jobs 使挂起的vim前台运行 fg 如果有多个后台挂起的任务， 则需要指定任务序号，如 ：fg %1 在每行行尾添加字符串abc :%s/$/abc 在每行行首添加字符串abc :%s/^/abc 每行行尾删除字符串abc :%s/$/abc 每行行首删除字符串abc :%s/^/abc 删除含有abc字符串的行 :g/abc/d 删除每行行首到特定字符的内容，非贪婪匹配 : %s/^.{-}abc// var = abc123, 会删除var = abc 调换当前行和它的下一行 ddp 全文格式化 gg 跳到第一行 shift v shift g = 参考\nhttps://vim.rtorr.com/lang/zh_cn http://vimcdoc.sourceforge.net/doc/help.html https://www.oschina.net/translate/learn-vim-progressively ","wordCount":"867","inLanguage":"en","datePublished":"2022-05-27T19:25:48+08:00","dateModified":"2022-05-27T19:25:48+08:00","author":{"@type":"Person","name":"Eddie Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/vim/vim-tips/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body class=dark id=top><script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org accesskey=h title="洞香春 (Alt + H)"><img src=/cowboy.ico alt=logo aria-label=logo height=35>洞香春</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/fe/ title=Frontend><span>Frontend</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/container/ title=k8s/docker><span>k8s/docker</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/shell/ title=Shell><span>Shell</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/vim/>VIM之路</a></div><h1 class=post-title>1001个Vim高级技巧 - 0-55</h1><div class=post-meta><span title='2022-05-27 19:25:48 +0800 +0800'>2022-05-27 19:25:48</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;Eddie Wang</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#1-%e5%9c%a8tmux%e4%b8%ad-vim-airline%e6%8f%92%e4%bb%b6%e9%a2%9c%e8%89%b2%e6%98%be%e7%a4%ba%e4%b8%8d%e6%ad%a3%e5%b8%b8 aria-label="1. 在tmux中 vim-airline插件颜色显示不正常">1. 在tmux中 vim-airline插件颜色显示不正常</a></li><li><a href=#2-buffer%e7%9b%b8%e5%85%b3%e6%93%8d%e4%bd%9c aria-label="2. buffer相关操作">2. buffer相关操作</a></li><li><a href=#3-%e8%b7%b3%e8%bd%ac%e5%88%b0%e5%af%b9%e5%ba%94%e7%9a%84%e7%ac%a6%e5%8f%b7%e4%b8%8a aria-label="3. 跳转到对应的符号上">3. 跳转到对应的符号上</a></li><li><a href=#4-%e5%85%b3%e9%97%adnetrw%e7%9a%84banner aria-label="4. 关闭netrw的banner">4. 关闭netrw的banner</a></li><li><a href=#5-%e5%a6%82%e4%bd%95%e5%90%8c%e6%97%b6%e4%bf%9d%e5%ad%98%e6%89%80%e6%9c%89%e5%8f%91%e7%94%9f%e5%8f%98%e5%8c%96%e7%9a%84%e6%96%87%e4%bb%b6 aria-label="5. 如何同时保存所有发生变化的文件？">5. 如何同时保存所有发生变化的文件？</a></li><li><a href=#6-%e6%8f%92%e5%85%a5%e5%bd%93%e5%89%8d%e6%97%b6%e9%97%b4 aria-label="6. 插入当前时间">6. 插入当前时间</a></li><li><a href=#7-%e5%85%89%e6%a0%87%e4%b8%8b%e7%9a%84%e6%96%87%e4%bb%b6%e8%b7%b3%e8%bd%ac aria-label="7. 光标下的文件跳转">7. 光标下的文件跳转</a></li><li><a href=#8-%e6%96%87%e4%bb%b6%e5%af%b9%e6%af%94 aria-label="8. 文件对比">8. 文件对比</a></li><li><a href=#9-%e5%9c%a8%e6%8f%92%e5%85%a5%e6%a8%a1%e5%bc%8f%e5%bf%ab%e9%80%9f%e5%88%a0%e9%99%a4 aria-label="9. 在插入模式快速删除">9. 在插入模式快速删除</a></li><li><a href=#10-%e5%9c%a8%e5%a4%9a%e8%a1%8c%e6%9c%ab%e5%b0%be%e5%a2%9e%e5%8a%a0%e7%89%b9%e5%ae%9a%e7%9a%84%e5%ad%97%e7%ac%a6 aria-label="10. 在多行末尾增加特定的字符">10. 在多行末尾增加特定的字符</a></li><li><a href=#11-%e5%af%b9%e6%92%a4%e9%94%80%e8%bf%9b%e8%a1%8c%e6%92%a4%e9%94%80 aria-label="11. 对撤销进行撤销">11. 对撤销进行撤销</a></li><li><a href=#12-%e9%87%8d%e6%96%b0%e8%af%bb%e5%8f%96%e6%96%87%e4%bb%b6 aria-label="12. 重新读取文件">12. 重新读取文件</a></li><li><a href=#13-%e5%af%b9%e5%bd%93%e5%89%8dbuffer%e6%89%a7%e8%a1%8c%e5%a4%96%e9%83%a8%e5%91%bd%e4%bb%a4 aria-label="13. 对当前buffer执行外部命令">13. 对当前buffer执行外部命令</a></li><li><a href=#14-%e5%8f%aa%e8%af%bb%e6%a8%a1%e5%bc%8f%e6%89%93%e5%bc%80%e6%96%87%e4%bb%b6 aria-label="14. 只读模式打开文件">14. 只读模式打开文件</a></li><li><a href=#15-%e6%98%be%e7%a4%ba%e6%88%96%e8%80%85%e9%9a%90%e8%97%8f%e7%89%b9%e6%ae%8a%e5%ad%97%e7%ac%a6 aria-label="15. 显示或者隐藏特殊字符">15. 显示或者隐藏特殊字符</a></li><li><a href=#16-%e6%8a%8a%e5%8f%a6%e4%b8%80%e4%b8%aa%e6%96%87%e4%bb%b6%e8%af%bb%e5%8f%96%e5%88%b0%e5%bd%93%e5%89%8dbuffer%e9%87%8c%e9%9d%a2 aria-label="16. 把另一个文件读取到当前buffer里面">16. 把另一个文件读取到当前buffer里面</a></li><li><a href=#17-%e6%8a%8a%e5%bd%93%e5%89%8d%e6%96%87%e4%bb%b6%e7%9a%84%e4%b8%80%e9%83%a8%e5%88%86%e5%86%99%e5%85%a5%e5%88%b0%e5%8f%a6%e4%b8%80%e4%b8%aa%e6%96%87%e4%bb%b6%e4%b8%ad aria-label="17. 把当前文件的一部分写入到另一个文件中">17. 把当前文件的一部分写入到另一个文件中</a></li><li><a href=#18-%e8%87%aa%e5%b8%a6%e6%96%87%e4%bb%b6%e6%b5%8f%e8%a7%88%e5%99%a8%e7%9a%84%e5%bf%85%e8%83%8c%e5%91%bd%e4%bb%a4 aria-label="18. 自带文件浏览器的必背命令">18. 自带文件浏览器的必背命令</a></li><li><a href=#19-%e6%89%a7%e8%a1%8c%e5%91%bd%e4%bb%a4%e5%90%8e%e5%bf%ab%e9%80%9f%e8%bf%9b%e5%85%a5%e6%8f%92%e5%85%a5%e6%a8%a1%e5%bc%8f aria-label="19. 执行命令后，快速进入插入模式">19. 执行命令后，快速进入插入模式</a></li><li><a href=#20-%e5%bf%85%e4%bc%9a%e7%9a%84%e5%87%a0%e4%b8%aa%e5%af%84%e5%ad%98%e5%99%a8 aria-label="20. 必会的几个寄存器">20. 必会的几个寄存器</a></li><li><a href=#21-%e5%9f%ba%e4%ba%8etag%e7%9a%84%e8%b7%b3%e8%bd%ac aria-label="21. 基于tag的跳转">21. 基于tag的跳转</a></li><li><a href=#22-html%e6%a0%87%e7%ad%be%e5%88%a0%e9%99%a4 aria-label="22. html标签删除">22. html标签删除</a></li><li><a href=#23-%e5%8e%9f%e5%a7%8b%e6%a0%bc%e5%bc%8f%e7%b2%98%e8%b4%b4 aria-label="23. 原始格式粘贴">23. 原始格式粘贴</a></li><li><a href=#24-%e6%8c%89%e5%88%97%e5%88%a0%e9%99%a4%e6%88%96%e8%80%85%e6%8c%89%e5%88%97%e4%bf%9d%e7%95%99 aria-label="24. 按列删除或者按列保留">24. 按列删除或者按列保留</a></li><li><a href=#25-%e6%9f%a5%e6%89%be%e5%a4%9a%e4%b8%aa%e5%85%b3%e9%94%ae%e8%af%8d aria-label="25. 查找多个关键词">25. 查找多个关键词</a></li><li><a href=#26-%e5%bf%ab%e9%80%9f%e5%b0%86%e5%85%89%e6%a0%87%e6%89%80%e5%9c%a8%e8%a1%8c%e7%a7%bb%e5%8a%a8%e5%88%b0%e5%b1%8f%e5%b9%95%e4%b8%ad%e5%a4%ae aria-label="26. 快速将光标所在行移动到屏幕中央">26. 快速将光标所在行移动到屏幕中央</a></li><li><a href=#26-%e7%aa%97%e5%8f%a3%e5%bf%ab%e6%8d%b7%e9%94%ae aria-label="26. 窗口快捷键">26. 窗口快捷键</a><ul><li><a href=#%e5%b7%a5%e4%bd%9c%e5%8c%ba%e5%88%87%e5%88%86%e7%aa%97%e5%8f%a3%e5%91%bd%e4%bb%a4 aria-label=工作区切分窗口命令>工作区切分窗口命令</a></li><li><a href=#%e7%aa%97%e5%8f%a3%e4%b9%8b%e9%97%b4%e5%88%87%e6%8d%a2 aria-label=窗口之间切换>窗口之间切换</a></li><li><a href=#%e7%aa%97%e5%8f%a3%e5%85%b3%e9%97%ad aria-label=窗口关闭>窗口关闭</a></li><li><a href=#%e7%aa%97%e5%8f%a3%e6%94%b9%e5%8f%98%e5%a4%a7%e5%b0%8f aria-label=窗口改变大小>窗口改变大小</a></li></ul></li><li><a href=#27-9%e7%a7%8d%e6%8f%92%e5%85%a5%e6%a8%a1%e5%bc%8f aria-label="27. 9种插入模式">27. 9种插入模式</a></li><li><a href=#28-%e7%ae%97%e6%95%b0%e8%bf%90%e7%ae%97 aria-label="28. 算数运算">28. 算数运算</a></li><li><a href=#29-%e5%8f%af%e8%a7%86%e6%a8%a1%e5%bc%8f%e5%bf%ab%e6%8d%b7%e9%94%ae aria-label="29. 可视模式快捷键">29. 可视模式快捷键</a></li><li><a href=#30-%e6%8a%8a%e5%85%89%e6%a0%87%e6%89%80%e5%9c%a8%e7%9a%84%e5%8d%95%e8%af%8d%e6%8f%92%e5%85%a5%e5%88%b0ex aria-label="30. 把光标所在的单词插入到Ex">30. 把光标所在的单词插入到Ex</a></li><li><a href=#31-%e5%85%a8%e5%b1%80 aria-label="31. 全局">31. 全局</a></li><li><a href=#32-%e5%85%89%e6%a0%87%e7%a7%bb%e5%8a%a8 aria-label="32. 光标移动">32. 光标移动</a></li><li><a href=#33-%e6%bb%9a%e5%8a%a8%e5%b1%8f%e5%b9%95 aria-label="33. 滚动屏幕">33. 滚动屏幕</a></li><li><a href=#34-%e6%8f%92%e5%85%a5%e6%a8%a1%e5%bc%8f aria-label="34. 插入模式">34. 插入模式</a></li><li><a href=#35-%e7%bc%96%e8%be%91 aria-label="35. 编辑">35. 编辑</a></li><li><a href=#36-%e9%80%89%e6%8b%a9%e6%96%87%e6%9c%ac aria-label="36. 选择文本">36. 选择文本</a></li><li><a href=#37-%e9%80%89%e6%8b%a9%e6%96%87%e6%9c%ac%e5%91%bd%e4%bb%a4 aria-label="37. 选择文本命令">37. 选择文本命令</a></li><li><a href=#38-%e6%a0%87%e8%ae%b0 aria-label="38. 标记">38. 标记</a></li><li><a href=#39-%e5%89%aa%e5%88%87%e5%88%a0%e9%99%a4 aria-label="39. 剪切删除">39. 剪切删除</a></li><li><a href=#40-global%e5%91%bd%e4%bb%a4 aria-label="40. global命令">40. global命令</a></li><li><a href=#41-%e6%96%87%e6%9c%ac%e5%af%b9%e8%b1%a1 aria-label="41. 文本对象">41. 文本对象</a></li><li><a href=#42-%e5%a4%8d%e5%88%b6 aria-label="42. 复制">42. 复制</a></li><li><a href=#43-%e7%b2%98%e8%b4%b4 aria-label="43. 粘贴">43. 粘贴</a></li><li><a href=#44-%e4%bf%9d%e5%ad%98%e9%80%80%e5%87%ba aria-label="44. 保存退出">44. 保存退出</a></li><li><a href=#46-%e6%9f%a5%e6%89%be aria-label="46. 查找">46. 查找</a></li><li><a href=#47-%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%9b%bf%e6%8d%a2 aria-label="47. 字符串替换">47. 字符串替换</a></li><li><a href=#48-%e5%a4%9a%e6%96%87%e4%bb%b6%e6%90%9c%e7%b4%a2 aria-label="48. 多文件搜索">48. 多文件搜索</a></li><li><a href=#49-%e7%aa%97%e5%8f%a3%e5%88%86%e5%89%b2 aria-label="49. 窗口分割">49. 窗口分割</a></li><li><a href=#50-%e5%ae%8f aria-label="50. 宏">50. 宏</a></li><li><a href=#51-%e6%a0%87%e7%ad%be%e9%a1%b5 aria-label="51. 标签页">51. 标签页</a></li><li><a href=#52-%e6%96%87%e6%9c%ac%e6%8a%98%e5%8f%a0 aria-label="52. 文本折叠">52. 文本折叠</a></li><li><a href=#53-%e8%ae%be%e7%bd%ae aria-label="53. 设置">53. 设置</a></li><li><a href=#54-%e8%87%aa%e5%8a%a8%e8%a1%a5%e5%85%a8 aria-label="54. 自动补全">54. 自动补全</a></li><li><a href=#55-%e6%9d%82%e9%a1%b9 aria-label="55. 杂项">55. 杂项</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><div class="notice info"><div class=notice-title><i class="fa fa-exclamation-circle" aria-hidden=true></i>Info</div><div class=notice-content>C表示按住Ctrl, C-o表示同时按住Ctrl和o</div></div><h1 id=1-在tmux中-vim-airline插件颜色显示不正常>1. 在tmux中 vim-airline插件颜色显示不正常<a hidden class=anchor aria-hidden=true href=#1-在tmux中-vim-airline插件颜色显示不正常>#</a></h1><p>解决方案：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>export TERM<span style=color:#f92672>=</span>screen-256color
</span></span></code></pre></div><h1 id=2-buffer相关操作>2. buffer相关操作<a hidden class=anchor aria-hidden=true href=#2-buffer相关操作>#</a></h1><pre tabindex=0><code>:ls # 显示所有打开的buffer
:b {bufferName} #支持tab键自动补全
:bd # 关闭当前buffer
:bn # 切换到下一个buffer
:bp # 切换到上一个buffer
:b# # 切换到上一个访问过的buffer
:b1 # 切换到buffer1
:bm # 切换到最近修改过的buffer
:sb {bufferName} # 上下分屏
:vert sb {bufferName} # 左右分屏
</code></pre><h1 id=3-跳转到对应的符号上>3. 跳转到对应的符号上<a hidden class=anchor aria-hidden=true href=#3-跳转到对应的符号上>#</a></h1><p>下面这种符号，一般都是成双成对的，只要在其中一个上按%, 就会自动跳转到对应的符号</p><pre tabindex=0><code>() [] {}
</code></pre><h1 id=4-关闭netrw的banner>4. 关闭netrw的banner<a hidden class=anchor aria-hidden=true href=#4-关闭netrw的banner>#</a></h1><p>如果熟练的是用了netrw，就可以把默认开启的banner给关闭掉。</p><pre tabindex=0><code>let g:netrw_banner = 0
let g:netrw_liststyle = 3
let g:netrw_winsize = 25
</code></pre><h1 id=5-如何同时保存所有发生变化的文件>5. 如何同时保存所有发生变化的文件？<a hidden class=anchor aria-hidden=true href=#5-如何同时保存所有发生变化的文件>#</a></h1><ul><li>把所有发生变化的文件给保存 <code>:wa</code></li><li>把所有发生变化的文件都保存，然后退出vim <code>:xa</code></li><li>退出vim, 所有发生变化的文件都不保存，<code>:qa!</code></li></ul><h1 id=6-插入当前时间>6. 插入当前时间<a hidden class=anchor aria-hidden=true href=#6-插入当前时间>#</a></h1><pre tabindex=0><code>:r!date
</code></pre><h1 id=7-光标下的文件跳转>7. 光标下的文件跳转<a hidden class=anchor aria-hidden=true href=#7-光标下的文件跳转>#</a></h1><p>按<code>gf</code>可以跳转光标下的文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>import</span> {<span style=color:#a6e22e>say</span>} <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./api&#39;</span>
</span></span></code></pre></div><p>也有可能跳的不准确，或者找不到，因为vim不知道文件后缀</p><pre tabindex=0><code>:set suffixesadd+=.js
</code></pre><h1 id=8-文件对比>8. 文件对比<a hidden class=anchor aria-hidden=true href=#8-文件对比>#</a></h1><p>如果你安装了vim, vimdiff就会自动携带</p><pre tabindex=0><code>vimdiff a.txt b.txt
</code></pre><h1 id=9-在插入模式快速删除>9. 在插入模式快速删除<a hidden class=anchor aria-hidden=true href=#9-在插入模式快速删除>#</a></h1><ul><li>C-h 删除前一个字符</li><li>C-w 删除前一个单词</li><li>C-u 删除到行首</li></ul><h1 id=10-在多行末尾增加特定的字符>10. 在多行末尾增加特定的字符<a hidden class=anchor aria-hidden=true href=#10-在多行末尾增加特定的字符>#</a></h1><p>例如下面的命令，可以在多行末尾增加;</p><pre tabindex=0><code>:%s/$/;/
</code></pre><h1 id=11-对撤销进行撤销>11. 对撤销进行撤销<a hidden class=anchor aria-hidden=true href=#11-对撤销进行撤销>#</a></h1><p>u可以用来撤销，C-r可以用来对撤销进行撤销</p><h1 id=12-重新读取文件>12. 重新读取文件<a hidden class=anchor aria-hidden=true href=#12-重新读取文件>#</a></h1><p>假如你对一个文件进行了一些修改，但是还没有保存，这是你想丢弃这些修改，如果用撤销的话，太麻烦。</p><p>你可以用下面的命令，让vim重新读取磁盘上的文件，覆盖当前buffer中的文件。</p><pre tabindex=0><code>:e!
</code></pre><h1 id=13-对当前buffer执行外部命令>13. 对当前buffer执行外部命令<a hidden class=anchor aria-hidden=true href=#13-对当前buffer执行外部命令>#</a></h1><p>例如对go代码进行格式化</p><pre tabindex=0><code>:!go fmt %
</code></pre><p>也可以是一个json文件，我们可以用行选中之后执行<code>:'&lt;,'>!jq</code>, 如果需要对全文进行json格式化，可以使用<code>:%!jq</code></p><pre tabindex=0><code>{&#34;name&#34;:&#34;wdd&#34;,&#34;age&#34;:1}
</code></pre><pre tabindex=0><code>{
  &#34;name&#34;: &#34;wdd&#34;,
  &#34;age&#34;: 1
}
</code></pre><div class="notice warning"><div class=notice-title><i class="fa fa-exclamation-triangle" aria-hidden=true></i>Warning</div><div class=notice-content>!和命令之间不能有空格</div></div><h1 id=14-只读模式打开文件>14. 只读模式打开文件<a hidden class=anchor aria-hidden=true href=#14-只读模式打开文件>#</a></h1><ul><li>只读模式打开文件: vim -R file</li><li>禁止修改打开文件: vim -M file</li></ul><h1 id=15-显示或者隐藏特殊字符>15. 显示或者隐藏特殊字符<a hidden class=anchor aria-hidden=true href=#15-显示或者隐藏特殊字符>#</a></h1><pre tabindex=0><code>:set list
:set nolist
</code></pre><h1 id=16-把另一个文件读取到当前buffer里面>16. 把另一个文件读取到当前buffer里面<a hidden class=anchor aria-hidden=true href=#16-把另一个文件读取到当前buffer里面>#</a></h1><p>b.txt是另一个文件</p><pre tabindex=0><code># 读取到光标的位置
:read b.txt

# 读区到当前buffer的开头
:0read b.txt

# 读区到当前buffer的结尾
:$read b.txt
</code></pre><h1 id=17-把当前文件的一部分写入到另一个文件中>17. 把当前文件的一部分写入到另一个文件中<a hidden class=anchor aria-hidden=true href=#17-把当前文件的一部分写入到另一个文件中>#</a></h1><pre tabindex=0><code># 把当前文件写入到c.txt, 如果c.txt存在，则写入失败
:write c.txt

# 把当前文件写入到c.txt, 如果c.txt存在，则强制写入
# 注意这里!必须紧跟着write, 并且空格是必须的，否则就是执行外部命令了
:write! c.txt

# 把当前文件的当前行到文件末尾写入到c.txt
:.$write c.txt

# 把当前文件以追加的方式写入到另一个文件中
:write &gt;&gt;c.txt
</code></pre><h1 id=18-自带文件浏览器的必背命令>18. 自带文件浏览器的必背命令<a hidden class=anchor aria-hidden=true href=#18-自带文件浏览器的必背命令>#</a></h1><pre tabindex=0><code>:Sex # 文件浏览器上下分布
:Vex # 文件浏览器左右分布
</code></pre><ul><li>F1 打开帮助信息</li><li>% 创建文件</li><li>d 创建目录</li><li>D 删除文件或者目录</li><li>R 文件重命名</li><li>gh 隐藏以.开头的文件</li><li><ul><li>返回上一级</li></ul></li><li>t 用新的标签页面页面打开文件</li><li>c 把浏览的目录设置为当前工作的目录</li></ul><h1 id=19-执行命令后快速进入插入模式>19. 执行命令后，快速进入插入模式<a hidden class=anchor aria-hidden=true href=#19-执行命令后快速进入插入模式>#</a></h1><ul><li>C 从光标处删除到行尾，然后进入插入模式</li><li>S 清空当前行的内容，然后进入插入模式</li><li>s 删除光标下的字符，然后进入插入模式</li><li>O 在当前行上插入一行，然后进入插入模式</li><li>o 在当前行下插入一行，然后进入插入模式</li><li>I 光标移动当当前行的一个字符前，然后进入插入模式</li><li>A 贯标移动到当前航的最后一个字符后，然后进入插入模式</li></ul><h1 id=20-必会的几个寄存器>20. 必会的几个寄存器<a hidden class=anchor aria-hidden=true href=#20-必会的几个寄存器>#</a></h1><ul><li>有名寄存器 a-z</li><li>黑洞寄存器 _</li><li>表达式寄存器 =</li><li>当前文件名寄存器 %</li><li>上次查找的模式寄存器 /</li><li>复制专用寄存器 0</li></ul><p>C-r 是用来调用寄存器的。比如说我想粘贴当前文件名，我只需要按C-r %, 就可以自动粘贴到当前的文件中</p><h1 id=21-基于tag的跳转>21. 基于tag的跳转<a hidden class=anchor aria-hidden=true href=#21-基于tag的跳转>#</a></h1><ul><li>C-] 跳到对应tag上</li><li>C-o 跳回来</li><li>C-t 跳回来</li><li>C-w ] 在新的window中打开标签</li><li>C-w } 预览</li><li>pclose 关闭预览</li></ul><h1 id=22-html标签删除>22. html标签删除<a hidden class=anchor aria-hidden=true href=#22-html标签删除>#</a></h1><ul><li>dit 删除标签内部的元素</li><li>dat 删除标签</li></ul><h1 id=23-原始格式粘贴>23. 原始格式粘贴<a hidden class=anchor aria-hidden=true href=#23-原始格式粘贴>#</a></h1><p>如果粘贴到vim中的文本缩进出现问题，</p><pre tabindex=0><code>:set paste
</code></pre><p>然后再执行C-v粘贴</p><p>取消粘贴模式用 <code>:set nopaste</code></p><h1 id=24-按列删除或者按列保留>24. 按列删除或者按列保留<a hidden class=anchor aria-hidden=true href=#24-按列删除或者按列保留>#</a></h1><pre tabindex=0><code># 只保留第二列
:%!awk &#39;{print $2}&#39;

# 删除第二列
:%!awk &#39;{$2=&#34;&#34;;print $0}&#39;
</code></pre><h1 id=25-查找多个关键词>25. 查找多个关键词<a hidden class=anchor aria-hidden=true href=#25-查找多个关键词>#</a></h1><pre tabindex=0><code>/key1\|key2\|key3
</code></pre><h1 id=26-快速将光标所在行移动到屏幕中央>26. 快速将光标所在行移动到屏幕中央<a hidden class=anchor aria-hidden=true href=#26-快速将光标所在行移动到屏幕中央>#</a></h1><ul><li>zz</li></ul><h1 id=26-窗口快捷键>26. 窗口快捷键<a hidden class=anchor aria-hidden=true href=#26-窗口快捷键>#</a></h1><h2 id=工作区切分窗口命令>工作区切分窗口命令<a hidden class=anchor aria-hidden=true href=#工作区切分窗口命令>#</a></h2><ul><li>s 水平切分窗口，新窗口仍然显示当前缓冲区</li><li>v 垂直切分窗口，新窗口仍然显示当前缓冲区</li><li>sp {file} 水平切分为当前窗口，新窗口中载入file</li><li>vsp {file} 垂直切分窗口，并在新窗口载入file</li></ul><h2 id=窗口之间切换>窗口之间切换<a hidden class=anchor aria-hidden=true href=#窗口之间切换>#</a></h2><ul><li>w 在窗口间循环切换</li><li>h 切换到左边窗口</li><li>l 切换到右边窗口</li><li>j 切换到下边的窗口</li><li>k 切换到上边的窗口</li></ul><h2 id=窗口关闭>窗口关闭<a hidden class=anchor aria-hidden=true href=#窗口关闭>#</a></h2><ul><li>:clo[se] 关闭活动窗口</li><li>:on[ly] 关闭其他窗口</li></ul><h2 id=窗口改变大小>窗口改变大小<a hidden class=anchor aria-hidden=true href=#窗口改变大小>#</a></h2><ul><li>= 使所有窗口等宽等高</li><li>_ 最大化活动窗口的高度</li><li>| 最大化活动</li></ul><h1 id=27-9种插入模式>27. 9种插入模式<a hidden class=anchor aria-hidden=true href=#27-9种插入模式>#</a></h1><ul><li>i 进入插入模式，所输入新的内容将会在正常模式所在光标的前面</li><li>a 进入插入模式，所输入的新的内容将会在正常模式所在光标的后面</li></ul><p>你知道从插入模式退出的时候，光标会向前移动一个字符吗？</p><p>进入插入模式的技巧</p><ul><li>i 在光标前插入</li><li>a 在光标后插入</li><li>A 在行的末尾进入插入</li><li>I (大写的i), 在行的第一个非空白字符前进入插入模式</li><li>C 删除光标后的所有字符，然后进入插入模式</li><li>s 删除光标后的一个字符，然后进入插入模式</li><li>S 清空当前行，然后进入插入模式</li><li>o 在当前行的下面一行新建一行，并进入插入模式</li><li>O 在当前行的上面一行新建一行，并进入插入模式</li></ul><h1 id=28-算数运算>28. 算数运算<a hidden class=anchor aria-hidden=true href=#28-算数运算>#</a></h1><ul><li>ctrl a 对数字进行加运算， 如果光标不在数字上，将会自动向后移动道对应的数字上</li><li>ctrl x 对数字进行减运算</li></ul><h1 id=29-可视模式快捷键>29. 可视模式快捷键<a hidden class=anchor aria-hidden=true href=#29-可视模式快捷键>#</a></h1><ul><li>v 激活面向字符的可视模式 再按一次，可以退出</li><li>V 激活面向行的可视模式， 再按一次可以退出</li><li>ctrl v 激活面向列的可视模式</li><li>gv 重选上次的选区</li><li>o 移动选区的端点</li></ul><h1 id=30-把光标所在的单词插入到ex>30. 把光标所在的单词插入到Ex<a hidden class=anchor aria-hidden=true href=#30-把光标所在的单词插入到ex>#</a></h1><ul><li>C-r C-w</li></ul><h1 id=31-全局>31. 全局<a hidden class=anchor aria-hidden=true href=#31-全局>#</a></h1><ul><li>文件另存为 :saveas filename</li><li>关闭当前窗口 :close</li></ul><h1 id=32-光标移动>32. 光标移动<a hidden class=anchor aria-hidden=true href=#32-光标移动>#</a></h1><ul><li>移动光标到页面顶部，中部，底部 H,M,L</li><li>移动到下个单词开头，结尾 w,e</li><li>移动到上个单词开头 b</li><li>移动光标 上下左右 k,j,h,l</li><li>移动到匹配的括号 %</li><li>移动到行首 0</li><li>移动到行首非空白字符 ^</li><li>移动到行尾非空白字符 g</li><li>移动到行尾 $</li><li>移动到文件第一行 gg</li><li>移动到文件最后一行 G</li><li>移动到第10行 10G</li><li>移动屏幕使光标居中 zz</li><li>跳转到上一次的位置 ctrl+o 例如你在159行，然后你按了gg, 光标调到了第一行，然后你按ctrl+o, 光标会回到159行</li><li>跳转到下一次的位置 ctrl+i</li><li>跳转到下个同样单词的地方 *</li><li>跳转到上个同样单词的地方 #</li><li>跳到字符a出现的位置 fa, Fa</li><li>调到字符a出现的前一个位置 ta, Ta</li><li>跳到之前的位置 ``</li><li>跳到之前修改的位置 `.</li><li>跳到选区的起始位置 `&lt;</li><li>跳到选区的结束位置 `></li></ul><h1 id=33-滚动屏幕>33. 滚动屏幕<a hidden class=anchor aria-hidden=true href=#33-滚动屏幕>#</a></h1><ul><li>向下，向上滚动一屏 ctrl+b, ctrl+f</li><li>向下，向上滚动半屏 ctrl+d, ctrl+u</li></ul><h1 id=34-插入模式>34. 插入模式<a hidden class=anchor aria-hidden=true href=#34-插入模式>#</a></h1><ul><li>光标前、后插入 i，a</li><li>行首，行尾插入 I, A</li><li>在当前行上、下另一起行插入 O, o</li><li>从当前单词末尾插入 ea</li><li>退出插入模式 esc</li><li>删除前一个单词 ctrl+w</li><li>删除到行首 ctrl+u</li></ul><h1 id=35-编辑>35. 编辑<a hidden class=anchor aria-hidden=true href=#35-编辑>#</a></h1><ul><li>替换光标下的字符 r</li><li>将下一行合并到当前行 J</li><li>将下一行合并到当前行，并一种中间的空白字符 gJ</li><li>清空当前行，并进入插入模式 cc</li><li>清空当前单词，并进入插入模式 cw</li><li>撤销修改 u</li><li>删除光标下的一个字符，然后进入插入模式 s</li></ul><h1 id=36-选择文本>36. 选择文本<a hidden class=anchor aria-hidden=true href=#36-选择文本>#</a></h1><ul><li>普通光标选择, 进入选择文本模式 v</li><li>行选择，进入选择文本模式 V</li><li>块选择，进入选择文本模式 ctrl+v 在多行行首插入注释#</li><li>ctrl+v 然后选择快，然后输入I, 然后输入#， 然后按esc</li><li>注意，输入I指令时，光标只会定位到一个位置，编辑的内容也只是在一个位置，但是按了esc后，多行都会出现#</li><li>进入选择文本模式之后</li><li>选择光标所在单词（光标要先位于单词上） aw</li><li>选择光标所在()区域，包括()， 光标要先位于一个括号上 ab</li><li>选择光标所在[]区域，包括[], 光标要先位于一个括号上 aB</li><li>选择光标所在()区域，不包括()， 光标要先位于一个括号上 ib</li><li>选择光标所在[]区域，不包括[], 光标要先位于一个括号上 iB</li><li>退出可视化区域 esc</li></ul><h1 id=37-选择文本命令>37. 选择文本命令<a hidden class=anchor aria-hidden=true href=#37-选择文本命令>#</a></h1><ul><li>向左右缩进 &lt;, ></li><li>复制 y</li><li>剪切 d</li><li>大小写转换 ~</li></ul><h1 id=38-标记>38. 标记<a hidden class=anchor aria-hidden=true href=#38-标记>#</a></h1><ul><li>显示标记列表 :marks</li><li>标记当前位置为a ma</li><li>跳转到标记a的位置 `a</li></ul><h1 id=39-剪切删除>39. 剪切删除<a hidden class=anchor aria-hidden=true href=#39-剪切删除>#</a></h1><ul><li>剪切当前行 dd</li><li>剪切2行 2dd</li><li>剪切当前单词 dw</li><li>从光标所在位置剪切到行尾 D, d$</li><li>剪切当前字符 x</li><li>删除单引号中的内容 di&rsquo; da’ 删除包括'</li><li>删除双引号中的内容 di" da" 删除包括"</li><li>删除中括号中的内容 di[ da[ 删除包括[</li><li>删除大括号中的内容 di{ da{ 删除包括{</li><li>删除括号中的内容 di( da( 删除包含(</li><li>从当前光标位置，删除到到字符a dta</li></ul><h1 id=40-global命令>40. global命令<a hidden class=anchor aria-hidden=true href=#40-global命令>#</a></h1><ul><li>删除所有不包含匹配项的文本行 :v/re/d re可以是字符，也可以是正则</li><li>显示所有不包含匹配项的文本行 :v/re/p re可以是字符，也可以是正则</li><li>删除包含匹配项的行 :g/re/d re可以是字符，也可以是正则</li><li>显示所有包含匹配项的行 :g/re/p re可以是字符，也可以是正则</li></ul><h1 id=41-文本对象>41. 文本对象<a hidden class=anchor aria-hidden=true href=#41-文本对象>#</a></h1><ul><li>当前单词 iw</li><li>当前单词和一个空格 aw</li><li>当前句子 is</li><li>当前句子和一个空格 as</li><li>当前段落 ip</li><li>当前段落和一个空行 ap</li><li>一对圆括号 a) 或 ab</li><li>圆括号内部 i) 或 ib</li><li>一对花括号 a}或 aB</li><li>花括号内部 i}或 iB</li><li>a表示匹配两点和两点之间的字符), }, ], > , ‘, “, `, t(xml)</li><li>i表示匹配两点内部之间的字符</li></ul><h1 id=42-复制>42. 复制<a hidden class=anchor aria-hidden=true href=#42-复制>#</a></h1><ul><li>复制当前行 yy</li><li>复制2行 2yy</li><li>复制当前单词 yw</li><li>从光标所在位置复制到行尾 y$</li><li>复制单引号中的内容 yi&rsquo; ya&rsquo; 复制包括'</li><li>复制双引号中的内容 yi" ya” 复制包括"</li><li>复制中括号中的内容 yi[ ya[ 复制包括[</li><li>复制大括号中的内容 yi{ ya{ 复制包括{</li></ul><h1 id=43-粘贴>43. 粘贴<a hidden class=anchor aria-hidden=true href=#43-粘贴>#</a></h1><ul><li>在光标后粘贴 p</li><li>在光标前粘贴 P</li></ul><h1 id=44-保存退出>44. 保存退出<a hidden class=anchor aria-hidden=true href=#44-保存退出>#</a></h1><ul><li>保存 w</li><li>保存并退出 wq</li><li>不保存退出 q!</li><li>保存所有tab页并退出 wqa</li></ul><h1 id=46-查找>46. 查找<a hidden class=anchor aria-hidden=true href=#46-查找>#</a></h1><ul><li>向下查找key /key</li><li>向上查找key ?key</li><li>下一个key n</li><li>上一个key N</li><li>移除搜索结果高亮 :noh</li><li>设置搜索高亮 :set hlsearch</li><li>统计当前模式匹配的个数 :%s///gn</li></ul><h1 id=47-字符串替换>47. 字符串替换<a hidden class=anchor aria-hidden=true href=#47-字符串替换>#</a></h1><ul><li>全文将old替换为new %s/old/new/g</li><li>全文将old替换为new, 但是会一个一个确认 %s/old/new/gc</li></ul><h1 id=48-多文件搜索>48. 多文件搜索<a hidden class=anchor aria-hidden=true href=#48-多文件搜索>#</a></h1><ul><li>多文件搜索 :vimgrep /key/ {file} vimgrep /export/ *<em>/</em></li><li>切换到下一个文件 cn</li><li>切换到上一个文件 cp</li><li>查看搜索结果列表 copen</li><li>查看文件缓冲区 :ls</li></ul><h1 id=49-窗口分割>49. 窗口分割<a hidden class=anchor aria-hidden=true href=#49-窗口分割>#</a></h1><ul><li>水平分割窗口 :split 默认split仅针对当前文件，如果在新窗口打开新的文件，可以：split file</li><li>垂直分割窗口 :vsplit</li><li>打开空白的窗口 :new</li><li>关闭分割的窗口 ctrl+wq, :close 有时候ctrl+wq不管用，需要用close</li><li>窗口之间切换 ctrl+ww</li><li>切换到左边窗口 ctrl+wh</li><li>切换到右边窗口 ctrl+wl</li><li>切换到下边窗口 ctrl+wj</li><li>切换到上边窗口 ctrl+wk</li><li>关闭所有窗口 :qall 这表示 &ldquo;quit all&rdquo; (全部退出)。如果任何一个窗口没有存盘，Vim 都不会退出。同时光</li><li>标会自动跳到那个窗口，你可以用 &ldquo;:write&rdquo; 命令保存该文件或者 &ldquo;:quit!&rdquo; 放弃修改。</li><li>保存所有窗口修改后的内容 :wall 如果你知道有窗口被改了，而你想全部保存</li><li>关闭所有窗口，放弃所有修改 :qall! 注意，这个命令是不能撤销的。</li><li>保存所有修改，然后退出vim :wqall</li></ul><p>窗口更多内容
<a href=http://vimcdoc.sourceforge.net/doc/usr_08.html#usr_08.txt>http://vimcdoc.sourceforge.net/doc/usr_08.html#usr_08.txt</a></p><h1 id=50-宏>50. 宏<a hidden class=anchor aria-hidden=true href=#50-宏>#</a></h1><ul><li>录制宏a qa</li><li>停止录制宏 q</li></ul><h1 id=51-标签页>51. 标签页<a hidden class=anchor aria-hidden=true href=#51-标签页>#</a></h1><ul><li>新建标签页 tabnew</li><li>在新标签页中打开file tabnew file</li><li>切换到下个标签页 gt</li><li>切换到上个标签页 gT</li><li>关闭当前标签页 :tabclose, :tabc</li><li>关闭其他标签页 :tabo, :tabonly</li><li>在所有标签页中执行命令 :tabdo commad :tabdo w</li></ul><h1 id=52-文本折叠>52. 文本折叠<a hidden class=anchor aria-hidden=true href=#52-文本折叠>#</a></h1><ul><li>折叠文本内容 zfap <a href=http://vimcdoc.sourceforge.net/doc/usr_28.html#usr_28.txt>http://vimcdoc.sourceforge.net/doc/usr_28.html#usr_28.txt</a></li><li>打开折叠 zo</li><li>关闭折叠 zc</li><li>展开所有折叠 zr</li><li>打开所有光标行上的折叠用 zO</li><li>关闭所有光标行上的折叠用 zC</li><li>删除一个光标行上的折叠用 zd</li><li>删除所有光标行上的折叠用 zD</li></ul><h1 id=53-设置>53. 设置<a hidden class=anchor aria-hidden=true href=#53-设置>#</a></h1><ul><li>设置vim编辑器的宽度 set columns=200</li></ul><h1 id=54-自动补全>54. 自动补全<a hidden class=anchor aria-hidden=true href=#54-自动补全>#</a></h1><ul><li>使用自动补全的下一个列表项 ctrl+n</li><li>使用自动补全的上一个列表项 ctrl+p</li><li>确认当前选择项 ctrl+y</li><li>还原最早输入项 ctrl+e</li></ul><h1 id=55-杂项>55. 杂项<a hidden class=anchor aria-hidden=true href=#55-杂项>#</a></h1><ul><li>在vim中执行外部命令 :!ls -al</li><li>查看当前光标所在行与百分比 ctrl+g</li><li>挂起vim, 使其在后台运行 ctrl+z</li><li>查看后台挂起的程序 jobs</li><li>使挂起的vim前台运行 fg 如果有多个后台挂起的任务， 则需要指定任务序号，如 ：fg %1</li><li>在每行行尾添加字符串abc :%s/$/abc</li><li>在每行行首添加字符串abc :%s/^/abc</li><li>每行行尾删除字符串abc :%s/$/abc</li><li>每行行首删除字符串abc :%s/^/abc</li><li>删除含有abc字符串的行 :g/abc/d</li><li>删除每行行首到特定字符的内容，非贪婪匹配 : %s/^.{-}abc// var = abc123, 会删除var = abc</li><li>调换当前行和它的下一行 ddp</li><li>全文格式化 gg 跳到第一行 shift v shift g =</li></ul><p>参考</p><ul><li><a href=https://vim.rtorr.com/lang/zh_cn>https://vim.rtorr.com/lang/zh_cn</a></li><li><a href=http://vimcdoc.sourceforge.net/doc/help.html>http://vimcdoc.sourceforge.net/doc/help.html</a></li><li><a href=https://www.oschina.net/translate/learn-vim-progressively>https://www.oschina.net/translate/learn-vim-progressively</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://wdd.js.org/tags/vim/>vim</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://wdd.js.org>洞香春</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>