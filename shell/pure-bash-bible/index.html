<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>pure-bash-bible | 洞香春</title><meta name=keywords content><meta name=description content="字符串 字符串包含 Using a test:
if [[ $var == *sub_string* ]]; then printf '%s\n' &#34;sub_string is in var.&#34; fi # Inverse (substring not in string). if [[ $var != *sub_string* ]]; then printf '%s\n' &#34;sub_string is not in var.&#34; fi # This works for arrays too! if [[ ${arr[*]} == *sub_string* ]]; then printf '%s\n' &#34;sub_string is in array.&#34; fi Using a case statement:
case &#34;$var&#34; in *sub_string*) # Do stuff ;; *sub_string2*) # Do more stuff ;; *) # Else ;; esac 字符串开始 if [[ $var == sub_string* ]]; then printf '%s\n' &#34;var starts with sub_string."><meta name=author content="王端端"><link rel=canonical href=https://wdd.js.org/shell/pure-bash-bible/><link crossorigin=anonymous href=/assets/css/stylesheet.min.ceab085cbbf58c0ec96f6d415d51b3b44e204edfd71a45b4fa2d4aac13f119d0.css integrity="sha256-zqsIXLv1jA7Jb21BXVGztE4gTt/XGkW0+i1KrBPxGdA=" rel="preload stylesheet" as=style><link crossorigin=anonymous herf=/font-awesome/css/font-awesome.min.css rel=stylesheet type=text/css><link rel=preload href=/cowboy.ico as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js integrity="sha256-uVus3DnjejMqn4g7Hni+Srwf3KK8HyZB9V4809q9TWE=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.107.0"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="pure-bash-bible"><meta property="og:description" content="字符串 字符串包含 Using a test:
if [[ $var == *sub_string* ]]; then printf '%s\n' &#34;sub_string is in var.&#34; fi # Inverse (substring not in string). if [[ $var != *sub_string* ]]; then printf '%s\n' &#34;sub_string is not in var.&#34; fi # This works for arrays too! if [[ ${arr[*]} == *sub_string* ]]; then printf '%s\n' &#34;sub_string is in array.&#34; fi Using a case statement:
case &#34;$var&#34; in *sub_string*) # Do stuff ;; *sub_string2*) # Do more stuff ;; *) # Else ;; esac 字符串开始 if [[ $var == sub_string* ]]; then printf '%s\n' &#34;var starts with sub_string."><meta property="og:type" content="article"><meta property="og:url" content="https://wdd.js.org/shell/pure-bash-bible/"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="shell"><meta property="article:published_time" content="2019-12-26T13:46:31+08:00"><meta property="article:modified_time" content="2019-12-26T13:46:31+08:00"><meta property="og:site_name" content="洞香春"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="pure-bash-bible"><meta name=twitter:description content="字符串 字符串包含 Using a test:
if [[ $var == *sub_string* ]]; then printf '%s\n' &#34;sub_string is in var.&#34; fi # Inverse (substring not in string). if [[ $var != *sub_string* ]]; then printf '%s\n' &#34;sub_string is not in var.&#34; fi # This works for arrays too! if [[ ${arr[*]} == *sub_string* ]]; then printf '%s\n' &#34;sub_string is in array.&#34; fi Using a case statement:
case &#34;$var&#34; in *sub_string*) # Do stuff ;; *sub_string2*) # Do more stuff ;; *) # Else ;; esac 字符串开始 if [[ $var == sub_string* ]]; then printf '%s\n' &#34;var starts with sub_string."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Shells","item":"https://wdd.js.org/shell/"},{"@type":"ListItem","position":3,"name":"pure-bash-bible","item":"https://wdd.js.org/shell/pure-bash-bible/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"pure-bash-bible","name":"pure-bash-bible","description":"字符串 字符串包含 Using a test:\nif [[ $var == *sub_string* ]]; then printf \u0026#39;%s\\n\u0026#39; \u0026#34;sub_string is in var.\u0026#34; fi # Inverse (substring not in string). if [[ $var != *sub_string* ]]; then printf \u0026#39;%s\\n\u0026#39; \u0026#34;sub_string is not in var.\u0026#34; fi # This works for arrays too! if [[ ${arr[*]} == *sub_string* ]]; then printf \u0026#39;%s\\n\u0026#39; \u0026#34;sub_string is in array.\u0026#34; fi Using a case statement:\ncase \u0026#34;$var\u0026#34; in *sub_string*) # Do stuff ;; *sub_string2*) # Do more stuff ;; *) # Else ;; esac 字符串开始 if [[ $var == sub_string* ]]; then printf \u0026#39;%s\\n\u0026#39; \u0026#34;var starts with sub_string.","keywords":[],"articleBody":"字符串 字符串包含 Using a test:\nif [[ $var == *sub_string* ]]; then printf '%s\\n' \"sub_string is in var.\" fi # Inverse (substring not in string). if [[ $var != *sub_string* ]]; then printf '%s\\n' \"sub_string is not in var.\" fi # This works for arrays too! if [[ ${arr[*]} == *sub_string* ]]; then printf '%s\\n' \"sub_string is in array.\" fi Using a case statement:\ncase \"$var\" in *sub_string*) # Do stuff ;; *sub_string2*) # Do more stuff ;; *) # Else ;; esac 字符串开始 if [[ $var == sub_string* ]]; then printf '%s\\n' \"var starts with sub_string.\" fi # Inverse (var does not start with sub_string). if [[ $var != sub_string* ]]; then printf '%s\\n' \"var does not start with sub_string.\" fi 字符串结尾 if [[ $var == *sub_string ]]; then printf '%s\\n' \"var ends with sub_string.\" fi # Inverse (var does not end with sub_string). if [[ $var != *sub_string ]]; then printf '%s\\n' \"var does not end with sub_string.\" fi 循环 数字范围循环 Alternative to seq.\n# Loop from 0-100 (no variable support). for i in {0..100}; do printf '%s\\n' \"$i\" done 变量循环 Alternative to seq.\n# Loop from 0-VAR. VAR=50 for ((i=0;i\u003c=VAR;i++)); do printf '%s\\n' \"$i\" done 数组遍历 arr=(apples oranges tomatoes) # Just elements. for element in \"${arr[@]}\"; do printf '%s\\n' \"$element\" done 索引遍历 arr=(apples oranges tomatoes) # Elements and index. for i in \"${!arr[@]}\"; do printf '%s\\n' \"${arr[i]}\" done # Alternative method. for ((i=0;i\u003c${#arr[@]};i++)); do printf '%s\\n' \"${arr[i]}\" done 文件或者目录遍历 Don’t use ls.\n# Greedy example. for file in *; do printf '%s\\n' \"$file\" done # PNG files in dir. for file in ~/Pictures/*.png; do printf '%s\\n' \"$file\" done # Iterate over directories. for dir in ~/Downloads/*/; do printf '%s\\n' \"$dir\" done # Brace Expansion. for file in /path/to/parentdir/{file1,file2,subdir/file3}; do printf '%s\\n' \"$file\" done # Iterate recursively. shopt -s globstar for file in ~/Pictures/**/*; do printf '%s\\n' \"$file\" done shopt -u globstar 文件处理 CAVEAT: bash does not handle binary data properly in versions \u003c 4.4.\n将文件读取为字符串 Alternative to the cat command.\nfile_data=\"$(\u003c\"file\")\" 将文件按行读取成数组 Alternative to the cat command.\n# Bash \u003c4 (discarding empty lines). IFS=$'\\n' read -d \"\" -ra file_data \u003c \"file\" # Bash \u003c4 (preserving empty lines). while read -r line; do file_data+=(\"$line\") done \u003c \"file\" # Bash 4+ mapfile -t file_data \u003c \"file\" 获取文件头部的 N 行 Alternative to the head command.\nCAVEAT: Requires bash 4+\nExample Function:\nhead() { # Usage: head \"n\" \"file\" mapfile -tn \"$1\" line \u003c \"$2\" printf '%s\\n' \"${line[@]}\" } Example Usage:\n$ head 2 ~/.bashrc # Prompt PS1='➜ ' $ head 1 ~/.bashrc # Prompt 获取尾部 N 行 Alternative to the tail command.\nCAVEAT: Requires bash 4+\nExample Function:\ntail() { # Usage: tail \"n\" \"file\" mapfile -tn 0 line \u003c \"$2\" printf '%s\\n' \"${line[@]: -$1}\" } Example Usage:\n$ tail 2 ~/.bashrc # Enable tmux. # [[ -z \"$TMUX\" ]] \u0026\u0026 exec tmux $ tail 1 ~/.bashrc # [[ -z \"$TMUX\" ]] \u0026\u0026 exec tmux 获取文件行数 Alternative to wc -l.\nExample Function (bash 4):\nlines() { # Usage: lines \"file\" mapfile -tn 0 lines \u003c \"$1\" printf '%s\\n' \"${#lines[@]}\" } Example Function (bash 3):\nThis method uses less memory than the mapfile method and works in bash 3 but it is slower for bigger files.\nlines_loop() { # Usage: lines_loop \"file\" count=0 while IFS= read -r _; do ((count++)) done \u003c \"$1\" printf '%s\\n' \"$count\" } Example Usage:\n$ lines ~/.bashrc 48 $ lines_loop ~/.bashrc 48 计算文件或者文件夹数量 This works by passing the output of the glob to the function and then counting the number of arguments.\nExample Function:\ncount() { # Usage: count /path/to/dir/* # count /path/to/dir/*/ printf '%s\\n' \"$#\" } Example Usage:\n# Count all files in dir. $ count ~/Downloads/* 232 # Count all dirs in dir. $ count ~/Downloads/*/ 45 # Count all jpg files in dir. $ count ~/Pictures/*.jpg 64 创建临时文件 Alternative to touch.\n# Shortest. \u003efile # Longer alternatives: :\u003efile echo -n \u003efile printf '' \u003efile 在两个标记之间抽取 N 行 Example Function:\nextract() { # Usage: extract file \"opening marker\" \"closing marker\" while IFS=$'\\n' read -r line; do [[ $extract \u0026\u0026 $line != \"$3\" ]] \u0026\u0026 printf '%s\\n' \"$line\" [[ $line == \"$2\" ]] \u0026\u0026 extract=1 [[ $line == \"$3\" ]] \u0026\u0026 extract= done \u003c \"$1\" } Example Usage:\n# Extract code blocks from MarkDown file. $ extract ~/projects/pure-bash/README.md '```sh' '```' # Output here... 文件路径 获取文件的目录 Alternative to the dirname command.\nExample Function:\ndirname() { # Usage: dirname \"path\" local tmp=${1:-.} [[ $tmp != *[!/]* ]] \u0026\u0026 { printf '/\\n' return } tmp=${tmp%%\"${tmp##*[!/]}\"} [[ $tmp != */* ]] \u0026\u0026 { printf '.\\n' return } tmp=${tmp%/*} tmp=${tmp%%\"${tmp##*[!/]}\"} printf '%s\\n' \"${tmp:-/}\" } Example Usage:\n$ dirname ~/Pictures/Wallpapers/1.jpg /home/black/Pictures/Wallpapers $ dirname ~/Pictures/Downloads/ /home/black/Pictures 获取文件路径的 base-name Alternative to the basename command.\nExample Function:\nbasename() { # Usage: basename \"path\" [\"suffix\"] local tmp tmp=${1%\"${1##*[!/]}\"} tmp=${tmp##*/} tmp=${tmp%\"${2/\"$tmp\"}\"} printf '%s\\n' \"${tmp:-/}\" } Example Usage:\n$ basename ~/Pictures/Wallpapers/1.jpg 1.jpg $ basename ~/Pictures/Wallpapers/1.jpg .jpg 1 $ basename ~/Pictures/Downloads/ Downloads 变量 变量声明和使用 $ hello_world=\"value\" # Create the variable name. $ var=\"world\" $ ref=\"hello_$var\" # Print the value of the variable name stored in 'hello_$var'. $ printf '%s\\n' \"${!ref}\" value Alternatively, on bash 4.3+:\n$ hello_world=\"value\" $ var=\"world\" # Declare a nameref. $ declare -n ref=hello_$var $ printf '%s\\n' \"$ref\" value 基于变量命名变量 $ var=\"world\" $ declare \"hello_$var=value\" $ printf '%s\\n' \"$hello_world\" value ESCAPE SEQUENCES Contrary to popular belief, there is no issue in utilizing raw escape sequences. Using tput abstracts the same ANSI sequences as if printed manually. Worse still, tput is not actually portable. There are a number of tput variants each with different commands and syntaxes (try tput setaf 3 on a FreeBSD system). Raw sequences are fine.\n文本颜色 NOTE: Sequences requiring RGB values only work in True-Color Terminal Emulators.\nSequence What does it do? Value \\e[38;5;m Set text foreground color. 0-255 \\e[48;5;m Set text background color. 0-255 \\e[38;2;;;m Set text foreground color to RGB color. R, G, B \\e[48;2;;;m Set text background color to RGB color. R, G, B 文本属性 NOTE: Prepend 2 to any code below to turn it’s effect off(examples: 21=bold text off, 22=faint text off, 23=italic text off).\nSequence What does it do? \\e[m Reset text formatting and colors. \\e[1m Bold text. \\e[2m Faint text. \\e[3m Italic text. \\e[4m Underline text. \\e[5m Blinking text. \\e[7m Highlighted text. \\e[8m Hidden text. \\e[9m Strike-through text. 光标移动 Sequence What does it do? Value \\e[;H Move cursor to absolute position. line, column \\e[H Move cursor to home position (0,0). \\e[A Move cursor up N lines. num \\e[B Move cursor down N lines. num \\e[C Move cursor right N columns. num \\e[D Move cursor left N columns. num \\e[s Save cursor position. \\e[u Restore cursor position. 文本擦除 Sequence What does it do? \\e[K Erase from cursor position to end of line. \\e[1K Erase from cursor position to start of line. \\e[2K Erase the entire current line. \\e[J Erase from the current line to the bottom of the screen. \\e[1J Erase from the current line to the top of the screen. \\e[2J Clear the screen. \\e[2J\\e[H Clear the screen and move cursor to 0,0. 参数展开 指令 Parameter What does it do? ${!VAR} Access a variable based on the value of VAR. ${!VAR*} Expand to IFS separated list of variable names starting with VAR. ${!VAR@} Expand to IFS separated list of variable names starting with VAR. If double-quoted, each variable name expands to a separate word. 替换 Parameter What does it do? ${VAR#PATTERN} Remove shortest match of pattern from start of string. ${VAR##PATTERN} Remove longest match of pattern from start of string. ${VAR%PATTERN} Remove shortest match of pattern from end of string. ${VAR%%PATTERN} Remove longest match of pattern from end of string. ${VAR/PATTERN/REPLACE} Replace first match with string. ${VAR//PATTERN/REPLACE} Replace all matches with string. ${VAR/PATTERN} Remove first match. ${VAR//PATTERN} Remove all matches. 长度 Parameter What does it do? ${#VAR} Length of var in characters. ${#ARR[@]} Length of array in elements. 展开 Parameter What does it do? ${VAR:OFFSET} Remove first N chars from variable. ${VAR:OFFSET:LENGTH} Get substring from N character to N character. (${VAR:10:10}: Get sub-string from char 10 to char 20) ${VAR:: OFFSET} Get first N chars from variable. ${VAR:: -OFFSET} Remove last N chars from variable. ${VAR: -OFFSET} Get last N chars from variable. ${VAR:OFFSET:-OFFSET} Cut first N chars and last N chars. 大小写修改 Parameter What does it do? CAVEAT ${VAR^} Uppercase first character. bash 4+ ${VAR^^} Uppercase all characters. bash 4+ ${VAR,} Lowercase first character. bash 4+ ${VAR,,} Lowercase all characters. bash 4+ ${VAR~} Reverse case of first character. bash 4+ ${VAR~~} Reverse case of all characters. bash 4+ 默认值 Parameter What does it do? ${VAR:-STRING} If VAR is empty or unset, use STRING as its value. ${VAR-STRING} If VAR is unset, use STRING as its value. ${VAR:=STRING} If VAR is empty or unset, set the value of VAR to STRING. ${VAR=STRING} If VAR is unset, set the value of VAR to STRING. ${VAR:+STRING} If VAR is not empty, use STRING as its value. ${VAR+STRING} If VAR is set, use STRING as its value. ${VAR:?STRING} Display an error if empty or unset. ${VAR?STRING} Display an error if unset. 大括号展开 范围 # Syntax: {..} # Print numbers 1-100. echo {1..100} # Print range of floats. echo 1.{1..9} # Print chars a-z. echo {a..z} echo {A..Z} # Nesting. echo {A..Z}{0..9} # Print zero-padded numbers. # CAVEAT: bash 4+ echo {01..100} # Change increment amount. # Syntax: {....} # CAVEAT: bash 4+ echo {1..10..2} # Increment by 2. 字符串列表 echo {apples,oranges,pears,grapes} # Example Usage: # Remove dirs Movies, Music and ISOS from ~/Downloads/. rm -rf ~/Downloads/{Movies,Music,ISOS} 条件表达式 文件条件判断 Expression Value What does it do? -a file If file exists. -b file If file exists and is a block special file. -c file If file exists and is a character special file. -d file If file exists and is a directory. -e file If file exists. -f file If file exists and is a regular file. -g file If file exists and its set-group-id bit is set. -h file If file exists and is a symbolic link. -k file If file exists and its sticky-bit is set -p file If file exists and is a named pipe (FIFO). -r file If file exists and is readable. -s file If file exists and its size is greater than zero. -t fd If file descriptor is open and refers to a terminal. -u file If file exists and its set-user-id bit is set. -w file If file exists and is writable. -x file If file exists and is executable. -G file If file exists and is owned by the effective group ID. -L file If file exists and is a symbolic link. -N file If file exists and has been modified since last read. -O file If file exists and is owned by the effective user ID. -S file If file exists and is a socket. 文件比较 Expression What does it do? file -ef file2 If both files refer to the same inode and device numbers. file -nt file2 If file is newer than file2 (uses modification time) or file exists and file2 does not. file -ot file2 If file is older than file2 (uses modification time) or file2 exists and file does not. 变量测试 Expression Value What does it do? -o opt If shell option is enabled. -v var If variable has a value assigned. -R var If variable is a name reference. -z var If the length of string is zero. -n var If the length of string is non-zero. 变量比较 Expression What does it do? var = var2 Equal to. var == var2 Equal to (synonym for =). var != var2 Not equal to. var \u003c var2 Less than (in ASCII alphabetical order.) var \u003e var2 Greater than (in ASCII alphabetical order.) 算数操作 赋值 Operators What does it do? = Initialize or change the value of a variable. 算数 Operators What does it do? + Addition - Subtraction * Multiplication / Division ** Exponentiation % Modulo += Plus-Equal (Increment a variable.) -= Minus-Equal (Decrement a variable.) *= Times-Equal (Multiply a variable.) /= Slash-Equal (Divide a variable.) %= Mod-Equal (Remainder of dividing a variable.) 位操作 Operators What does it do? \u003c\u003c Bitwise Left Shift \u003c\u003c= Left-Shift-Equal \u003e\u003e Bitwise Right Shift \u003e\u003e= Right-Shift-Equal \u0026 Bitwise AND \u0026= Bitwise AND-Equal | Bitwise OR |= Bitwise OR-Equal ~ Bitwise NOT ^ Bitwise XOR ^= Bitwise XOR-Equal 逻辑 Operators What does it do? ! NOT \u0026\u0026 AND || OR Miscellaneous Operators What does it do? Example , Comma Separator ((a=1,b=2,c=3)) ARITHMETIC Simpler syntax to set variables # Simple math ((var=1+2)) # Decrement/Increment variable ((var++)) ((var--)) ((var+=1)) ((var-=1)) # Using variables ((var=var2*arr[2])) Ternary Tests # Set the value of var to var2 if var2 is greater than var. # var: variable to set. # var2\u003evar: Condition to test. # ?var2: If the test succeeds. # :var: If the test fails. ((var=var2\u003evar?var2:var)) TRAPS Traps allow a script to execute code on various signals. In pxltrm (a pixel art editor written in bash) traps are used to redraw the user interface on window resize. Another use case is cleaning up temporary files on script exit.\nTraps should be added near the start of scripts so any early errors are also caught.\nNOTE: For a full list of signals, see trap -l.\nDo something on script exit # Clear screen on script exit. trap 'printf \\\\e[2J\\\\e[H\\\\e[m' EXIT Ignore terminal interrupt (CTRL+C, SIGINT) trap '' INT React to window resize # Call a function on window resize. trap 'code_here' SIGWINCH Do something before every command trap 'code_here' DEBUG Do something when a shell function or a sourced file finishes executing trap 'code_here' RETURN PERFORMANCE Disable Unicode If unicode is not required, it can be disabled for a performance increase. Results may vary however there have been noticeable improvements in neofetch and other programs.\n# Disable unicode. LC_ALL=C LANG=C OBSOLETE SYNTAX Shebang Use #!/usr/bin/env bash instead of #!/bin/bash.\nThe former searches the user’s PATH to find the bash binary. The latter assumes it is always installed to /bin/ which can cause issues. NOTE: There are times when one may have a good reason for using #!/bin/bash or another direct path to the binary.\n# Right: #!/usr/bin/env bash # Less right: #!/bin/bash Command Substitution Use $() instead of .\n# Right. var=\"$(command)\" # Wrong. var=`command` # $() can easily be nested whereas `` cannot. var=\"$(command \"$(command)\")\" Function Declaration Do not use the function keyword, it reduces compatibility with older versions of bash.\n# Right. do_something() { # ... } # Wrong. function do_something() { # ... } INTERNAL VARIABLES Get the location to the bash binary \"$BASH\" Get the version of the current running bash process # As a string. \"$BASH_VERSION\" # As an array. \"${BASH_VERSINFO[@]}\" Open the user’s preferred text editor \"$EDITOR\" \"$file\" # NOTE: This variable may be empty, set a fallback value. \"${EDITOR:-vi}\" \"$file\" Get the name of the current function # Current function. \"${FUNCNAME[0]}\" # Parent function. \"${FUNCNAME[1]}\" # So on and so forth. \"${FUNCNAME[2]}\" \"${FUNCNAME[3]}\" # All functions including parents. \"${FUNCNAME[@]}\" Get the host-name of the system \"$HOSTNAME\" # NOTE: This variable may be empty. # Optionally set a fallback to the hostname command. \"${HOSTNAME:-$(hostname)}\" Get the architecture of the Operating System \"$HOSTTYPE\" Get the name of the Operating System / Kernel This can be used to add conditional support for different OperatingSystems without needing to call uname.\n\"$OSTYPE\" Get the current working directory This is an alternative to the pwd built-in.\n\"$PWD\" Get the number of seconds the script has been running \"$SECONDS\" Get a pseudorandom integer Each time $RANDOM is used, a different integer between 0 and 32767 is returned. This variable should not be used for anything related to security (this includes encryption keys etc).\n\"$RANDOM\" INFORMATION ABOUT THE TERMINAL Get the terminal size in lines and columns (from a script) This is handy when writing scripts in pure bash and stty/tput can’t becalled.\nExample Function:\nget_term_size() { # Usage: get_term_size # (:;:) is a micro sleep to ensure the variables are # exported immediately. shopt -s checkwinsize; (:;:) printf '%s\\n' \"$LINES $COLUMNS\" } Example Usage:\n# Output: LINES COLUMNS $ get_term_size 15 55 Get the terminal size in pixels CAVEAT: This does not work in some terminal emulators.\nExample Function:\nget_window_size() { # Usage: get_window_size printf '%b' \"${TMUX:+\\\\ePtmux;\\\\e}\\\\e[14t${TMUX:+\\\\e\\\\\\\\}\" IFS=';t' read -d t -t 0.05 -sra term_size printf '%s\\n' \"${term_size[1]}x${term_size[2]}\" } Example Usage:\n# Output: WIDTHxHEIGHT $ get_window_size 1200x800 # Output (fail): $ get_window_size x Get the current cursor position This is useful when creating a TUI in pure bash.\nExample Function:\nget_cursor_pos() { # Usage: get_cursor_pos IFS='[;' read -p $'\\e[6n' -d R -rs _ y x _ printf '%s\\n' \"$x $y\" } Example Usage:\n# Output: X Y $ get_cursor_pos 1 8 CONVERSION Convert a hex color to RGB Example Function:\nhex_to_rgb() { # Usage: hex_to_rgb \"#FFFFFF\" # hex_to_rgb \"000000\" : \"${1/\\#}\" ((r=16#${_:0:2},g=16#${_:2:2},b=16#${_:4:2})) printf '%s\\n' \"$r $g $b\" } Example Usage:\n$ hex_to_rgb \"#FFFFFF\" 255 255 255 Convert an RGB color to hex Example Function:\nrgb_to_hex() { # Usage: rgb_to_hex \"r\" \"g\" \"b\" printf '#%02x%02x%02x\\n' \"$1\" \"$2\" \"$3\" } Example Usage:\n$ rgb_to_hex \"255\" \"255\" \"255\" #FFFFFF CODE GOLF Shorter for loop syntax # Tiny C Style. for((;i++\u003c10;)){ echo \"$i\";} # Undocumented method. for i in {1..10};{ echo \"$i\";} # Expansion. for i in {1..10}; do echo \"$i\"; done # C Style. for((i=0;i\u003c=10;i++)); do echo \"$i\"; done Shorter infinite loops # Normal method while :; do echo hi; done # Shorter for((;;)){ echo hi;} Shorter function declaration # Normal method f(){ echo hi;} # Using a subshell f()(echo hi) # Using arithmetic # This can be used to assign integer values. # Example: f a=1 # f a++ f()(($1)) # Using tests, loops etc. # NOTE: ‘while’, ‘until’, ‘case’, ‘(())’, ‘[[]]’ can also be used. f()if true; then echo \"$1\"; fi f()for i in \"$@\"; do echo \"$i\"; done Shorter if syntax # One line # Note: The 3rd statement may run when the 1st is true [[ $var == hello ]] \u0026\u0026 echo hi || echo bye [[ $var == hello ]] \u0026\u0026 { echo hi; echo there; } || echo bye # Multi line (no else, single statement) # Note: The exit status may not be the same as with an if statement [[ $var == hello ]] \u0026\u0026 echo hi # Multi line (no else) [[ $var == hello ]] \u0026\u0026 { echo hi # ... } Simpler case statement to set variable The : built-in can be used to avoid repeating variable= in a case statement. The $_ variable stores the last argument of the last command. : always succeeds so it can be used to store the variable value.\n# Modified snippet from Neofetch. case \"$OSTYPE\" in \"darwin\"*) : \"MacOS\" ;; \"linux\"*) : \"Linux\" ;; *\"bsd\"* | \"dragonfly\" | \"bitrig\") : \"BSD\" ;; \"cygwin\" | \"msys\" | \"win32\") : \"Windows\" ;; *) printf '%s\\n' \"Unknown OS detected, aborting...\" \u003e\u00262 exit 1 ;; esac # Finally, set the variable. os=\"$_\" OTHER Use read as an alternative to the sleep command Surprisingly, sleep is an external command and not a bash built-in.\nCAVEAT: Requires bash 4+\nExample Function:\nread_sleep() { # Usage: read_sleep 1 # read_sleep 0.2 read -rt \"$1\" \u003c\u003e \u003c(:) || : } Example Usage:\nread_sleep 1 read_sleep 0.1 read_sleep 30 For performance-critical situations, where it is not economic to open and close an excessive number of file descriptors, the allocation of a file descriptor may be done only once for all invocations of read:\n(See the generic original implementation at https://blog.dhampir.no/content/sleeping-without-a-subprocess-in-bash-and-how-to-sleep-forever)\nexec {sleep_fd}\u003c\u003e \u003c(:) while some_quick_test; do # equivalent of sleep 0.001 read -t 0.001 -u $sleep_fd done Check if a program is in the user’s PATH # There are 3 ways to do this and either one can be used. type -p executable_name \u0026\u003e/dev/null hash executable_name \u0026\u003e/dev/null command -v executable_name \u0026\u003e/dev/null # As a test. if type -p executable_name \u0026\u003e/dev/null; then # Program is in PATH. fi # Inverse. if ! type -p executable_name \u0026\u003e/dev/null; then # Program is not in PATH. fi # Example (Exit early if program is not installed). if ! type -p convert \u0026\u003e/dev/null; then printf '%s\\n' \"error: convert is not installed, exiting...\" exit 1 fi Get the current date using strftime Bash’s printf has a built-in method of getting the date which can be used in place of the date command.\nCAVEAT: Requires bash 4+\nExample Function:\ndate() { # Usage: date \"format\" # See: 'man strftime' for format. printf \"%($1)T\\\\n\" \"-1\" } Example Usage:\n# Using above function. $ date \"%a %d %b - %l:%M %p\" Fri 15 Jun - 10:00 AM # Using printf directly. $ printf '%(%a %d %b - %l:%M %p)T\\n' \"-1\" Fri 15 Jun - 10:00 AM # Assigning a variable using printf. $ printf -v date '%(%a %d %b - %l:%M %p)T\\n' '-1' $ printf '%s\\n' \"$date\" Fri 15 Jun - 10:00 AM Get the username of the current user CAVEAT: Requires bash 4.4+\n$ : \\\\u # Expand the parameter as if it were a prompt string. $ printf '%s\\n' \"${_@P}\" black Generate a UUID V4 CAVEAT: The generated value is not cryptographically secure.\nExample Function:\nuuid() { # Usage: uuid C=\"89ab\" for ((N=0;N\u003c16;++N)); do B=\"$((RANDOM%256))\" case \"$N\" in 6) printf '4%x' \"$((B%16))\" ;; 8) printf '%c%x' \"${C:$RANDOM%${#C}:1}\" \"$((B%16))\" ;; 3|5|7|9) printf '%02x-' \"$B\" ;; *) printf '%02x' \"$B\" ;; esac done printf '\\n' } Example Usage:\n$ uuid d5b6c731-1310-4c24-9fe3-55d556d44374 Progress bars This is a simple way of drawing progress bars without needing a for loopin the function itself.\nExample Function:\nbar() { # Usage: bar 1 10 # ^----- Elapsed Percentage (0-100). # ^-- Total length in chars. ((elapsed=$1*$2/100)) # Create the bar with spaces. printf -v prog \"%${elapsed}s\" printf -v total \"%$(($2-elapsed))s\" printf '%s\\r' \"[${prog// /-}${total}]\" } Example Usage:\nfor ((i=0;i\u003c=100;i++)); do # Pure bash micro sleeps (for the example). (:;:) \u0026\u0026 (:;:) \u0026\u0026 (:;:) \u0026\u0026 (:;:) \u0026\u0026 (:;:) # Print the bar. bar \"$i\" \"10\" done printf '\\n' Get the list of functions in a script get_functions() { # Usage: get_functions IFS=$'\\n' read -d \"\" -ra functions \u003c \u003c(declare -F) printf '%s\\n' \"${functions[@]//declare -f }\" } Bypass shell aliases # alias ls # command # shellcheck disable=SC1001 \\ls Bypass shell functions # function ls # command command ls 后台运行命令 This will run the given command and keep it running, even after the terminal or SSH connection is terminated. All output is ignored.\nbkr() { (nohup \"$@\" \u0026\u003e/dev/null \u0026) } bkr ./some_script.sh # some_script.sh is now running in the background AFTERWORD Thanks for reading! If this bible helped you in any way and you’d like to give back, consider donating. Donations give me the time to make this the best resource possible. Can’t donate? That’s OK, star the repo and share it with your friends!\n","wordCount":"3774","inLanguage":"en","datePublished":"2019-12-26T13:46:31+08:00","dateModified":"2019-12-26T13:46:31+08:00","author":{"@type":"Person","name":"王端端"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/shell/pure-bash-bible/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body class=dark id=top><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<script>localStorage.getItem("pref-theme")==="light"&&document.body.classList.remove("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org accesskey=h title="洞香春 (Alt + H)"><img src=/cowboy.ico alt=logo aria-label=logo height=35>洞香春</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/fe/ title=Frontend><span>Frontend</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/container/ title=k8s/docker><span>k8s/docker</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/shell/ title=Shell><span>Shell</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/shell/>Shells</a></div><h1 class=post-title>pure-bash-bible</h1><div class=post-meta><span title='2019-12-26 13:46:31 +0800 CST'>2019-12-26 13:46:31</span>&nbsp;·&nbsp;18 min&nbsp;·&nbsp;王端端&nbsp;&nbsp;| 本文总阅读量<span id=busuanzi_value_page_pv></span>次</div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2 aria-label=字符串>字符串</a><ul><li><a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%8c%85%e5%90%ab aria-label=字符串包含>字符串包含</a></li><li><a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%bc%80%e5%a7%8b aria-label=字符串开始>字符串开始</a></li><li><a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%bb%93%e5%b0%be aria-label=字符串结尾>字符串结尾</a></li></ul></li><li><a href=#%e5%be%aa%e7%8e%af aria-label=循环>循环</a><ul><li><a href=#%e6%95%b0%e5%ad%97%e8%8c%83%e5%9b%b4%e5%be%aa%e7%8e%af aria-label=数字范围循环>数字范围循环</a></li><li><a href=#%e5%8f%98%e9%87%8f%e5%be%aa%e7%8e%af aria-label=变量循环>变量循环</a></li><li><a href=#%e6%95%b0%e7%bb%84%e9%81%8d%e5%8e%86 aria-label=数组遍历>数组遍历</a></li><li><a href=#%e7%b4%a2%e5%bc%95%e9%81%8d%e5%8e%86 aria-label=索引遍历>索引遍历</a></li><li><a href=#%e6%96%87%e4%bb%b6%e6%88%96%e8%80%85%e7%9b%ae%e5%bd%95%e9%81%8d%e5%8e%86 aria-label=文件或者目录遍历>文件或者目录遍历</a></li></ul></li><li><a href=#%e6%96%87%e4%bb%b6%e5%a4%84%e7%90%86 aria-label=文件处理>文件处理</a><ul><li><a href=#%e5%b0%86%e6%96%87%e4%bb%b6%e8%af%bb%e5%8f%96%e4%b8%ba%e5%ad%97%e7%ac%a6%e4%b8%b2 aria-label=将文件读取为字符串>将文件读取为字符串</a></li><li><a href=#%e5%b0%86%e6%96%87%e4%bb%b6%e6%8c%89%e8%a1%8c%e8%af%bb%e5%8f%96%e6%88%90%e6%95%b0%e7%bb%84 aria-label=将文件按行读取成数组>将文件按行读取成数组</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e5%a4%b4%e9%83%a8%e7%9a%84-n-%e8%a1%8c aria-label="获取文件头部的 N 行">获取文件头部的 N 行</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e5%b0%be%e9%83%a8-n-%e8%a1%8c aria-label="获取尾部 N 行">获取尾部 N 行</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e8%a1%8c%e6%95%b0 aria-label=获取文件行数>获取文件行数</a></li><li><a href=#%e8%ae%a1%e7%ae%97%e6%96%87%e4%bb%b6%e6%88%96%e8%80%85%e6%96%87%e4%bb%b6%e5%a4%b9%e6%95%b0%e9%87%8f aria-label=计算文件或者文件夹数量>计算文件或者文件夹数量</a></li><li><a href=#%e5%88%9b%e5%bb%ba%e4%b8%b4%e6%97%b6%e6%96%87%e4%bb%b6 aria-label=创建临时文件>创建临时文件</a></li><li><a href=#%e5%9c%a8%e4%b8%a4%e4%b8%aa%e6%a0%87%e8%ae%b0%e4%b9%8b%e9%97%b4%e6%8a%bd%e5%8f%96-n-%e8%a1%8c aria-label="在两个标记之间抽取 N 行">在两个标记之间抽取 N 行</a></li></ul></li><li><a href=#%e6%96%87%e4%bb%b6%e8%b7%af%e5%be%84 aria-label=文件路径>文件路径</a><ul><li><a href=#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e7%9a%84%e7%9b%ae%e5%bd%95 aria-label=获取文件的目录>获取文件的目录</a></li><li><a href=#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e8%b7%af%e5%be%84%e7%9a%84-base-name aria-label="获取文件路径的 base-name">获取文件路径的 base-name</a></li></ul></li><li><a href=#%e5%8f%98%e9%87%8f aria-label=变量>变量</a><ul><li><a href=#%e5%8f%98%e9%87%8f%e5%a3%b0%e6%98%8e%e5%92%8c%e4%bd%bf%e7%94%a8 aria-label=变量声明和使用>变量声明和使用</a></li><li><a href=#%e5%9f%ba%e4%ba%8e%e5%8f%98%e9%87%8f%e5%91%bd%e5%90%8d%e5%8f%98%e9%87%8f aria-label=基于变量命名变量>基于变量命名变量</a></li></ul></li><li><a href=#escape-sequences aria-label="ESCAPE SEQUENCES">ESCAPE SEQUENCES</a><ul><li><a href=#%e6%96%87%e6%9c%ac%e9%a2%9c%e8%89%b2 aria-label=文本颜色>文本颜色</a></li><li><a href=#%e6%96%87%e6%9c%ac%e5%b1%9e%e6%80%a7 aria-label=文本属性>文本属性</a></li><li><a href=#%e5%85%89%e6%a0%87%e7%a7%bb%e5%8a%a8 aria-label=光标移动>光标移动</a></li><li><a href=#%e6%96%87%e6%9c%ac%e6%93%a6%e9%99%a4 aria-label=文本擦除>文本擦除</a></li></ul></li><li><a href=#%e5%8f%82%e6%95%b0%e5%b1%95%e5%bc%80 aria-label=参数展开>参数展开</a><ul><li><a href=#%e6%8c%87%e4%bb%a4 aria-label=指令>指令</a></li><li><a href=#%e6%9b%bf%e6%8d%a2 aria-label=替换>替换</a></li><li><a href=#%e9%95%bf%e5%ba%a6 aria-label=长度>长度</a></li><li><a href=#%e5%b1%95%e5%bc%80 aria-label=展开>展开</a></li><li><a href=#%e5%a4%a7%e5%b0%8f%e5%86%99%e4%bf%ae%e6%94%b9 aria-label=大小写修改>大小写修改</a></li><li><a href=#%e9%bb%98%e8%ae%a4%e5%80%bc aria-label=默认值>默认值</a></li></ul></li><li><a href=#%e5%a4%a7%e6%8b%ac%e5%8f%b7%e5%b1%95%e5%bc%80 aria-label=大括号展开>大括号展开</a><ul><li><a href=#%e8%8c%83%e5%9b%b4 aria-label=范围>范围</a></li><li><a href=#%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%88%97%e8%a1%a8 aria-label=字符串列表>字符串列表</a></li></ul></li><li><a href=#%e6%9d%a1%e4%bb%b6%e8%a1%a8%e8%be%be%e5%bc%8f aria-label=条件表达式>条件表达式</a><ul><li><a href=#%e6%96%87%e4%bb%b6%e6%9d%a1%e4%bb%b6%e5%88%a4%e6%96%ad aria-label=文件条件判断>文件条件判断</a></li><li><a href=#%e6%96%87%e4%bb%b6%e6%af%94%e8%be%83 aria-label=文件比较>文件比较</a></li><li><a href=#%e5%8f%98%e9%87%8f%e6%b5%8b%e8%af%95 aria-label=变量测试>变量测试</a></li><li><a href=#%e5%8f%98%e9%87%8f%e6%af%94%e8%be%83 aria-label=变量比较>变量比较</a></li></ul></li><li><a href=#%e7%ae%97%e6%95%b0%e6%93%8d%e4%bd%9c aria-label=算数操作>算数操作</a><ul><li><a href=#%e8%b5%8b%e5%80%bc aria-label=赋值>赋值</a></li><li><a href=#%e7%ae%97%e6%95%b0 aria-label=算数>算数</a></li><li><a href=#%e4%bd%8d%e6%93%8d%e4%bd%9c aria-label=位操作>位操作</a></li><li><a href=#%e9%80%bb%e8%be%91 aria-label=逻辑>逻辑</a></li><li><a href=#miscellaneous aria-label=Miscellaneous>Miscellaneous</a></li></ul></li><li><a href=#arithmetic aria-label=ARITHMETIC>ARITHMETIC</a><ul><li><a href=#simpler-syntax-to-set-variables aria-label="Simpler syntax to set variables">Simpler syntax to set variables</a></li><li><a href=#ternary-tests aria-label="Ternary Tests">Ternary Tests</a></li></ul></li><li><a href=#traps aria-label=TRAPS>TRAPS</a><ul><li><a href=#do-something-on-script-exit aria-label="Do something on script exit">Do something on script exit</a></li><li><a href=#ignore-terminal-interrupt-ctrlc-sigint aria-label="Ignore terminal interrupt (CTRL+C, SIGINT)">Ignore terminal interrupt (CTRL+C, SIGINT)</a></li><li><a href=#react-to-window-resize aria-label="React to window resize">React to window resize</a></li><li><a href=#do-something-before-every-command aria-label="Do something before every command">Do something before every command</a></li><li><a href=#do-something-when-a-shell-function-or-a-sourced-file-finishes-executing aria-label="Do something when a shell function or a sourced file finishes executing">Do something when a shell function or a sourced file finishes executing</a></li></ul></li><li><a href=#performance aria-label=PERFORMANCE>PERFORMANCE</a><ul><li><a href=#disable-unicode aria-label="Disable Unicode">Disable Unicode</a></li></ul></li><li><a href=#obsolete-syntax aria-label="OBSOLETE SYNTAX">OBSOLETE SYNTAX</a><ul><li><a href=#shebang aria-label=Shebang>Shebang</a></li><li><a href=#command-substitution aria-label="Command Substitution">Command Substitution</a></li><li><a href=#function-declaration aria-label="Function Declaration">Function Declaration</a></li></ul></li><li><a href=#internal-variables aria-label="INTERNAL VARIABLES">INTERNAL VARIABLES</a><ul><li><a href=#get-the-location-to-the-bash-binary aria-label="Get the location to the bash binary">Get the location to the <code>bash</code> binary</a></li><li><a href=#get-the-version-of-the-current-running-bash-process aria-label="Get the version of the current running bash process">Get the version of the current running <code>bash</code> process</a></li><li><a href=#open-the-users-preferred-text-editor aria-label="Open the user&amp;rsquo;s preferred text editor">Open the user&rsquo;s preferred text editor</a></li><li><a href=#get-the-name-of-the-current-function aria-label="Get the name of the current function">Get the name of the current function</a></li><li><a href=#get-the-host-name-of-the-system aria-label="Get the host-name of the system">Get the host-name of the system</a></li><li><a href=#get-the-architecture-of-the-operating-system aria-label="Get the architecture of the Operating System">Get the architecture of the Operating System</a></li><li><a href=#get-the-name-of-the-operating-system--kernel aria-label="Get the name of the Operating System / Kernel">Get the name of the Operating System / Kernel</a></li><li><a href=#get-the-current-working-directory aria-label="Get the current working directory">Get the current working directory</a></li><li><a href=#get-the-number-of-seconds-the-script-has-been-running aria-label="Get the number of seconds the script has been running">Get the number of seconds the script has been running</a></li><li><a href=#get-a-pseudorandom-integer aria-label="Get a pseudorandom integer">Get a pseudorandom integer</a></li></ul></li><li><a href=#information-about-the-terminal aria-label="INFORMATION ABOUT THE TERMINAL">INFORMATION ABOUT THE TERMINAL</a><ul><li><a href=#get-the-terminal-size-in-lines-and-columns-_from-a-script_ aria-label="Get the terminal size in lines and columns (from a script)">Get the terminal size in lines and columns (<em>from a script</em>)</a></li><li><a href=#get-the-terminal-size-in-pixels aria-label="Get the terminal size in pixels">Get the terminal size in pixels</a></li><li><a href=#get-the-current-cursor-position aria-label="Get the current cursor position">Get the current cursor position</a></li></ul></li><li><a href=#conversion aria-label=CONVERSION>CONVERSION</a><ul><li><a href=#convert-a-hex-color-to-rgb aria-label="Convert a hex color to RGB">Convert a hex color to RGB</a></li><li><a href=#convert-an-rgb-color-to-hex aria-label="Convert an RGB color to hex">Convert an RGB color to hex</a></li></ul></li><li><a href=#code-golf aria-label="CODE GOLF">CODE GOLF</a><ul><li><a href=#shorter-for-loop-syntax aria-label="Shorter for loop syntax">Shorter <code>for</code> loop syntax</a></li><li><a href=#shorter-infinite-loops aria-label="Shorter infinite loops">Shorter infinite loops</a></li><li><a href=#shorter-function-declaration aria-label="Shorter function declaration">Shorter function declaration</a></li><li><a href=#shorter-if-syntax aria-label="Shorter if syntax">Shorter <code>if</code> syntax</a></li><li><a href=#simpler-case-statement-to-set-variable aria-label="Simpler case statement to set variable">Simpler <code>case</code> statement to set variable</a></li></ul></li><li><a href=#other aria-label=OTHER>OTHER</a><ul><li><a href=#use-read-as-an-alternative-to-the-sleep-command aria-label="Use read as an alternative to the sleep command">Use <code>read</code> as an alternative to the <code>sleep</code> command</a></li><li><a href=#check-if-a-program-is-in-the-users-path aria-label="Check if a program is in the user&amp;rsquo;s PATH">Check if a program is in the user&rsquo;s PATH</a></li><li><a href=#get-the-current-date-using-strftime aria-label="Get the current date using strftime">Get the current date using <code>strftime</code></a></li><li><a href=#get-the-username-of-the-current-user aria-label="Get the username of the current user">Get the username of the current user</a></li><li><a href=#generate-a-uuid-v4 aria-label="Generate a UUID V4">Generate a UUID V4</a></li><li><a href=#progress-bars aria-label="Progress bars">Progress bars</a></li><li><a href=#get-the-list-of-functions-in-a-script aria-label="Get the list of functions in a script">Get the list of functions in a script</a></li><li><a href=#bypass-shell-aliases aria-label="Bypass shell aliases">Bypass shell aliases</a></li><li><a href=#bypass-shell-functions aria-label="Bypass shell functions">Bypass shell functions</a></li><li><a href=#%e5%90%8e%e5%8f%b0%e8%bf%90%e8%a1%8c%e5%91%bd%e4%bb%a4 aria-label=后台运行命令>后台运行命令</a></li></ul></li><li><a href=#afterword aria-label=AFTERWORD>AFTERWORD</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=字符串>字符串<a hidden class=anchor aria-hidden=true href=#字符串>#</a></h1><h2 id=字符串包含>字符串包含<a hidden class=anchor aria-hidden=true href=#字符串包含>#</a></h2><p><strong>Using a test:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $var <span style=color:#f92672>==</span> *sub_string* <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;sub_string is in var.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Inverse (substring not in string).</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $var !<span style=color:#f92672>=</span> *sub_string* <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;sub_string is not in var.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># This works for arrays too!</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#e6db74>${</span>arr[*]<span style=color:#e6db74>}</span> <span style=color:#f92672>==</span> *sub_string* <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;sub_string is in array.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><p><strong>Using a case statement:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span>$var<span style=color:#e6db74>&#34;</span> in
</span></span><span style=display:flex><span>    *sub_string*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Do stuff</span>
</span></span><span style=display:flex><span>    ;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    *sub_string2*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Do more stuff</span>
</span></span><span style=display:flex><span>    ;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    *<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># Else</span>
</span></span><span style=display:flex><span>    ;;
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span></code></pre></div><h2 id=字符串开始>字符串开始<a hidden class=anchor aria-hidden=true href=#字符串开始>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $var <span style=color:#f92672>==</span> sub_string* <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;var starts with sub_string.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Inverse (var does not start with sub_string).</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $var !<span style=color:#f92672>=</span> sub_string* <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;var does not start with sub_string.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h2 id=字符串结尾>字符串结尾<a hidden class=anchor aria-hidden=true href=#字符串结尾>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $var <span style=color:#f92672>==</span> *sub_string <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;var ends with sub_string.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Inverse (var does not end with sub_string).</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $var !<span style=color:#f92672>=</span> *sub_string <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;var does not end with sub_string.&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h1 id=循环>循环<a hidden class=anchor aria-hidden=true href=#循环>#</a></h1><h2 id=数字范围循环>数字范围循环<a hidden class=anchor aria-hidden=true href=#数字范围循环>#</a></h2><p>Alternative to <code>seq</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Loop from 0-100 (no variable support).</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>0..100<span style=color:#f92672>}</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h2 id=变量循环>变量循环<a hidden class=anchor aria-hidden=true href=#变量循环>#</a></h2><p>Alternative to <code>seq</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Loop from 0-VAR.</span>
</span></span><span style=display:flex><span>VAR<span style=color:#f92672>=</span><span style=color:#ae81ff>50</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>((</span>i<span style=color:#f92672>=</span>0;i&lt;<span style=color:#f92672>=</span>VAR;i++<span style=color:#f92672>))</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h2 id=数组遍历>数组遍历<a hidden class=anchor aria-hidden=true href=#数组遍历>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>arr<span style=color:#f92672>=(</span>apples oranges tomatoes<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Just elements.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> element in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>arr[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$element<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h2 id=索引遍历>索引遍历<a hidden class=anchor aria-hidden=true href=#索引遍历>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>arr<span style=color:#f92672>=(</span>apples oranges tomatoes<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Elements and index.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>!arr[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>arr[i]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Alternative method.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>((</span>i<span style=color:#f92672>=</span>0;i&lt;<span style=color:#e6db74>${#</span>arr[@]<span style=color:#e6db74>}</span>;i++<span style=color:#f92672>))</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>arr[i]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h2 id=文件或者目录遍历>文件或者目录遍历<a hidden class=anchor aria-hidden=true href=#文件或者目录遍历>#</a></h2><p>Don’t use <code>ls</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Greedy example.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> file in *; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># PNG files in dir.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> file in ~/Pictures/*.png; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Iterate over directories.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> dir in ~/Downloads/*/; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$dir<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Brace Expansion.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> file in /path/to/parentdir/<span style=color:#f92672>{</span>file1,file2,subdir/file3<span style=color:#f92672>}</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Iterate recursively.</span>
</span></span><span style=display:flex><span>shopt -s globstar
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> file in ~/Pictures/**/*; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>shopt -u globstar
</span></span></code></pre></div><h1 id=heading><a hidden class=anchor aria-hidden=true href=#heading>#</a></h1><h1 id=文件处理>文件处理<a hidden class=anchor aria-hidden=true href=#文件处理>#</a></h1><p><strong>CAVEAT:</strong> <code>bash</code> does not handle binary data properly in versions <code>&lt; 4.4</code>.</p><h2 id=将文件读取为字符串>将文件读取为字符串<a hidden class=anchor aria-hidden=true href=#将文件读取为字符串>#</a></h2><p>Alternative to the <code>cat</code> command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>file_data<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>&lt;<span style=color:#e6db74>&#34;file&#34;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=将文件按行读取成数组>将文件按行读取成数组<a hidden class=anchor aria-hidden=true href=#将文件按行读取成数组>#</a></h2><p>Alternative to the <code>cat</code> command.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Bash &lt;4 (discarding empty lines).</span>
</span></span><span style=display:flex><span>IFS<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\n&#39;</span> read -d <span style=color:#e6db74>&#34;&#34;</span> -ra file_data &lt; <span style=color:#e6db74>&#34;file&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Bash &lt;4 (preserving empty lines).</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> read -r line; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    file_data<span style=color:#f92672>+=(</span><span style=color:#e6db74>&#34;</span>$line<span style=color:#e6db74>&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span> &lt; <span style=color:#e6db74>&#34;file&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Bash 4+</span>
</span></span><span style=display:flex><span>mapfile -t file_data &lt; <span style=color:#e6db74>&#34;file&#34;</span>
</span></span></code></pre></div><h2 id=获取文件头部的-n-行>获取文件头部的 N 行<a hidden class=anchor aria-hidden=true href=#获取文件头部的-n-行>#</a></h2><p>Alternative to the <code>head</code> command.</p><p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>head<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: head &#34;n&#34; &#34;file&#34;</span>
</span></span><span style=display:flex><span>    mapfile -tn <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> line &lt; <span style=color:#e6db74>&#34;</span>$2<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>line[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ head <span style=color:#ae81ff>2</span> ~/.bashrc
</span></span><span style=display:flex><span><span style=color:#75715e># Prompt</span>
</span></span><span style=display:flex><span>PS1<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;➜ &#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ head <span style=color:#ae81ff>1</span> ~/.bashrc
</span></span><span style=display:flex><span><span style=color:#75715e># Prompt</span>
</span></span></code></pre></div><h2 id=获取尾部-n-行>获取尾部 N 行<a hidden class=anchor aria-hidden=true href=#获取尾部-n-行>#</a></h2><p>Alternative to the <code>tail</code> command.</p><p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>tail<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: tail &#34;n&#34; &#34;file&#34;</span>
</span></span><span style=display:flex><span>    mapfile -tn <span style=color:#ae81ff>0</span> line &lt; <span style=color:#e6db74>&#34;</span>$2<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>line[@]: -$1<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tail <span style=color:#ae81ff>2</span> ~/.bashrc
</span></span><span style=display:flex><span><span style=color:#75715e># Enable tmux.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># [[ -z &#34;$TMUX&#34;  ]] &amp;&amp; exec tmux</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ tail <span style=color:#ae81ff>1</span> ~/.bashrc
</span></span><span style=display:flex><span><span style=color:#75715e># [[ -z &#34;$TMUX&#34;  ]] &amp;&amp; exec tmux</span>
</span></span></code></pre></div><h2 id=获取文件行数>获取文件行数<a hidden class=anchor aria-hidden=true href=#获取文件行数>#</a></h2><p>Alternative to <code>wc -l</code>.</p><p><strong>Example Function (bash 4):</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lines<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: lines &#34;file&#34;</span>
</span></span><span style=display:flex><span>    mapfile -tn <span style=color:#ae81ff>0</span> lines &lt; <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${#</span>lines[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Function (bash 3):</strong></p><p>This method uses less memory than the <code>mapfile</code> method and works in <code>bash</code> 3 but it is slower for bigger files.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>lines_loop<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: lines_loop &#34;file&#34;</span>
</span></span><span style=display:flex><span>    count<span style=color:#f92672>=</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> IFS<span style=color:#f92672>=</span> read -r _; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>((</span>count++<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>done</span> &lt; <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$count<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ lines ~/.bashrc
</span></span><span style=display:flex><span><span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ lines_loop ~/.bashrc
</span></span><span style=display:flex><span><span style=color:#ae81ff>48</span>
</span></span></code></pre></div><h2 id=计算文件或者文件夹数量>计算文件或者文件夹数量<a hidden class=anchor aria-hidden=true href=#计算文件或者文件夹数量>#</a></h2><p>This works by passing the output of the glob to the function and then counting the number of arguments.</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>count<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: count /path/to/dir/*</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#        count /path/to/dir/*/</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$#<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Count all files in dir.</span>
</span></span><span style=display:flex><span>$ count ~/Downloads/*
</span></span><span style=display:flex><span><span style=color:#ae81ff>232</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Count all dirs in dir.</span>
</span></span><span style=display:flex><span>$ count ~/Downloads/*/
</span></span><span style=display:flex><span><span style=color:#ae81ff>45</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Count all jpg files in dir.</span>
</span></span><span style=display:flex><span>$ count ~/Pictures/*.jpg
</span></span><span style=display:flex><span><span style=color:#ae81ff>64</span>
</span></span></code></pre></div><h2 id=创建临时文件>创建临时文件<a hidden class=anchor aria-hidden=true href=#创建临时文件>#</a></h2><p>Alternative to <code>touch</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Shortest.</span>
</span></span><span style=display:flex><span>&gt;file
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Longer alternatives:</span>
</span></span><span style=display:flex><span>:&gt;file
</span></span><span style=display:flex><span>echo -n &gt;file
</span></span><span style=display:flex><span>printf <span style=color:#e6db74>&#39;&#39;</span> &gt;file
</span></span></code></pre></div><h2 id=在两个标记之间抽取-n-行>在两个标记之间抽取 N 行<a hidden class=anchor aria-hidden=true href=#在两个标记之间抽取-n-行>#</a></h2><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>extract<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: extract file &#34;opening marker&#34; &#34;closing marker&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>while</span> IFS<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\n&#39;</span> read -r line; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[[</span> $extract <span style=color:#f92672>&amp;&amp;</span> $line !<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span>$3<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>            printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$line<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[[</span> $line <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;</span>$2<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> extract<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>[[</span> $line <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;</span>$3<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> extract<span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>done</span> &lt; <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Extract code blocks from MarkDown file.</span>
</span></span><span style=display:flex><span>$ extract ~/projects/pure-bash/README.md <span style=color:#e6db74>&#39;```sh&#39;</span> <span style=color:#e6db74>&#39;```&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Output here...</span>
</span></span></code></pre></div><h1 id=heading-1><a hidden class=anchor aria-hidden=true href=#heading-1>#</a></h1><h1 id=文件路径>文件路径<a hidden class=anchor aria-hidden=true href=#文件路径>#</a></h1><h2 id=获取文件的目录>获取文件的目录<a hidden class=anchor aria-hidden=true href=#获取文件的目录>#</a></h2><p>Alternative to the <code>dirname</code> command.</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>dirname<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: dirname &#34;path&#34;</span>
</span></span><span style=display:flex><span>    local tmp<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>1<span style=color:#66d9ef>:-</span>.<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[[</span> $tmp !<span style=color:#f92672>=</span> *<span style=color:#f92672>[</span>!/<span style=color:#f92672>]</span>* <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        printf <span style=color:#e6db74>&#39;/\n&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tmp<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>tmp%%<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>tmp##*[!/]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>[[</span> $tmp !<span style=color:#f92672>=</span> */* <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        printf <span style=color:#e6db74>&#39;.\n&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tmp<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>tmp%/*<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>    tmp<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>tmp%%<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>tmp##*[!/]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>tmp<span style=color:#66d9ef>:-</span>/<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ dirname ~/Pictures/Wallpapers/1.jpg
</span></span><span style=display:flex><span>/home/black/Pictures/Wallpapers
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ dirname ~/Pictures/Downloads/
</span></span><span style=display:flex><span>/home/black/Pictures
</span></span></code></pre></div><h2 id=获取文件路径的-base-name>获取文件路径的 base-name<a hidden class=anchor aria-hidden=true href=#获取文件路径的-base-name>#</a></h2><p>Alternative to the <code>basename</code> command.</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>basename<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: basename &#34;path&#34; [&#34;suffix&#34;]</span>
</span></span><span style=display:flex><span>    local tmp
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    tmp<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>1%<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>1##*[!/]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>    tmp<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>tmp##*/<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>    tmp<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>tmp%<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>2/<span style=color:#e6db74>&#34;</span>$tmp<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>tmp<span style=color:#66d9ef>:-</span>/<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ basename ~/Pictures/Wallpapers/1.jpg
</span></span><span style=display:flex><span>1.jpg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ basename ~/Pictures/Wallpapers/1.jpg .jpg
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ basename ~/Pictures/Downloads/
</span></span><span style=display:flex><span>Downloads
</span></span></code></pre></div><h1 id=变量>变量<a hidden class=anchor aria-hidden=true href=#变量>#</a></h1><h2 id=变量声明和使用>变量声明和使用<a hidden class=anchor aria-hidden=true href=#变量声明和使用>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ hello_world<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create the variable name.</span>
</span></span><span style=display:flex><span>$ var<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;world&#34;</span>
</span></span><span style=display:flex><span>$ ref<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;hello_</span>$var<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Print the value of the variable name stored in &#39;hello_$var&#39;.</span>
</span></span><span style=display:flex><span>$ printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>!ref<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>value
</span></span></code></pre></div><p>Alternatively, on <code>bash</code> 4.3+:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ hello_world<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;value&#34;</span>
</span></span><span style=display:flex><span>$ var<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;world&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Declare a nameref.</span>
</span></span><span style=display:flex><span>$ declare -n ref<span style=color:#f92672>=</span>hello_$var
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$ref<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>value
</span></span></code></pre></div><h2 id=基于变量命名变量>基于变量命名变量<a hidden class=anchor aria-hidden=true href=#基于变量命名变量>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ var<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;world&#34;</span>
</span></span><span style=display:flex><span>$ declare <span style=color:#e6db74>&#34;hello_</span>$var<span style=color:#e6db74>=value&#34;</span>
</span></span><span style=display:flex><span>$ printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$hello_world<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>value
</span></span></code></pre></div><h1 id=heading-2><a hidden class=anchor aria-hidden=true href=#heading-2>#</a></h1><h1 id=escape-sequences>ESCAPE SEQUENCES<a hidden class=anchor aria-hidden=true href=#escape-sequences>#</a></h1><p>Contrary to popular belief, there is no issue in utilizing raw escape sequences. Using <code>tput</code> abstracts the same ANSI sequences as if printed manually. Worse still, <code>tput</code> is not actually portable. There are a number of <code>tput</code> variants each with different commands and syntaxes (<em>try <code>tput setaf 3</code> on a FreeBSD system</em>). Raw sequences are fine.</p><h2 id=文本颜色>文本颜色<a hidden class=anchor aria-hidden=true href=#文本颜色>#</a></h2><p><strong>NOTE:</strong> Sequences requiring RGB values only work in True-Color Terminal Emulators.</p><table><thead><tr><th>Sequence</th><th>What does it do?</th><th>Value</th></tr></thead><tbody><tr><td><code>\e[38;5;&lt;NUM>m</code></td><td>Set text foreground color.</td><td><code>0-255</code></td></tr><tr><td><code>\e[48;5;&lt;NUM>m</code></td><td>Set text background color.</td><td><code>0-255</code></td></tr><tr><td><code>\e[38;2;&lt;R>;&lt;G>;&lt;B>m</code></td><td>Set text foreground color to RGB color.</td><td><code>R</code>, <code>G</code>, <code>B</code></td></tr><tr><td><code>\e[48;2;&lt;R>;&lt;G>;&lt;B>m</code></td><td>Set text background color to RGB color.</td><td><code>R</code>, <code>G</code>, <code>B</code></td></tr></tbody></table><h2 id=文本属性>文本属性<a hidden class=anchor aria-hidden=true href=#文本属性>#</a></h2><p><strong>NOTE:</strong> Prepend 2 to any code below to turn it&rsquo;s effect off(examples: 21=bold text off, 22=faint text off, 23=italic text off).</p><table><thead><tr><th>Sequence</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>\e[m</code></td><td>Reset text formatting and colors.</td></tr><tr><td><code>\e[1m</code></td><td>Bold text.</td></tr><tr><td><code>\e[2m</code></td><td>Faint text.</td></tr><tr><td><code>\e[3m</code></td><td>Italic text.</td></tr><tr><td><code>\e[4m</code></td><td>Underline text.</td></tr><tr><td><code>\e[5m</code></td><td>Blinking text.</td></tr><tr><td><code>\e[7m</code></td><td>Highlighted text.</td></tr><tr><td><code>\e[8m</code></td><td>Hidden text.</td></tr><tr><td><code>\e[9m</code></td><td>Strike-through text.</td></tr></tbody></table><h2 id=光标移动>光标移动<a hidden class=anchor aria-hidden=true href=#光标移动>#</a></h2><table><thead><tr><th>Sequence</th><th>What does it do?</th><th>Value</th></tr></thead><tbody><tr><td><code>\e[&lt;LINE>;&lt;COLUMN>H</code></td><td>Move cursor to absolute position.</td><td><code>line</code>, <code>column</code></td></tr><tr><td><code>\e[H</code></td><td>Move cursor to home position (<code>0,0</code>).</td><td></td></tr><tr><td><code>\e[&lt;NUM>A</code></td><td>Move cursor up N lines.</td><td><code>num</code></td></tr><tr><td><code>\e[&lt;NUM>B</code></td><td>Move cursor down N lines.</td><td><code>num</code></td></tr><tr><td><code>\e[&lt;NUM>C</code></td><td>Move cursor right N columns.</td><td><code>num</code></td></tr><tr><td><code>\e[&lt;NUM>D</code></td><td>Move cursor left N columns.</td><td><code>num</code></td></tr><tr><td><code>\e[s</code></td><td>Save cursor position.</td><td></td></tr><tr><td><code>\e[u</code></td><td>Restore cursor position.</td><td></td></tr></tbody></table><h2 id=文本擦除>文本擦除<a hidden class=anchor aria-hidden=true href=#文本擦除>#</a></h2><table><thead><tr><th>Sequence</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>\e[K</code></td><td>Erase from cursor position to end of line.</td></tr><tr><td><code>\e[1K</code></td><td>Erase from cursor position to start of line.</td></tr><tr><td><code>\e[2K</code></td><td>Erase the entire current line.</td></tr><tr><td><code>\e[J</code></td><td>Erase from the current line to the bottom of the screen.</td></tr><tr><td><code>\e[1J</code></td><td>Erase from the current line to the top of the screen.</td></tr><tr><td><code>\e[2J</code></td><td>Clear the screen.</td></tr><tr><td><code>\e[2J\e[H</code></td><td>Clear the screen and move cursor to <code>0,0</code>.</td></tr></tbody></table><h1 id=heading-3><a hidden class=anchor aria-hidden=true href=#heading-3>#</a></h1><h1 id=参数展开>参数展开<a hidden class=anchor aria-hidden=true href=#参数展开>#</a></h1><h2 id=指令>指令<a hidden class=anchor aria-hidden=true href=#指令>#</a></h2><table><thead><tr><th>Parameter</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>${!VAR}</code></td><td>Access a variable based on the value of <code>VAR</code>.</td></tr><tr><td><code>${!VAR*}</code></td><td>Expand to <code>IFS</code> separated list of variable names starting with <code>VAR</code>.</td></tr><tr><td><code>${!VAR@}</code></td><td>Expand to <code>IFS</code> separated list of variable names starting with <code>VAR</code>. If double-quoted, each variable name expands to a separate word.</td></tr></tbody></table><h2 id=替换>替换<a hidden class=anchor aria-hidden=true href=#替换>#</a></h2><table><thead><tr><th>Parameter</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>${VAR#PATTERN}</code></td><td>Remove shortest match of pattern from start of string.</td></tr><tr><td><code>${VAR##PATTERN}</code></td><td>Remove longest match of pattern from start of string.</td></tr><tr><td><code>${VAR%PATTERN}</code></td><td>Remove shortest match of pattern from end of string.</td></tr><tr><td><code>${VAR%%PATTERN}</code></td><td>Remove longest match of pattern from end of string.</td></tr><tr><td><code>${VAR/PATTERN/REPLACE}</code></td><td>Replace first match with string.</td></tr><tr><td><code>${VAR//PATTERN/REPLACE}</code></td><td>Replace all matches with string.</td></tr><tr><td><code>${VAR/PATTERN}</code></td><td>Remove first match.</td></tr><tr><td><code>${VAR//PATTERN}</code></td><td>Remove all matches.</td></tr></tbody></table><h2 id=长度>长度<a hidden class=anchor aria-hidden=true href=#长度>#</a></h2><table><thead><tr><th>Parameter</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>${#VAR}</code></td><td>Length of var in characters.</td></tr><tr><td><code>${#ARR[@]}</code></td><td>Length of array in elements.</td></tr></tbody></table><h2 id=展开>展开<a hidden class=anchor aria-hidden=true href=#展开>#</a></h2><table><thead><tr><th>Parameter</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>${VAR:OFFSET}</code></td><td>Remove first <code>N</code> chars from variable.</td></tr><tr><td><code>${VAR:OFFSET:LENGTH}</code></td><td>Get substring from <code>N</code> character to <code>N</code> character. (<code>${VAR:10:10}</code>: Get sub-string from char <code>10</code> to char <code>20</code>)</td></tr><tr><td><code>${VAR:: OFFSET}</code></td><td>Get first <code>N</code> chars from variable.</td></tr><tr><td><code>${VAR:: -OFFSET}</code></td><td>Remove last <code>N</code> chars from variable.</td></tr><tr><td><code>${VAR: -OFFSET}</code></td><td>Get last <code>N</code> chars from variable.</td></tr><tr><td><code>${VAR:OFFSET:-OFFSET}</code></td><td>Cut first <code>N</code> chars and last <code>N</code> chars.</td></tr></tbody></table><h2 id=大小写修改>大小写修改<a hidden class=anchor aria-hidden=true href=#大小写修改>#</a></h2><table><thead><tr><th>Parameter</th><th>What does it do?</th><th>CAVEAT</th></tr></thead><tbody><tr><td><code>${VAR^}</code></td><td>Uppercase first character.</td><td><code>bash 4+</code></td></tr><tr><td><code>${VAR^^}</code></td><td>Uppercase all characters.</td><td><code>bash 4+</code></td></tr><tr><td><code>${VAR,}</code></td><td>Lowercase first character.</td><td><code>bash 4+</code></td></tr><tr><td><code>${VAR,,}</code></td><td>Lowercase all characters.</td><td><code>bash 4+</code></td></tr><tr><td><code>${VAR~}</code></td><td>Reverse case of first character.</td><td><code>bash 4+</code></td></tr><tr><td><code>${VAR~~}</code></td><td>Reverse case of all characters.</td><td><code>bash 4+</code></td></tr></tbody></table><h2 id=默认值>默认值<a hidden class=anchor aria-hidden=true href=#默认值>#</a></h2><table><thead><tr><th>Parameter</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>${VAR:-STRING}</code></td><td>If <code>VAR</code> is empty or unset, use <code>STRING</code> as its value.</td></tr><tr><td><code>${VAR-STRING}</code></td><td>If <code>VAR</code> is unset, use <code>STRING</code> as its value.</td></tr><tr><td><code>${VAR:=STRING}</code></td><td>If <code>VAR</code> is empty or unset, set the value of <code>VAR</code> to <code>STRING</code>.</td></tr><tr><td><code>${VAR=STRING}</code></td><td>If <code>VAR</code> is unset, set the value of <code>VAR</code> to <code>STRING</code>.</td></tr><tr><td><code>${VAR:+STRING}</code></td><td>If <code>VAR</code> is not empty, use <code>STRING</code> as its value.</td></tr><tr><td><code>${VAR+STRING}</code></td><td>If <code>VAR</code> is set, use <code>STRING</code> as its value.</td></tr><tr><td><code>${VAR:?STRING}</code></td><td>Display an error if empty or unset.</td></tr><tr><td><code>${VAR?STRING}</code></td><td>Display an error if unset.</td></tr></tbody></table><h1 id=heading-4><a hidden class=anchor aria-hidden=true href=#heading-4>#</a></h1><h1 id=大括号展开>大括号展开<a hidden class=anchor aria-hidden=true href=#大括号展开>#</a></h1><h2 id=范围>范围<a hidden class=anchor aria-hidden=true href=#范围>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Syntax: {&lt;START&gt;..&lt;END&gt;}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Print numbers 1-100.</span>
</span></span><span style=display:flex><span>echo <span style=color:#f92672>{</span>1..100<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Print range of floats.</span>
</span></span><span style=display:flex><span>echo 1.<span style=color:#f92672>{</span>1..9<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Print chars a-z.</span>
</span></span><span style=display:flex><span>echo <span style=color:#f92672>{</span>a..z<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>echo <span style=color:#f92672>{</span>A..Z<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Nesting.</span>
</span></span><span style=display:flex><span>echo <span style=color:#f92672>{</span>A..Z<span style=color:#f92672>}{</span>0..9<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Print zero-padded numbers.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># CAVEAT: bash 4+</span>
</span></span><span style=display:flex><span>echo <span style=color:#f92672>{</span>01..100<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Change increment amount.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Syntax: {&lt;START&gt;..&lt;END&gt;..&lt;INCREMENT&gt;}</span>
</span></span><span style=display:flex><span><span style=color:#75715e># CAVEAT: bash 4+</span>
</span></span><span style=display:flex><span>echo <span style=color:#f92672>{</span>1..10..2<span style=color:#f92672>}</span> <span style=color:#75715e># Increment by 2.</span>
</span></span></code></pre></div><h2 id=字符串列表>字符串列表<a hidden class=anchor aria-hidden=true href=#字符串列表>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>echo <span style=color:#f92672>{</span>apples,oranges,pears,grapes<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Example Usage:</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Remove dirs Movies, Music and ISOS from ~/Downloads/.</span>
</span></span><span style=display:flex><span>rm -rf ~/Downloads/<span style=color:#f92672>{</span>Movies,Music,ISOS<span style=color:#f92672>}</span>
</span></span></code></pre></div><h1 id=heading-5><a hidden class=anchor aria-hidden=true href=#heading-5>#</a></h1><h1 id=条件表达式>条件表达式<a hidden class=anchor aria-hidden=true href=#条件表达式>#</a></h1><h2 id=文件条件判断>文件条件判断<a hidden class=anchor aria-hidden=true href=#文件条件判断>#</a></h2><table><thead><tr><th>Expression</th><th>Value</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>-a</code></td><td><code>file</code></td><td>If file exists.</td></tr><tr><td><code>-b</code></td><td><code>file</code></td><td>If file exists and is a block special file.</td></tr><tr><td><code>-c</code></td><td><code>file</code></td><td>If file exists and is a character special file.</td></tr><tr><td><code>-d</code></td><td><code>file</code></td><td>If file exists and is a directory.</td></tr><tr><td><code>-e</code></td><td><code>file</code></td><td>If file exists.</td></tr><tr><td><code>-f</code></td><td><code>file</code></td><td>If file exists and is a regular file.</td></tr><tr><td><code>-g</code></td><td><code>file</code></td><td>If file exists and its set-group-id bit is set.</td></tr><tr><td><code>-h</code></td><td><code>file</code></td><td>If file exists and is a symbolic link.</td></tr><tr><td><code>-k</code></td><td><code>file</code></td><td>If file exists and its sticky-bit is set</td></tr><tr><td><code>-p</code></td><td><code>file</code></td><td>If file exists and is a named pipe (<em>FIFO</em>).</td></tr><tr><td><code>-r</code></td><td><code>file</code></td><td>If file exists and is readable.</td></tr><tr><td><code>-s</code></td><td><code>file</code></td><td>If file exists and its size is greater than zero.</td></tr><tr><td><code>-t</code></td><td><code>fd</code></td><td>If file descriptor is open and refers to a terminal.</td></tr><tr><td><code>-u</code></td><td><code>file</code></td><td>If file exists and its set-user-id bit is set.</td></tr><tr><td><code>-w</code></td><td><code>file</code></td><td>If file exists and is writable.</td></tr><tr><td><code>-x</code></td><td><code>file</code></td><td>If file exists and is executable.</td></tr><tr><td><code>-G</code></td><td><code>file</code></td><td>If file exists and is owned by the effective group ID.</td></tr><tr><td><code>-L</code></td><td><code>file</code></td><td>If file exists and is a symbolic link.</td></tr><tr><td><code>-N</code></td><td><code>file</code></td><td>If file exists and has been modified since last read.</td></tr><tr><td><code>-O</code></td><td><code>file</code></td><td>If file exists and is owned by the effective user ID.</td></tr><tr><td><code>-S</code></td><td><code>file</code></td><td>If file exists and is a socket.</td></tr></tbody></table><h2 id=文件比较>文件比较<a hidden class=anchor aria-hidden=true href=#文件比较>#</a></h2><table><thead><tr><th>Expression</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>file -ef file2</code></td><td>If both files refer to the same inode and device numbers.</td></tr><tr><td><code>file -nt file2</code></td><td>If <code>file</code> is newer than <code>file2</code> (<em>uses modification time</em>) or <code>file</code> exists and <code>file2</code> does not.</td></tr><tr><td><code>file -ot file2</code></td><td>If <code>file</code> is older than <code>file2</code> (<em>uses modification time</em>) or <code>file2</code> exists and <code>file</code> does not.</td></tr></tbody></table><h2 id=变量测试>变量测试<a hidden class=anchor aria-hidden=true href=#变量测试>#</a></h2><table><thead><tr><th>Expression</th><th>Value</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>-o</code></td><td><code>opt</code></td><td>If shell option is enabled.</td></tr><tr><td><code>-v</code></td><td><code>var</code></td><td>If variable has a value assigned.</td></tr><tr><td><code>-R</code></td><td><code>var</code></td><td>If variable is a name reference.</td></tr><tr><td><code>-z</code></td><td><code>var</code></td><td>If the length of string is zero.</td></tr><tr><td><code>-n</code></td><td><code>var</code></td><td>If the length of string is non-zero.</td></tr></tbody></table><h2 id=变量比较>变量比较<a hidden class=anchor aria-hidden=true href=#变量比较>#</a></h2><table><thead><tr><th>Expression</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>var = var2</code></td><td>Equal to.</td></tr><tr><td><code>var == var2</code></td><td>Equal to (<em>synonym for <code>=</code></em>).</td></tr><tr><td><code>var != var2</code></td><td>Not equal to.</td></tr><tr><td><code>var &lt; var2</code></td><td>Less than (<em>in ASCII alphabetical order.</em>)</td></tr><tr><td><code>var > var2</code></td><td>Greater than (<em>in ASCII alphabetical order.</em>)</td></tr></tbody></table><h1 id=heading-6><a hidden class=anchor aria-hidden=true href=#heading-6>#</a></h1><h1 id=算数操作>算数操作<a hidden class=anchor aria-hidden=true href=#算数操作>#</a></h1><h2 id=赋值>赋值<a hidden class=anchor aria-hidden=true href=#赋值>#</a></h2><table><thead><tr><th>Operators</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>=</code></td><td>Initialize or change the value of a variable.</td></tr></tbody></table><h2 id=算数>算数<a hidden class=anchor aria-hidden=true href=#算数>#</a></h2><table><thead><tr><th>Operators</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>+</code></td><td>Addition</td></tr><tr><td><code>-</code></td><td>Subtraction</td></tr><tr><td><code>*</code></td><td>Multiplication</td></tr><tr><td><code>/</code></td><td>Division</td></tr><tr><td><code>**</code></td><td>Exponentiation</td></tr><tr><td><code>%</code></td><td>Modulo</td></tr><tr><td><code>+=</code></td><td>Plus-Equal (<em>Increment a variable.</em>)</td></tr><tr><td><code>-=</code></td><td>Minus-Equal (<em>Decrement a variable.</em>)</td></tr><tr><td><code>*=</code></td><td>Times-Equal (<em>Multiply a variable.</em>)</td></tr><tr><td><code>/=</code></td><td>Slash-Equal (<em>Divide a variable.</em>)</td></tr><tr><td><code>%=</code></td><td>Mod-Equal (<em>Remainder of dividing a variable.</em>)</td></tr></tbody></table><h2 id=位操作>位操作<a hidden class=anchor aria-hidden=true href=#位操作>#</a></h2><table><thead><tr><th>Operators</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>&lt;&lt;</code></td><td>Bitwise Left Shift</td></tr><tr><td><code>&lt;&lt;=</code></td><td>Left-Shift-Equal</td></tr><tr><td><code>>></code></td><td>Bitwise Right Shift</td></tr><tr><td><code>>>=</code></td><td>Right-Shift-Equal</td></tr><tr><td><code>&</code></td><td>Bitwise AND</td></tr><tr><td><code>&=</code></td><td>Bitwise AND-Equal</td></tr><tr><td><code>|</code></td><td>Bitwise OR</td></tr><tr><td><code>|=</code></td><td>Bitwise OR-Equal</td></tr><tr><td><code>~</code></td><td>Bitwise NOT</td></tr><tr><td><code>^</code></td><td>Bitwise XOR</td></tr><tr><td><code>^=</code></td><td>Bitwise XOR-Equal</td></tr></tbody></table><h2 id=逻辑>逻辑<a hidden class=anchor aria-hidden=true href=#逻辑>#</a></h2><table><thead><tr><th>Operators</th><th>What does it do?</th></tr></thead><tbody><tr><td><code>!</code></td><td>NOT</td></tr><tr><td><code>&&</code></td><td>AND</td></tr><tr><td><code>||</code></td><td>OR</td></tr></tbody></table><h2 id=miscellaneous>Miscellaneous<a hidden class=anchor aria-hidden=true href=#miscellaneous>#</a></h2><table><thead><tr><th>Operators</th><th>What does it do?</th><th>Example</th></tr></thead><tbody><tr><td><code>,</code></td><td>Comma Separator</td><td><code>((a=1,b=2,c=3))</code></td></tr></tbody></table><h1 id=heading-7><a hidden class=anchor aria-hidden=true href=#heading-7>#</a></h1><h1 id=arithmetic>ARITHMETIC<a hidden class=anchor aria-hidden=true href=#arithmetic>#</a></h1><h2 id=simpler-syntax-to-set-variables>Simpler syntax to set variables<a hidden class=anchor aria-hidden=true href=#simpler-syntax-to-set-variables>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Simple math</span>
</span></span><span style=display:flex><span><span style=color:#f92672>((</span>var<span style=color:#f92672>=</span>1+2<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Decrement/Increment variable</span>
</span></span><span style=display:flex><span><span style=color:#f92672>((</span>var++<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>((</span>var--<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>((</span>var<span style=color:#f92672>+=</span>1<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span><span style=color:#f92672>((</span>var-<span style=color:#f92672>=</span>1<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Using variables</span>
</span></span><span style=display:flex><span><span style=color:#f92672>((</span>var<span style=color:#f92672>=</span>var2*arr<span style=color:#f92672>[</span>2<span style=color:#f92672>]))</span>
</span></span></code></pre></div><h2 id=ternary-tests>Ternary Tests<a hidden class=anchor aria-hidden=true href=#ternary-tests>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Set the value of var to var2 if var2 is greater than var.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># var: variable to set.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># var2&gt;var: Condition to test.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># ?var2: If the test succeeds.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># :var: If the test fails.</span>
</span></span><span style=display:flex><span><span style=color:#f92672>((</span>var<span style=color:#f92672>=</span>var2&gt;var?var2:var<span style=color:#f92672>))</span>
</span></span></code></pre></div><h1 id=traps>TRAPS<a hidden class=anchor aria-hidden=true href=#traps>#</a></h1><p>Traps allow a script to execute code on various signals. In <a href=https://github.com/dylanaraps/pxltrm>pxltrm</a> (<em>a pixel art editor written in bash</em>)  traps are used to redraw the user interface on window resize. Another use case is cleaning up temporary files on script exit.</p><p>Traps should be added near the start of scripts so any early errors are also caught.</p><p><strong>NOTE:</strong> For a full list of signals, see <code>trap -l</code>.</p><h2 id=do-something-on-script-exit>Do something on script exit<a hidden class=anchor aria-hidden=true href=#do-something-on-script-exit>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Clear screen on script exit.</span>
</span></span><span style=display:flex><span>trap <span style=color:#e6db74>&#39;printf \\e[2J\\e[H\\e[m&#39;</span> EXIT
</span></span></code></pre></div><h2 id=ignore-terminal-interrupt-ctrlc-sigint>Ignore terminal interrupt (CTRL+C, SIGINT)<a hidden class=anchor aria-hidden=true href=#ignore-terminal-interrupt-ctrlc-sigint>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>trap <span style=color:#e6db74>&#39;&#39;</span> INT
</span></span></code></pre></div><h2 id=react-to-window-resize>React to window resize<a hidden class=anchor aria-hidden=true href=#react-to-window-resize>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Call a function on window resize.</span>
</span></span><span style=display:flex><span>trap <span style=color:#e6db74>&#39;code_here&#39;</span> SIGWINCH
</span></span></code></pre></div><h2 id=do-something-before-every-command>Do something before every command<a hidden class=anchor aria-hidden=true href=#do-something-before-every-command>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>trap <span style=color:#e6db74>&#39;code_here&#39;</span> DEBUG
</span></span></code></pre></div><h2 id=do-something-when-a-shell-function-or-a-sourced-file-finishes-executing>Do something when a shell function or a sourced file finishes executing<a hidden class=anchor aria-hidden=true href=#do-something-when-a-shell-function-or-a-sourced-file-finishes-executing>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>trap <span style=color:#e6db74>&#39;code_here&#39;</span> RETURN
</span></span></code></pre></div><h1 id=performance>PERFORMANCE<a hidden class=anchor aria-hidden=true href=#performance>#</a></h1><h2 id=disable-unicode>Disable Unicode<a hidden class=anchor aria-hidden=true href=#disable-unicode>#</a></h2><p>If unicode is not required, it can be disabled for a performance increase. Results may vary however there have been noticeable improvements in <a href=https://github.com/dylanaraps/neofetch>neofetch</a> and other programs.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Disable unicode.</span>
</span></span><span style=display:flex><span>LC_ALL<span style=color:#f92672>=</span>C
</span></span><span style=display:flex><span>LANG<span style=color:#f92672>=</span>C
</span></span></code></pre></div><h1 id=obsolete-syntax>OBSOLETE SYNTAX<a hidden class=anchor aria-hidden=true href=#obsolete-syntax>#</a></h1><h2 id=shebang>Shebang<a hidden class=anchor aria-hidden=true href=#shebang>#</a></h2><p>Use <code>#!/usr/bin/env bash</code> instead of <code>#!/bin/bash</code>.</p><ul><li>The former searches the user&rsquo;s <code>PATH</code> to find the <code>bash</code> binary.</li><li>The latter assumes it is always installed to <code>/bin/</code> which can cause issues.</li></ul><p><strong>NOTE</strong>: There are times when one may have a good reason for using <code>#!/bin/bash</code> or another direct path to the binary.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Right:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#!/usr/bin/env bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Less right:</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#!/bin/bash</span>
</span></span></code></pre></div><h2 id=command-substitution>Command Substitution<a hidden class=anchor aria-hidden=true href=#command-substitution>#</a></h2><p>Use <code>$()</code> instead of <code></code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Right.</span>
</span></span><span style=display:flex><span>var<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>command<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Wrong.</span>
</span></span><span style=display:flex><span>var<span style=color:#f92672>=</span><span style=color:#e6db74>`</span>command<span style=color:#e6db74>`</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># $() can easily be nested whereas `` cannot.</span>
</span></span><span style=display:flex><span>var<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>command <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>command<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=function-declaration>Function Declaration<a hidden class=anchor aria-hidden=true href=#function-declaration>#</a></h2><p>Do not use the <code>function</code> keyword, it reduces compatibility with older versions of <code>bash</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Right.</span>
</span></span><span style=display:flex><span>do_something<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Wrong.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> do_something<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># ...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h1 id=internal-variables>INTERNAL VARIABLES<a hidden class=anchor aria-hidden=true href=#internal-variables>#</a></h1><h2 id=get-the-location-to-the-bash-binary>Get the location to the <code>bash</code> binary<a hidden class=anchor aria-hidden=true href=#get-the-location-to-the-bash-binary>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$BASH<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=get-the-version-of-the-current-running-bash-process>Get the version of the current running <code>bash</code> process<a hidden class=anchor aria-hidden=true href=#get-the-version-of-the-current-running-bash-process>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># As a string.</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$BASH_VERSION<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># As an array.</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>BASH_VERSINFO[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=open-the-users-preferred-text-editor>Open the user&rsquo;s preferred text editor<a hidden class=anchor aria-hidden=true href=#open-the-users-preferred-text-editor>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$EDITOR<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># NOTE: This variable may be empty, set a fallback value.</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>EDITOR<span style=color:#66d9ef>:-</span>vi<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$file<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=get-the-name-of-the-current-function>Get the name of the current function<a hidden class=anchor aria-hidden=true href=#get-the-name-of-the-current-function>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Current function.</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>FUNCNAME[0]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Parent function.</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>FUNCNAME[1]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># So on and so forth.</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>FUNCNAME[2]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>FUNCNAME[3]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># All functions including parents.</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>FUNCNAME[@]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=get-the-host-name-of-the-system>Get the host-name of the system<a hidden class=anchor aria-hidden=true href=#get-the-host-name-of-the-system>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$HOSTNAME<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># NOTE: This variable may be empty.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Optionally set a fallback to the hostname command.</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>HOSTNAME<span style=color:#66d9ef>:-$(</span>hostname<span style=color:#66d9ef>)</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=get-the-architecture-of-the-operating-system>Get the architecture of the Operating System<a hidden class=anchor aria-hidden=true href=#get-the-architecture-of-the-operating-system>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$HOSTTYPE<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=get-the-name-of-the-operating-system--kernel>Get the name of the Operating System / Kernel<a hidden class=anchor aria-hidden=true href=#get-the-name-of-the-operating-system--kernel>#</a></h2><p>This can be used to add conditional support for different OperatingSystems without needing to call <code>uname</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$OSTYPE<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=get-the-current-working-directory>Get the current working directory<a hidden class=anchor aria-hidden=true href=#get-the-current-working-directory>#</a></h2><p>This is an alternative to the <code>pwd</code> built-in.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$PWD<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=get-the-number-of-seconds-the-script-has-been-running>Get the number of seconds the script has been running<a hidden class=anchor aria-hidden=true href=#get-the-number-of-seconds-the-script-has-been-running>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$SECONDS<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h2 id=get-a-pseudorandom-integer>Get a pseudorandom integer<a hidden class=anchor aria-hidden=true href=#get-a-pseudorandom-integer>#</a></h2><p>Each time <code>$RANDOM</code> is used, a different integer between <code>0</code> and <code>32767</code> is returned. This variable should not be used for anything related to security (<em>this includes encryption keys etc</em>).</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#e6db74>&#34;</span>$RANDOM<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h1 id=information-about-the-terminal>INFORMATION ABOUT THE TERMINAL<a hidden class=anchor aria-hidden=true href=#information-about-the-terminal>#</a></h1><h2 id=get-the-terminal-size-in-lines-and-columns-_from-a-script_>Get the terminal size in lines and columns (<em>from a script</em>)<a hidden class=anchor aria-hidden=true href=#get-the-terminal-size-in-lines-and-columns-_from-a-script_>#</a></h2><p>This is handy when writing scripts in pure bash and <code>stty</code>/<code>tput</code> can’t becalled.</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>get_term_size<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: get_term_size</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># (:;:) is a micro sleep to ensure the variables are</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># exported immediately.</span>
</span></span><span style=display:flex><span>    shopt -s checkwinsize; <span style=color:#f92672>(</span>:;:<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$LINES<span style=color:#e6db74> </span>$COLUMNS<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Output: LINES COLUMNS</span>
</span></span><span style=display:flex><span>$ get_term_size
</span></span><span style=display:flex><span><span style=color:#ae81ff>15</span> <span style=color:#ae81ff>55</span>
</span></span></code></pre></div><h2 id=get-the-terminal-size-in-pixels>Get the terminal size in pixels<a hidden class=anchor aria-hidden=true href=#get-the-terminal-size-in-pixels>#</a></h2><p><strong>CAVEAT</strong>: This does not work in some terminal emulators.</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>get_window_size<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: get_window_size</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%b&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>TMUX:+<span style=color:#ae81ff>\\</span>ePtmux;<span style=color:#ae81ff>\\</span>e<span style=color:#e6db74>}</span><span style=color:#e6db74>\\e[14t</span><span style=color:#e6db74>${</span>TMUX:+<span style=color:#ae81ff>\\</span>e<span style=color:#ae81ff>\\\\</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    IFS<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;;t&#39;</span> read -d t -t 0.05 -sra term_size
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>term_size[1]<span style=color:#e6db74>}</span><span style=color:#e6db74>x</span><span style=color:#e6db74>${</span>term_size[2]<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Output: WIDTHxHEIGHT</span>
</span></span><span style=display:flex><span>$ get_window_size
</span></span><span style=display:flex><span>1200x800
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Output (fail):</span>
</span></span><span style=display:flex><span>$ get_window_size
</span></span><span style=display:flex><span>x
</span></span></code></pre></div><h2 id=get-the-current-cursor-position>Get the current cursor position<a hidden class=anchor aria-hidden=true href=#get-the-current-cursor-position>#</a></h2><p>This is useful when creating a TUI in pure bash.</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>get_cursor_pos<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: get_cursor_pos</span>
</span></span><span style=display:flex><span>    IFS<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;[;&#39;</span> read -p <span style=color:#e6db74>$&#39;\e[6n&#39;</span> -d R -rs _ y x _
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$x<span style=color:#e6db74> </span>$y<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Output: X Y</span>
</span></span><span style=display:flex><span>$ get_cursor_pos
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> <span style=color:#ae81ff>8</span>
</span></span></code></pre></div><h1 id=conversion>CONVERSION<a hidden class=anchor aria-hidden=true href=#conversion>#</a></h1><h2 id=convert-a-hex-color-to-rgb>Convert a hex color to RGB<a hidden class=anchor aria-hidden=true href=#convert-a-hex-color-to-rgb>#</a></h2><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>hex_to_rgb<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: hex_to_rgb &#34;#FFFFFF&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#        hex_to_rgb &#34;000000&#34;</span>
</span></span><span style=display:flex><span>    : <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>1/<span style=color:#ae81ff>\#</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>((</span>r<span style=color:#f92672>=</span>16#<span style=color:#e6db74>${</span>_:0:2<span style=color:#e6db74>}</span>,g<span style=color:#f92672>=</span>16#<span style=color:#e6db74>${</span>_:2:2<span style=color:#e6db74>}</span>,b<span style=color:#f92672>=</span>16#<span style=color:#e6db74>${</span>_:4:2<span style=color:#e6db74>}</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$r<span style=color:#e6db74> </span>$g<span style=color:#e6db74> </span>$b<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ hex_to_rgb <span style=color:#e6db74>&#34;#FFFFFF&#34;</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>255</span> <span style=color:#ae81ff>255</span> <span style=color:#ae81ff>255</span>
</span></span></code></pre></div><h2 id=convert-an-rgb-color-to-hex>Convert an RGB color to hex<a hidden class=anchor aria-hidden=true href=#convert-an-rgb-color-to-hex>#</a></h2><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>rgb_to_hex<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: rgb_to_hex &#34;r&#34; &#34;g&#34; &#34;b&#34;</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;#%02x%02x%02x\n&#39;</span> <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$2<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span>$3<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ rgb_to_hex <span style=color:#e6db74>&#34;255&#34;</span> <span style=color:#e6db74>&#34;255&#34;</span> <span style=color:#e6db74>&#34;255&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#FFFFFF</span>
</span></span></code></pre></div><h1 id=code-golf>CODE GOLF<a hidden class=anchor aria-hidden=true href=#code-golf>#</a></h1><h2 id=shorter-for-loop-syntax>Shorter <code>for</code> loop syntax<a hidden class=anchor aria-hidden=true href=#shorter-for-loop-syntax>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Tiny C Style.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>;i++&lt;10;<span style=color:#f92672>)){</span> echo <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>;<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Undocumented method.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..10<span style=color:#f92672>}</span>;<span style=color:#f92672>{</span> echo <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>;<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Expansion.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> i in <span style=color:#f92672>{</span>1..10<span style=color:#f92672>}</span>; <span style=color:#66d9ef>do</span> echo <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># C Style.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>i<span style=color:#f92672>=</span>0;i&lt;<span style=color:#f92672>=</span>10;i++<span style=color:#f92672>))</span>; <span style=color:#66d9ef>do</span> echo <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h2 id=shorter-infinite-loops>Shorter infinite loops<a hidden class=anchor aria-hidden=true href=#shorter-infinite-loops>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Normal method</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> :; <span style=color:#66d9ef>do</span> echo hi; <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Shorter</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span><span style=color:#f92672>((</span>;;<span style=color:#f92672>)){</span> echo hi;<span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=shorter-function-declaration>Shorter function declaration<a hidden class=anchor aria-hidden=true href=#shorter-function-declaration>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Normal method</span>
</span></span><span style=display:flex><span>f<span style=color:#f92672>(){</span> echo hi;<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Using a subshell</span>
</span></span><span style=display:flex><span>f<span style=color:#f92672>()(</span>echo hi<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Using arithmetic</span>
</span></span><span style=display:flex><span><span style=color:#75715e># This can be used to assign integer values.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Example: f a=1</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#          f a++</span>
</span></span><span style=display:flex><span>f<span style=color:#f92672>()((</span>$1<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Using tests, loops etc.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># NOTE: ‘while’, ‘until’, ‘case’, ‘(())’, ‘[[]]’ can also be used.</span>
</span></span><span style=display:flex><span>f<span style=color:#f92672>()</span><span style=color:#66d9ef>if</span> true; <span style=color:#66d9ef>then</span> echo <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>f<span style=color:#f92672>()</span><span style=color:#66d9ef>for</span> i in <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>do</span> echo <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span>; <span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h2 id=shorter-if-syntax>Shorter <code>if</code> syntax<a hidden class=anchor aria-hidden=true href=#shorter-if-syntax>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># One line</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Note: The 3rd statement may run when the 1st is true</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $var <span style=color:#f92672>==</span> hello <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> echo hi <span style=color:#f92672>||</span> echo bye
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $var <span style=color:#f92672>==</span> hello <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>{</span> echo hi; echo there; <span style=color:#f92672>}</span> <span style=color:#f92672>||</span> echo bye
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Multi line (no else, single statement)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># Note: The exit status may not be the same as with an if statement</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $var <span style=color:#f92672>==</span> hello <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>    echo hi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Multi line (no else)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>[[</span> $var <span style=color:#f92672>==</span> hello <span style=color:#f92672>]]</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    echo hi
</span></span><span style=display:flex><span>    <span style=color:#75715e># ...</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=simpler-case-statement-to-set-variable>Simpler <code>case</code> statement to set variable<a hidden class=anchor aria-hidden=true href=#simpler-case-statement-to-set-variable>#</a></h2><p>The <code>:</code> built-in can be used to avoid repeating <code>variable=</code> in a case statement. The <code>$_</code> variable stores the last argument of the last command. <code>:</code> always succeeds so it can be used to store the variable value.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Modified snippet from Neofetch.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span>$OSTYPE<span style=color:#e6db74>&#34;</span> in
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;darwin&#34;</span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        : <span style=color:#e6db74>&#34;MacOS&#34;</span>
</span></span><span style=display:flex><span>    ;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;linux&#34;</span>*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        : <span style=color:#e6db74>&#34;Linux&#34;</span>
</span></span><span style=display:flex><span>    ;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    *<span style=color:#e6db74>&#34;bsd&#34;</span>* | <span style=color:#e6db74>&#34;dragonfly&#34;</span> | <span style=color:#e6db74>&#34;bitrig&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        : <span style=color:#e6db74>&#34;BSD&#34;</span>
</span></span><span style=display:flex><span>    ;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;cygwin&#34;</span> | <span style=color:#e6db74>&#34;msys&#34;</span> | <span style=color:#e6db74>&#34;win32&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        : <span style=color:#e6db74>&#34;Windows&#34;</span>
</span></span><span style=display:flex><span>    ;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    *<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>        printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;Unknown OS detected, aborting...&#34;</span> &gt;&amp;<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    ;;
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Finally, set the variable.</span>
</span></span><span style=display:flex><span>os<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span>$_<span style=color:#e6db74>&#34;</span>
</span></span></code></pre></div><h1 id=other>OTHER<a hidden class=anchor aria-hidden=true href=#other>#</a></h1><h2 id=use-read-as-an-alternative-to-the-sleep-command>Use <code>read</code> as an alternative to the <code>sleep</code> command<a hidden class=anchor aria-hidden=true href=#use-read-as-an-alternative-to-the-sleep-command>#</a></h2><p>Surprisingly, <code>sleep</code> is an external command and not a <code>bash</code> built-in.</p><p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>read_sleep<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: read_sleep 1</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#        read_sleep 0.2</span>
</span></span><span style=display:flex><span>    read -rt <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> &lt;&gt; &lt;<span style=color:#f92672>(</span>:<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> :
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>read_sleep <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>read_sleep 0.1
</span></span><span style=display:flex><span>read_sleep <span style=color:#ae81ff>30</span>
</span></span></code></pre></div><p>For performance-critical situations, where it is not economic to open and close an excessive number of file descriptors, the allocation of a file descriptor may be done only once for all invocations of <code>read</code>:</p><p>(See the generic original implementation at <a href=https://blog.dhampir.no/content/sleeping-without-a-subprocess-in-bash-and-how-to-sleep-forever>https://blog.dhampir.no/content/sleeping-without-a-subprocess-in-bash-and-how-to-sleep-forever</a>)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>exec <span style=color:#f92672>{</span>sleep_fd<span style=color:#f92672>}</span>&lt;&gt; &lt;<span style=color:#f92672>(</span>:<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> some_quick_test; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># equivalent of sleep 0.001</span>
</span></span><span style=display:flex><span>    read -t 0.001 -u $sleep_fd
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span></code></pre></div><h2 id=check-if-a-program-is-in-the-users-path>Check if a program is in the user&rsquo;s PATH<a hidden class=anchor aria-hidden=true href=#check-if-a-program-is-in-the-users-path>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># There are 3 ways to do this and either one can be used.</span>
</span></span><span style=display:flex><span>type -p executable_name &amp;&gt;/dev/null
</span></span><span style=display:flex><span>hash executable_name &amp;&gt;/dev/null
</span></span><span style=display:flex><span>command -v executable_name &amp;&gt;/dev/null
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># As a test.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> type -p executable_name &amp;&gt;/dev/null; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Program is in PATH.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Inverse.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> ! type -p executable_name &amp;&gt;/dev/null; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Program is not in PATH.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Example (Exit early if program is not installed).</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> ! type -p convert &amp;&gt;/dev/null; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;error: convert is not installed, exiting...&#34;</span>
</span></span><span style=display:flex><span>    exit <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span></code></pre></div><h2 id=get-the-current-date-using-strftime>Get the current date using <code>strftime</code><a hidden class=anchor aria-hidden=true href=#get-the-current-date-using-strftime>#</a></h2><p>Bash’s <code>printf</code> has a built-in method of getting the date which can be used in place of the <code>date</code> command.</p><p><strong>CAVEAT:</strong> Requires <code>bash</code> 4+</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>date<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: date &#34;format&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># See: &#39;man strftime&#39; for format.</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#34;%(</span>$1<span style=color:#e6db74>)T\\n&#34;</span> <span style=color:#e6db74>&#34;-1&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Using above function.</span>
</span></span><span style=display:flex><span>$ date <span style=color:#e6db74>&#34;%a %d %b  - %l:%M %p&#34;</span>
</span></span><span style=display:flex><span>Fri <span style=color:#ae81ff>15</span> Jun  - 10:00 AM
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Using printf directly.</span>
</span></span><span style=display:flex><span>$ printf <span style=color:#e6db74>&#39;%(%a %d %b  - %l:%M %p)T\n&#39;</span> <span style=color:#e6db74>&#34;-1&#34;</span>
</span></span><span style=display:flex><span>Fri <span style=color:#ae81ff>15</span> Jun  - 10:00 AM
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Assigning a variable using printf.</span>
</span></span><span style=display:flex><span>$ printf -v date <span style=color:#e6db74>&#39;%(%a %d %b  - %l:%M %p)T\n&#39;</span> <span style=color:#e6db74>&#39;-1&#39;</span>
</span></span><span style=display:flex><span>$ printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span>$date<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>Fri <span style=color:#ae81ff>15</span> Jun  - 10:00 AM
</span></span></code></pre></div><h2 id=get-the-username-of-the-current-user>Get the username of the current user<a hidden class=anchor aria-hidden=true href=#get-the-username-of-the-current-user>#</a></h2><p><strong>CAVEAT:</strong> Requires <code>bash</code> 4.4+</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ : <span style=color:#ae81ff>\\</span>u
</span></span><span style=display:flex><span><span style=color:#75715e># Expand the parameter as if it were a prompt string.</span>
</span></span><span style=display:flex><span>$ printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>_@P<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>black
</span></span></code></pre></div><h2 id=generate-a-uuid-v4>Generate a UUID V4<a hidden class=anchor aria-hidden=true href=#generate-a-uuid-v4>#</a></h2><p><strong>CAVEAT</strong>: The generated value is not cryptographically secure.</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>uuid<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: uuid</span>
</span></span><span style=display:flex><span>    C<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;89ab&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#f92672>((</span>N<span style=color:#f92672>=</span>0;N&lt;16;++N<span style=color:#f92672>))</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>        B<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$((</span>RANDOM%256<span style=color:#66d9ef>))</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span>$N<span style=color:#e6db74>&#34;</span> in
</span></span><span style=display:flex><span>            6<span style=color:#f92672>)</span>  printf <span style=color:#e6db74>&#39;4%x&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$((</span>B%16<span style=color:#66d9ef>))</span><span style=color:#e6db74>&#34;</span> ;;
</span></span><span style=display:flex><span>            8<span style=color:#f92672>)</span>  printf <span style=color:#e6db74>&#39;%c%x&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>C:$RANDOM%<span style=color:#e6db74>${#</span>C<span style=color:#e6db74>}</span>:1<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$((</span>B%16<span style=color:#66d9ef>))</span><span style=color:#e6db74>&#34;</span> ;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            3|5|7|9<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                printf <span style=color:#e6db74>&#39;%02x-&#39;</span> <span style=color:#e6db74>&#34;</span>$B<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            *<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>                printf <span style=color:#e6db74>&#39;%02x&#39;</span> <span style=color:#e6db74>&#34;</span>$B<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>            ;;
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>esac</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;\n&#39;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ uuid
</span></span><span style=display:flex><span>d5b6c731-1310-4c24-9fe3-55d556d44374
</span></span></code></pre></div><h2 id=progress-bars>Progress bars<a hidden class=anchor aria-hidden=true href=#progress-bars>#</a></h2><p>This is a simple way of drawing progress bars without needing a for loopin the function itself.</p><p><strong>Example Function:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bar<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: bar 1 10</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#            ^----- Elapsed Percentage (0-100).</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>#               ^-- Total length in chars.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>((</span>elapsed<span style=color:#f92672>=</span>$1*$2/100<span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Create the bar with spaces.</span>
</span></span><span style=display:flex><span>    printf -v prog  <span style=color:#e6db74>&#34;%</span><span style=color:#e6db74>${</span>elapsed<span style=color:#e6db74>}</span><span style=color:#e6db74>s&#34;</span>
</span></span><span style=display:flex><span>    printf -v total <span style=color:#e6db74>&#34;%</span><span style=color:#66d9ef>$((</span>$2<span style=color:#f92672>-</span>elapsed<span style=color:#66d9ef>))</span><span style=color:#e6db74>s&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\r&#39;</span> <span style=color:#e6db74>&#34;[</span><span style=color:#e6db74>${</span>prog// /-<span style=color:#e6db74>}${</span>total<span style=color:#e6db74>}</span><span style=color:#e6db74>]&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p><strong>Example Usage:</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#f92672>((</span>i<span style=color:#f92672>=</span>0;i&lt;<span style=color:#f92672>=</span>100;i++<span style=color:#f92672>))</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Pure bash micro sleeps (for the example).</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>(</span>:;:<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>:;:<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>:;:<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>:;:<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>:;:<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Print the bar.</span>
</span></span><span style=display:flex><span>    bar <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;10&#34;</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>printf <span style=color:#e6db74>&#39;\n&#39;</span>
</span></span></code></pre></div><h2 id=get-the-list-of-functions-in-a-script>Get the list of functions in a script<a hidden class=anchor aria-hidden=true href=#get-the-list-of-functions-in-a-script>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>get_functions<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># Usage: get_functions</span>
</span></span><span style=display:flex><span>    IFS<span style=color:#f92672>=</span><span style=color:#e6db74>$&#39;\n&#39;</span> read -d <span style=color:#e6db74>&#34;&#34;</span> -ra functions &lt; &lt;<span style=color:#f92672>(</span>declare -F<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    printf <span style=color:#e6db74>&#39;%s\n&#39;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>functions[@]//declare -f <span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=bypass-shell-aliases>Bypass shell aliases<a hidden class=anchor aria-hidden=true href=#bypass-shell-aliases>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># alias</span>
</span></span><span style=display:flex><span>ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># command</span>
</span></span><span style=display:flex><span><span style=color:#75715e># shellcheck disable=SC1001</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>\l</span>s
</span></span></code></pre></div><h2 id=bypass-shell-functions>Bypass shell functions<a hidden class=anchor aria-hidden=true href=#bypass-shell-functions>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># function</span>
</span></span><span style=display:flex><span>ls
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># command</span>
</span></span><span style=display:flex><span>command ls
</span></span></code></pre></div><h2 id=后台运行命令>后台运行命令<a hidden class=anchor aria-hidden=true href=#后台运行命令>#</a></h2><p>This will run the given command and keep it running, even after the terminal or SSH connection is terminated. All output is ignored.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>bkr<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>(</span>nohup <span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span> &amp;&gt;/dev/null &amp;<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>bkr ./some_script.sh <span style=color:#75715e># some_script.sh is now running in the background</span>
</span></span></code></pre></div><h1 id=afterword>AFTERWORD<a hidden class=anchor aria-hidden=true href=#afterword>#</a></h1><p>Thanks for reading! If this bible helped you in any way and you&rsquo;d like to give back, consider donating. Donations give me the time to make this the best resource possible. Can&rsquo;t donate? That&rsquo;s OK, star the repo and share it with your friends!</p><p><a href=https://www.patreon.com/dyla><img loading=lazy src="https://img.shields.io/badge/donate-patreon-yellow.svg#align=left&display=inline&height=20&originHeight=20&originWidth=100&status=done&style=none&width=100" alt></a></p></div><footer class=post-footer></footer></article></main><footer class=footer><span>&copy; 2022 <a href=https://wdd.js.org>洞香春</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span>
<span id=busuanzi_container_site_pv>本站访问量：<span id=busuanzi_value_site_pv></span>次</span>
&nbsp;
<span id=busuanzi_container_site_uv>您是本站第 <span id=busuanzi_value_site_uv></span> 位访问者</span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="copy";function s(){t.innerText="copied!",setTimeout(()=>{t.innerText="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>