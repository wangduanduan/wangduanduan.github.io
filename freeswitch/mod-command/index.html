<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>mod_commands | 洞香春</title>
<meta name=keywords content><meta name=description content="
Usage

CLI
See below.

API/Event Interfaces

mod_event_socket
mod_erlang_event
mod_xml_rpc


Scripting Interfaces

mod_perl
mod_v8
mod_python
mod_lua


From the Dialplan
An API command can be called from the dialplan. Example:Invoke API Command From DialplanOther examples:Other Dialplan API Command ExamplesAPI commands with multiple arguments usually have the arguments separated by a space:Multiple Arguments"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/freeswitch/mod-command/><link crossorigin=anonymous href=/assets/css/stylesheet.821c51435cba3e33e49e590a06514c54c32ac7957095ffcc1e0f390c47cf3228.css integrity="sha256-ghxRQ1y6PjPknlkKBlFMVMMqx5Vwlf/MHg85DEfPMig=" rel="preload stylesheet" as=style><link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://wdd.js.org/freeswitch/mod-command/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://wdd.js.org/freeswitch/mod-command/"><meta property="og:site_name" content="洞香春"><meta property="og:title" content="mod_commands"><meta property="og:description" content="
Usage CLI See below. API/Event Interfaces mod_event_socket mod_erlang_event mod_xml_rpc Scripting Interfaces mod_perl mod_v8 mod_python mod_lua From the Dialplan An API command can be called from the dialplan. Example:Invoke API Command From DialplanOther examples:Other Dialplan API Command ExamplesAPI commands with multiple arguments usually have the arguments separated by a space:Multiple Arguments"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="freeswitch"><meta property="article:published_time" content="2019-12-10T11:32:38+08:00"><meta property="article:modified_time" content="2019-12-10T11:32:38+08:00"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="mod_commands"><meta name=twitter:description content="
Usage

CLI
See below.

API/Event Interfaces

mod_event_socket
mod_erlang_event
mod_xml_rpc


Scripting Interfaces

mod_perl
mod_v8
mod_python
mod_lua


From the Dialplan
An API command can be called from the dialplan. Example:Invoke API Command From DialplanOther examples:Other Dialplan API Command ExamplesAPI commands with multiple arguments usually have the arguments separated by a space:Multiple Arguments"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"FreeSWITCH之路","item":"https://wdd.js.org/freeswitch/"},{"@type":"ListItem","position":2,"name":"mod_commands","item":"https://wdd.js.org/freeswitch/mod-command/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"mod_commands","name":"mod_commands","description":"\nUsage CLI See below. API/Event Interfaces mod_event_socket mod_erlang_event mod_xml_rpc Scripting Interfaces mod_perl mod_v8 mod_python mod_lua From the Dialplan An API command can be called from the dialplan. Example:Invoke API Command From DialplanOther examples:Other Dialplan API Command ExamplesAPI commands with multiple arguments usually have the arguments separated by a space:Multiple Arguments\n","keywords":[],"articleBody":"\nUsage CLI See below. API/Event Interfaces mod_event_socket mod_erlang_event mod_xml_rpc Scripting Interfaces mod_perl mod_v8 mod_python mod_lua From the Dialplan An API command can be called from the dialplan. Example:Invoke API Command From DialplanOther examples:Other Dialplan API Command ExamplesAPI commands with multiple arguments usually have the arguments separated by a space:Multiple Arguments\nDialplan UsageIf you are calling an API command from the dialplan make absolutely certain that there isn’t already a dialplan application that gives you the functionality you are looking for. See mod_dptools for a list of dialplan applications, they are quite extensive. Extraction Script Mitch Capper wrote a Perl script to extract commands from mod_commands source code. It’s tailored specifically for extracting from mod_commands but should work for most other files.Extraction Perl Script#!/usr/bin/perluse strict;open (fl,“src/mod/applications/mod_commands/mod_commands.c”);my $cont;{ local $/ = undef; $cont = ;}close fl;my %DEFINES;my $reg_define = qr/[A-Za-z0-9_]+/;my $reg_function = qr/[A-Za-z0-9_]+/;my $reg_string_or_define = qr/(?:(?:$reg_define)|(?:\"[^\"]*\"))/;\n#load defineswhile ($cont =~ / ^\\s* #define \\s+ ($reg_define) \\s+ \"([^\"]*)\" /mgx){ warn “$1 is #defined multiple times” if ($DEFINES{$1}); $DEFINES{$1} = $2;}\nsub resolve_str_or_define($){ my ($str) = @_; if ($str =~ s/^\"// \u0026\u0026 $str =~ s/\"$//){ #if starts and ends with a quote strip them off and return the str return $str; } warn “Unable to resolve define: $str” if (! $DEFINES{$str}); return $DEFINES{$str};}#parse commandswhile ($cont =~ / SWITCH_ADD_API \\s* ( ([^,]+) #interface $1 ,\\s* ($reg_string_or_define) # command $2 ,\\s* ($reg_string_or_define) # command description $3 ,\\s* ($reg_function) # function $4 ,\\s* ($reg_string_or_define) # usage $5 \\s*); /sgx){ my ($interface,$command,$descr,$function,$usage) = ($1,$2,$3,$4,$5); $command = resolve_str_or_define($command); $descr = resolve_str_or_define($descr); $usage = resolve_str_or_define($usage); warn “Found a not command interface of: $interface for command: $command” if ($interface ne “commands_api_interface”); print “$command – $descr – $usage\\n”;} Core Commands Implemented in http://fisheye.freeswitch.org/browse/freeswitch.git/src/mod/applications/mod_commands/mod_commands.cFormat of Returned DataResults of some status and listing commands are presented in comma delimited lists by default. Data returned from some modules may also contain commas, making it difficult to automate result processing. They may be able to be retrieved in an XML format by appending the string “as xml” to the end of the command string, or as json using “as json”, or change the delimiter from comma to something else using “as delim |”. acl Compare an ip to an Access Control ListUsage: acl alias Alias: a means to save some keystrokes on commonly used commands.Usage: alias add | del [|*]Example:freeswitch\u003e alias add reloadall reloadacl reloadxml+OKfreeswitch\u003e alias add unreg sofia profile internal flush_inbound_reg+OKYou can add aliases that persist across restarts using the stickyadd argument:freeswitch\u003e alias stickyadd reloadall reloadacl reloadxml+OKOnly really works from the console, not fs_cli. bgapi Execute an API command in a thread.Usage: bgapi [ ] complete Complete.Usage: complete add |del [|*] cond Evaluate a conditional expression.Usage: cond ? : Operators supported by are:\n== (equal to) != (not equal to) (greater than)\n= (greater than or equal to)\n\u003c (less than) \u003c= (less than or equal to) How are values compared?\ntwo strings are compared as strings two numbers are compared as numbers a string and a number are compared as strlen(string) and numbers For example, foo == 3 evaluates to true, and foo == three to false.\nExamples (click to expand)\nExample:Return true if first value is greater than the secondcond 5 \u003e 3 ? true : falsetrueExample in dialplan:Slightly more complex example:\nNote about syntaxThe whitespace around the question mark and colon are required since FS-5945. Before that, they were optional. If the spaces are missing, the cond function will return -ERR. domain_exists Check if a FreeSWITCH domain exists.Usage: domain_exists eval Eval (noop). Evaluates a string, expands variables. Those variables that are set only during a call session require the uuid of the desired session or else return “-ERR no reply”.Usage: eval [uuid: ]Examples:eval ${domain}10.15.0.94eval Hello, World!Hello, World!eval uuid:e72aff5c-6838-49a8-98fb-84c90ad840d9 ${channel-state}CS_EXECUTE expand Execute an API command with variable expansion.Usage: expand [uuid: ] Example:expand originate sofia/internal/1001%${domain} 9999In this example the value of ${domain} is expanded. If the domain were, for example, “192.168.1.1” then this command would be executed:originate sofia/internal/1001%192.168.1.1 9999 fsctl Send control messages to FreeSWITCH.USAGE: fsctl [ api_expansion [on|off] | calibrate_clock | debug_level [level] | debug_sql | default_dtmf_duration [n] | flush_db_handles | hupall | last_sps | loglevel [level] | max_dtmf_duration [n] | max_sessions [n] | min_dtmf_duration [n] | min_idle_cpu [d] | pause [inbound|outbound] | pause_check [inbound|outbound] | ready_check | reclaim_mem | recover | resume [inbound|outbound] | save_history | send_sighup | shutdown [cancel|elegant|asap|now|restart] | shutdown_check | sps | sps_peak_reset | sql [start] | sync_clock | sync_clock_when_idle | threaded_system_exec | verbose_events [on|off] ]\nfsctl arguments api_expansion Usage: fsctl api_expansion [on|off]Toggles API expansion. With it off, no API functions can be expanded inside channel variables like ${show channels} This is a specific security mode that is not often used. calibrate_clock Usage: fsctl calibrate_clockRuns an algorithm to compute how long it actually must sleep in order to sleep for a true 1ms. It’s only useful in older kernels that don’t have timerfd. In those older kernels FS auto detects that it needs to do perform that computation. This command just repeats the calibration. **debug_level ** Usage: fsctl debug_level [level]Set the amount of debug information that will be posted to the log. 1 is less verbose while 9 is more verbose. Additional debug messages will be posted at the ALERT loglevel.0 - fatal errors, panic1 - critical errors, minimal progress at subsystem level2 - non-critical errors3 - warnings, progress messages5 - signaling protocol actions (incoming packets, …)7 - media protocol actions (incoming packets, …)9 - entering/exiting functions, very verbatim progress\ndebug_sql Usage: fsctl debug_sqlToggle core SQL debugging messages on or off each time this command is invoked. Use with caution on busy systems. In order to see all messages issue the “logelevel debug” command on the fs_cli interface. default_dtmf_duration Usage: fsctl default_dtmf_duration [int]int = number of clock ticksExample:fsctl default_dtmf_duration 2000This example sets the default_dtmf_duration switch parameter to 250ms. The number is specified in clock ticks (CT) where duration (milliseconds) = CT / 8 or CT = duration * 8The default_dtmf_duration specifies the DTMF duration to use on originated DTMF events or on events that are received without a duration specified. This value is bounded on the lower end by min_dtmf_duration and on the upper end by max_dtmf_duration. So max_dtmf_duration \u003e= default_dtmf_duration \u003e= min_dtmf_duration . This value can be set persistently in switch.conf.xmlTo check the current value:fsctl default_dtmf_duration 0FS recognizes a duration of 0 as a status check. Instead of setting the value to 0, it simply returns the current value. flush_db_handles Usage: fsctl flush_db_handlesFlushes cached database handles from the core db handlers. FreeSWITCH reuses db handles whenever possible, but a heavily loaded FS system can accumulate a large number of db handles during peak periods while FS continues to allocate new db handles to service new requests in a FIFO manner. “fsctl flush_db_handles” closes db connections that are no longer needed to avoid exceeding connections to the database server. hupall Usage: fsctl hupall dialed_ext Disconnect existing calls to a destination and post a clearing cause.For example, to kill an active call with normal clearing and the destination being extension 1000:fsctl hupall normal_clearing dialed_ext 1000 last_sps Usage: fsctl last_spsQuery the actual sessions-per-second.fsctl last_sps+OK last sessions per second: 723987253(Your mileage might vary.) loglevel Usage: fsctl loglevel [level]Filter much detail the log messages will contain when displayed on the fs_cli interface. See mod_console for legal values of “level” and further discussion.The available loglevels can be specified by number or name:0 - CONSOLE1 - ALERT2 - CRIT3 - ERR4 - WARNING5 - NOTICE6 - INFO7 - DEBUG max_sessions Usage: fsctl max_sessions [int]Set how many simultaneous call sessions FS will allow. This value can be ascertained by load testing, but is affected by processor speed and quantity, network and disk bandwidth, choice of codecs, and other factors. See switch.conf.xml for the persistent setting max-sessions. max_dtmf_duration Usage: fsctl max_dtmf_duration [int]Default = 192000 clock ticksExample:fsctl max_dtmf_duration 80000This example sets the max_dtmf_duration switch parameter to 10,000ms (10 seconds). The integer is specified in clock ticks (CT) where CT / 8 = ms. The max_dtmf_duration caps the playout of a DTMF event at the specified duration. Events exceeding this duration will be truncated to this duration. You cannot configure a duration that exceeds this setting. This setting can be lowered, but cannot exceed 192000 (the default). This setting cannot be set lower than min_dtmf_duration. This setting can be set persistently in switch.conf.xml as max-dtmf-duration.To query the current value:fsctl max_dtmf_duration 0FreeSWITCH recognizes a duration of 0 as a status check. Instead of setting the value to 0, it simply returns the current value. min_dtmf_duration Usage: fsctl min_dtmf_duration [int]Default = 400 clock ticksExample:fsctl min_dtmf_duration 800This example sets the min_dtmf_duration switch parameter to 100ms. The integer is specified in clock ticks (CT) where CT / 8 = ms. The min_dtmf_duration specifies the minimum DTMF duration to use on outgoing events. Events shorter than this will be increased in duration to match min_dtmf_duration. You cannot configure a DTMF duration on a profile that is less than this setting. You may increase this value, but cannot set it lower than 400 (the default). This value cannot exceed max_dtmf_duration. This setting can be set persistently in switch.conf.xml as min-dtmf-duration.It is worth noting that many devices squelch in-band DTMF when sending RFC 2833. Devices that squelch in-band DTMF have a certain reaction time and clamping time which can sometimes reach as high as 40ms, though most can do it in less than 20ms. As the shortness of your DTMF event duration approaches this clamping threshold, the risk of your DTMF being ignored as a squelched event increases. If your call is always IP-IP the entire route, this is likely not a concern. However, when your call is sent to the PSTN, the RFC 2833 DTMF events must be encoded in the audio stream. This means that other devices down the line (possibly a PBX or IVR that you are calling) might not hear DTMF tones that are long enough to decode and so will ignore them entirely. For this reason, it is recommended that you do not send DTMF events shorter than 80ms.Checking the current value:fsctl min_dtmf_duration 0FreeSWITCH recognizes a duration of 0 as a status check. Instead of setting the value to 0, it simply returns the current value. min_idle_cpu Usage: fsctl min_idle_cpu [int]Allocates the minimum percentage of CPU idle time available to other processes to prevent FreeSWITCH from consuming all available CPU cycles.Example:fsctl min_idle_cpu 10This allocates a minimum of 10% CPU idle time which is not available for processing by FS. Once FS reaches 90% CPU consumption it will respond with cause code 503 to additional SIP requests until its own usage drops below 90%, while reserving that last 10% for other processes on the machine. pause Usage: fsctl pause [inbound|outbound]Pauses the ability to receive inbound or originate outbound calls, or both directions if the keyword is omitted. Executing fsctl pause inbound will also prevent registration requests from being processed. Executing fsctl pause outbound will result in the Critical log message “The system cannot create any outbound sessions at this time” in the FS log.Use resume with the corresponding argument to restore normal operation. pause_check Usage: fsctl pause_check [inbound|outbound]Returns true if the specified mode is active.Examples:fsctl pause_check inboundtrueindicates that inbound calls and registrations are paused. Use fsctl resume inbound to restore normal operation.fsctl pause_checktrueindicates that both inbound and outbound sessions are paused. Use fsctl resume to restore normal operation. ready_check Usage: fsctl ready_checkReturns true if the system is in the ready state, as opposed to awaiting an elegant shutdown or other not-ready state. reclaim_mem Usage: fsctl reclaim_mem recover Usage: fsctl recoverSends an endpoint–specific recover command to each channel detected as recoverable. This replaces “sofia recover” and makes it possible to have multiple endpoints besides SIP implement recovery. resume Usage: fsctl resume [inbound|outbound]Resumes normal operation after pausing inbound, outbound, or both directions of call processing by FreeSWITCH.Example:fsctl resume inbound+OKResumes processing of inbound calls and registrations. Note that this command always returns +OK, but the same keyword must be used that corresponds to the one used in the pause command in order to take effect. save_history Usage: fsctl save_historyWrite out the command history in anticipation of executing a configuration that might crash FS. This is useful when debugging a new module or script to allow other developers to see what commands were executed before the crash. send_sighup Usage: fsctl send_sighupDoes the same thing that killing the FS process with -HUP would do without having to use the UNIX kill command. Useful in environments like Windows where there is no kill command or in cron or other scripts by using fs_cli -x “fsctl send_sighup” where the FS user process might not have privileges to use the UNIX kill command. shutdown Usage: fsctl shutdown [asap|asap restart|cancel|elegant|now|restart|restart asap|restart elegant]\ncancel - discontinue a previous shutdown request. elegant - wait for all traffic to stop, while allowing new traffic. asap - wait for all traffic to stop, but deny new traffic. now - shutdown FreeSWITCH immediately. restart - restart FreeSWITCH immediately following the shutdown. When giving “elegant”, “asap” or “now” it’s also possible to add the restart command: shutdown_check Usage: fsctl shutdown_checkReturns true if FS is shutting down, or shutting down and restarting. sps Usage: fsctl sps [int]This changes the sessions-per-second limit from the value initially set in switch.conf sync_clock Usage: fsctl sync_clockFreeSWITCH will not trust the system time. It gets one sample of system time when it first starts and uses the monotonic clock after that moment. You can sync it back to the current value of the system’s real-time clock with fsctl sync_clockNote: fsctl sync_clock immediately takes effect, which can affect the times on your CDRs. You can end up underbilling/overbilling, or even calls hungup before they originated. e.g. if FS clock is off by 1 month, then your CDRs will show calls that lasted for 1 month!See fsctl sync_clock_when_idle which is much safer. sync_clock_when_idle Usage: fsctl sync_clock_when_idleSynchronize the FreeSWITCH clock to the host machine’s real-time clock, but wait until there are 0 channels in use. That way it doesn’t affect any CDRs. verbose_events Usage: fsctl verbose_events [on|off]Enables verbose events. Verbose events have every channel variable in every event for a particular channel. Non-verbose events have only the pre-selected channel variables in the event headers.See switch.conf.xml for the persistent setting of verbose-channel-events.\nglobal_getvar Gets the value of a global variable. If the parameter is not provided then it gets all the global variables.Usage: global_getvar [] global_setvar Sets the value of a global variable.Usage: global_setvar =Example:global_setvar outbound_caller_id=2024561000 group_call Returns the bridge string defined in a call group.Usage: group_call group@domain[+F|+A|+E]+F will return the group members in a serial fashion separated by | (the pipe character)+A (default) will return them in a parallel fashion separated by , (comma)+E will return them in a enterprise fashion separated by :_: (colon underscore colon).There is no space between the domain and the optional flag. See Groups in the XML User Directory for more information.Please note: If you need to have outgoing user variables set in leg B, make sure you don’t have dial-string and group-dial-string in your domain or dialed group variables list; instead set dial-string or group-dial-string in the default group of the user. This way group_call will return user/101 and user/ would set all your user variables to the leg B channel.The B leg receives a new variable, dialed_group, containing the full group name. help Show help for all the API commands.Usage: help host_lookup Performs a DNS lookup on a host name.Usage: host_lookup hupall Disconnect existing channels.Usage: hupall [ ]All channels with set to will be disconnected with code.Example:originate {foo=bar}sofia/internal/someone1@server.com,sofia/internal/someone2@server.com \u0026parkhupall normal_clearing foo barTo hang up all calls on the switch indiscriminately:hupall system_shutdown in_group Determine if a user is a member of a group.Usage: in_group [@] is_lan_addr See if an IP is a LAN address.Usage: is_lan_addr json JSON APIUsage: json {“command” : “…”, “data” : “…”}Example\u003e json {“command” : “status”, “data” : “”} {“command”:“status”,“data”:\"\",“status”:“success”,“response”:{“systemStatus”:“ready”,“uptime”:{“years”:0,“days”:20,“hours”:20,“minutes”:37,“seconds”:4,“milliseconds”:254,“microseconds”:44},“version”:“1.6.9 -16-d574870 64bit”,“sessions”:{“count”:{“total”:132,“active”:0,“peak”:2,“peak5Min”:0,“limit”:1000},“rate”:{“current”:0,“max”:30,“peak”:2,“peak5Min”:0}},“idleCPU”:{“used”:0,“allowed”:99.733333},“stackSizeKB”:{“current”:240,“max”:8192}}} load Load external moduleUsage: load Example:load mod_v8 md5 Return MD5 hash for the given input dataUsage: md5 hash-keyExample:md5 freeswitch-is-awesome765715d4f914bf8590d1142b6f64342e module_exists Check if module is loaded.Usage: module_exists Example:module_exists mod_event_sockettrue msleep Sleep for x number of millisecondsUsage: msleep nat_map Manage Network Address Translation mapping.Usage: nat_map [status|reinit|republish] | [add|del] [tcp|udp] [sticky] | [mapping] status - Gives the NAT type, the external IP, and the currently mapped ports. reinit - Completely re-initializes the NAT engine. Use this if you have changed routes or have changed your home router from NAT mode to UPnP mode. republish - Causes FreeSWITCH to republish the NAT maps. This should not be necessary in normal operation. mapping - Controls whether port mapping requests will be sent to the NAT (the command line option of -nonatmap can set it to disable on startup). This gives the ability of still using NAT for getting the public IP without opening the ports in the NAT. Note: sticky makes the mapping stay across FreeSWITCH restarts. It gives you a permanent mapping.Warning: If you have multiple network interfaces with unique IP addresses defined in sip profiles using the same port, nat_map will get confused when it tries to map the same ports for multiple profiles. Set up a static mapping between the public address and port and the private address and port in the sip_profiles to avoid this problem. regex Evaluate a regex (regular expression).Usage: regex |[|][|(n|b)]regex m://[/][/(n|b)]regex m:[][(n|b)]This command behaves differently depending upon whether or not a substitution string and optional flag is supplied:\nIf a subst is not supplied, regex returns either “true” if the pattern finds a match or “false” if not. If a subst is supplied, regex returns the subst value on a true condition. If a subst is supplied, on a false (no pattern match) condition regex returns: the source string with no flag; with the n flag regex returns null which forces the response “-ERR no reply” from regex; with the b flag regex returns “false” The regex delimiter defaults to the | (pipe) character. The delimiter may be changed to ~ (tilde) or / (forward slash) by prefixing the regex with m:Examples:regex test1234|\\d \u003c== Returns “true”regex m:/test1234/\\d \u003c== Returns “true”regex m:test1234\\d \u003c== Returns “true”regex test|\\d \u003c== Returns “false”regex test1234|(\\d+)|$1 \u003c== Returns “1234”regex sip:foo@bar.baz|^sip:(.*)|$1 \u003c== Returns “foo@bar.baz”regex testingonetwo|(\\d+)|$1 \u003c== Returns “testingonetwo” (no match)regex m:30/^(10|20|40)$/$1 \u003c== Returns “30” (no match)regex m:30/^(10|20|40)$/$1n \u003c== Returns “-ERR no reply” (no match)regex m:30/^(10|20|40)$/$1~b \u003c== Returns “false” (no match)Logic in revision 14727 if the source string matches the result then the condition was false however there was a match and it is 1001.regex 1001|/(^\\d{4}$)/|$1\nSee also Regular_Expression reload Reload a module.Usage: reload reloadacl Reload Access Control Lists after modifying them in autoload_configs/acl.conf.xml and as defined in extensions in the user directory conf/directory/*.xmlUsage: reloadacl [reloadxml] reloadxml Reload conf/freeswitch.xml settings after modifying configuration files.Usage: reloadxml show Display various reports, VERY useful for troubleshooting and confirming proper configuration of FreeSWITCH. Arguments can not be abbreviated, they must be specified fully.Usage: show [ aliases | api | application | bridged_calls | calls [count] | channels [count|like ] | chat | codec | complete | detailed_bridged_calls | detailed_calls | dialplan | endpoint | file | interface_types | interfaces | limits management | modules | nat_map |registrations | say | tasks | timer | ] [as xml|as delim ]XML formatted:show foo as xmlChange delimiter:show foo as delim |\naliases – list defined command aliases api – list API commands exposed by loadable modules application – list applications exposed by loadable modules, notably mod_dptools bridged_calls – deprecated, use “show calls” calls [count] – list details of currently active calls; the keyword “count” eliminates the details and only prints the total count of calls channels [count|like ] – list current channels; see Channels vs Calls count – show only the count of active channels, no details like – filter results to include only channels that contain in uuid, channel name, cid_number, cid_name, presence data fields. chat – list chat interfaces codec – list codecs that are currently loaded in FreeSWITCH complete – list command argument completion tables detailed_bridged_calls – same as “show detailed_calls” detailed_calls – like “show calls” but with more fields dialplan – list dialplan interfaces endpoint – list endpoint interfaces currently available to FS file – list supported file format interfaces interface_types – list all interface types with a summary count of each type of interface available interfaces – enumerate all available interfaces by type, showing the module which exposes each interface limits – list database limit interfaces management – list management interfaces module – enumerate modules and the path to each nat_map – list Network Address Translation map registrations – enumerate user extension registrations say – enumerate available TTS (text-to-speech) interface modules with language supported tasks – list FS tasks timer – list timer modules Tips For Showing Calls and Channels The best way to get an understanding of all of the show calls/channels is to use them and observe the results. To display more fields:\nshow detailed_calls show bridged_calls show detailed_bridged_calls These three take the expand on information shown by “show calls”. Note that “show detailed_calls” replaces “show distinct_channels”. It provides similar, but more detailed, information. Also note that there is no “show detailed_channels” command, however using “show detailed_calls” will yield the same net result: FreeSWITCH lists detailed information about one-legged calls and bridged calls by using “show detailed_calls”, which can be quite useful while configuring and troubleshooting FS.Filtering ResultsTo filter only channels matching a specific uuid or related to a specific call, set the presence_data channel variable in the bridge or originate application to a unique string. Then you can use:show channels like footo list only those channels of interest. The like directive filters on these fields:\nuuid channel name caller id name caller id number presence_data NOTE: presence_data must be set during bridge or originate and not after the channel is established. shutdown Stop the FreeSWITCH program.Usage: shutdownThis only works from the console. To shutdown FS from an API call or fs_cli, you should use “fsctl shutdown” which offers a number of options.Shutdown from the console ignores arguments and exits immediately!\nstatus Show current FS status. Very helpful information to provide when asking questions on the mailing list or irc channel.Usage: statusfreeswitch@internal\u003e statusUP 17 years, 20 days, 10 hours, 10 minutes, 31 seconds, 571 milliseconds, 721 microsecondsFreeSWITCH (Version 1.5.8b git 87751f9 2013-12-13 18:13:56Z 32bit) is ready 53987253 session(s) since startup 127 session(s) - peak 127, last 5min 253 55 session(s) per Sec out of max 60, peak 55, last 5min 253 1000 session(s) max min idle cpu 0.00/97.71 strftime_tz Displays formatted time, converted to a specific timezone. See /usr/share/zoneinfo/zone.tab for the standard list of Linux timezones.Usage: strftime_tz [format_string]Example:strftime_tz US/Eastern %Y-%m-%d %T unload Unload external module.Usage: unload version Show version of the switchUsage: version [short]Examples:freeswitch@internal\u003e versionFreeSWITCH Version 1.5.8b+git20131213T181356Z87751f9eaf~32bit (git 87751f9 2013-12-13 18:13:56Z 32bit)freeswitch@internal\u003e version short1.5.8b xml_locate Write active xml tree or specified branch to stdout.Usage: xml_locate [root | | ]xml_locate root will return all XML being used by FreeSWITCHxml_locate : Will return the XML corresponding to the specified xml_locate directoryxml_locate configurationxml_locate dialplanxml_locate phrasesExample:xml_locate directory domain name example.comxml_locate configuration configuration name ivr.conf xml_wrap Wrap another API command in XML.Usage: xml_wrap Call Management Commands break Deprecated. See uuid_break. create_uuid Creates a new UUID and returns it as a string.Usage: create_uuid originate Originate a new call.Usageoriginate |\u0026() [] [] [] [] []\nFreeSWITCH will originate a call to as Leg A. If that leg supervises within 60 seconds FS will continue by searching for an extension definition in the specified dialplan for or else execute the application that follows the \u0026 along with its arguments.Originate Arguments Arguments URL you are calling. For more info on sofia SIP URL syntax see: FreeSwitch Endpoint Sofia Destination, one of: Destination number to search in dialplan; note that registered extensions will fail this way, use \u0026bridge(user/xxxx) instead \u0026() “\u0026” indicates what follows is an application name, not an exten () is optional (not all applications require parameters, e.g. park) The most commonly used application names include:park, bridge, javascript/lua/perl, playback (remove mod_native_file). Note: Use single quotes to pass arguments with spaces, e.g. ‘\u0026lua(test.lua arg1 arg2)’ Note: There is no space between \u0026 and the application name Defaults to ‘XML’ if not specified. Defaults to ‘default’ if not specified. CallerID name to send to Leg A. CallerID number to send to Leg A. Timeout in seconds; default = 60 seconds. Originate Variables Variables These variables can be prepended to the dial string inside curly braces and separated by commas. Example:originate {sip_auto_answer=true,return_ring_ready=false}user/1001 9198Variables within braces must be separated by a comma.\ngroup_confirm_key group_confirm_file forked_dial fail_on_single_reject ignore_early_media - must be defined on Leg B in bridge or originate command to stop remote ringback from being heard by Leg A return_ring_ready originate_retries originate_retry_sleep_ms origination_caller_id_name origination_caller_id_number originate_timeout sip_auto_answer Description of originate’s related variables Originate Examples Examples You can call a locally registered sip endpoint 300 and park the call like so Note that the “example” profile used here must be the one to which 300 is registered. Also note the use of % instead of @ to indicate that it is a registered extension.originate sofia/example/300%pbx.internal \u0026park()Or you could instead connect a remote sip endpoint to extension 8600originate sofia/example/300@foo.com 8600Or you could instead connect a remote SIP endpoint to another remote extensionoriginate sofia/example/300@foo.com \u0026bridge(sofia/example/400@bar.com)Or you could even run a Javascript application test.jsoriginate sofia/example/1000@somewhere.com \u0026javascript(test.js)To run a javascript with arguments you must surround it in single quotes.originate sofia/example/1000@somewhere.com ‘\u0026javascript(test.js myArg1 myArg2)’Setting channel variables to the dial stringoriginate {ignore_early_media=true}sofia/mydomain.com/18005551212@1.2.3.4 15555551212Setting SIP header variables to send to another FS box during originateoriginate {sip_h_X-varA=111,sip_h_X-varB=222}sofia/mydomain.com/18005551212@1.2.3.4 15555551212Note: you can set any channel variable, even custom ones. Use single quotes to enclose values with spaces, commas, etc.originate {my_own_var=my_value}sofia/mydomain.com/that.ext@1.2.3.4 15555551212originate {my_own_var=‘my value'}sofia/mydomain.com/that.ext@1.2.3.4 15555551212If you need to fake the ringback to the originated endpoint try this:originate {ringback='%(2000,4000,440.0,480.0)'}sofia/example/300@foo.com \u0026bridge(sofia/example/400@bar.com)To specify a parameter to the Leg A call and the Leg B bridge application:originate {‘origination_caller_id_number=2024561000’}sofia/gateway/whitehouse.gov/2125551212 \u0026bridge([’effective_caller_id_number=7036971379’]sofia/gateway/pentagon.gov/3035554499)\nIf you need to make originate return immediately when the channel is in “Ring-Ready” state try this:originate {return_ring_ready=true}sofia/gateway/someprovider/919246461929 \u0026socket(‘127.0.0.1:8082 async full’)More info on return_ring_readyYou can even set music on hold for the ringback if you want:originate {ringback='/path/to/music.wav'}sofia/gateway/name/number \u0026bridge(sofia/gateway/siptoshore/12425553741)You can originate a call in the background (asynchronously) and playback a message with a 60 second timeout.bgapi originate {ignore_early_media=true,originate_timeout=60}sofia/gateway/name/number \u0026playback(message)You can specify the UUID of an originated call by doing the following:\nUse create_uuid to generate a UUID to use. This will allow you to kill an originated call before it is answered by using uuid_kill. If you specify origination_uuid it will remain the UUID for the answered call leg for the whole session. originate {origination_uuid=...}user/100@domain.name.comHere’s an example of originating a call to the echo conference (an external sip URL) and bridging it to a local user’s phone:originate sofia/internal/9996@conference.freeswitch.org \u0026bridge(user/105@default)Here’s an example of originating a call to an extension in a different context than ‘default’ (required for the FreePBX which uses context_1, context_2, etc.):originate sofia/internal/2001@foo.com 3001 xml context_3You can also originate to multiple extensions as follows:originate user/1001,user/1002,user/1003 \u0026park()To put an outbound call into a conference at early media, either of these will work (they are effectively the same thing)originate sofia/example/300@foo.com \u0026conference(conf_uuid-TEST_CON)originate sofia/example/300@foo.com conference:conf_uuid-TEST_CON inlineSee mod_dptools: Inline Dialplan for more detail on ‘inline’ DialplansAn example of using loopback and inline on the A-leg can be found in this mailing list post pause Pause playback of recorded media that was started with uuid_broadcast.Usagepause Turning pause “on” activates the pause function, i.e. it pauses the playback of recorded media. Turning pause “off” deactivates the pause function and resumes playback of recorded media at the same point where it was paused.Note: always returns -ERR no reply when successful; returns -ERR No such channel! when uuid is invalid. uuid_answer Answer a channelUsageuuid_answer See Also\nmod_dptools: answer uuid_audio Adjust the audio levels on a channel or mute (read/write) via a media bug.Usageuuid_audio [start [read|write] [[mute|level] ]|stop] is in the range from -4 to 4, 0 being the default value.Level is required for both mute|level params:freeswitch@internal\u003e uuid_audio 0d7c3b93-a5ae-4964-9e4d-902bba50bd19 start write mute freeswitch@internal\u003e uuid_audio 0d7c3b93-a5ae-4964-9e4d-902bba50bd19 start write level (This command behaves funky. Requires further testing to vet all arguments. - JB)See Also\nmod_dptools: set audio level uuid_break Break out of media being sent to a channel. For example, if an audio file is being played to a channel, issuing uuid_break will discontinue the media and the call will move on in the dialplan, script, or whatever is controlling the call.Usage: uuid_break [all]If the all flag is used then all audio files/prompts/etc. that are queued up to be played to the channel will be stopped and removed from the queue, otherwise only the currently playing media will be stopped. uuid_bridge Bridge two call legs together.Usageuuid_bridge uuid_bridge needs at least any one leg to be in the answered state. If, for example, one channel is parked and another channel is actively conversing on a call, executing uuid_bridge on these 2 channels will drop the existing call and bridge together the specified channels. uuid_broadcast Execute an arbitrary dialplan application, typically playing a media file, on a specific uuid. If a filename is specified then it is played into the channel(s). To execute an application use “app::args” syntax.Usageuuid_broadcast [aleg|bleg|both]Execute an application on a chosen leg(s) with optional hangup afterwards:Usageuuid_broadcast app[![hangup_cause]]::args [aleg|bleg|both]Examples:Exampleuuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e sorry.wav bothuuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e say::en\\snumber\\spronounced\\s12345 aleguuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e say!::en\\snumber\\spronounced\\s12345 aleguuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e say!user_busy::en\\snumber\\spronounced\\s12345 aleguuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e playback!user_busy::sorry.wav aleg uuid_buglist List the media bugs on channel. Output is formatted as XML.Usage\nuuid_buglist uuid_chat Send a chat message.Usageuuid_chat If the endpoint associated with the session has a receive_event handler, this message gets sent to that session and is interpreted as an instant message. uuid_debug_media Debug media, either audio or video.Usageuuid_debug_media Use “read” or “write” for the audio direction to debug, or “both” for both directions. And prefix with v for video media.uuid_debug_media emits a HUGE amount of data. If you invoke this command from fs_cli, be prepared.\nExample outputR sofia/internal/1003@192.168.65.3 b= 172 192.168.65.3:17668 192.168.65.114:16072 192.168.65.114:16072 pt=0 ts=2981605109 m=0W sofia/internal/1003@192.168.65.3 b= 172 192.168.65.3:17668 192.168.65.114:16072 192.168.65.114:16072 pt=0 ts=12212960 m=0R sofia/internal/1003@192.168.65.3 b= 172 192.168.65.3:17668 192.168.65.114:16072 192.168.65.114:16072 pt=0 ts=2981605269 m=0W sofia/internal/1003@192.168.65.3 b= 172 192.168.65.3:17668 192.168.65.114:16072 192.168.65.114:16072 pt=0 ts=12213120 m=0 Read Format “R %s b=%4ld %s:%u %s:%u %s:%u pt=%d ts=%u m=%d\\n”where the values are:\nswitch_channel_get_name(switch_core_session_get_channel(session)), (long) bytes, my_host, switch_sockaddr_get_port(rtp_session-\u003elocal_addr), old_host, rtp_session-\u003eremote_port, tx_host, switch_sockaddr_get_port(rtp_session-\u003efrom_addr), rtp_session-\u003erecv_msg.header.pt, ntohl(rtp_session-\u003erecv_msg.header.ts), rtp_session-\u003erecv_msg.header.m Write Format “W %s b=%4ld %s:%u %s:%u %s:%u pt=%d ts=%u m=%d\\n”where the values are:\nswitch_channel_get_name(switch_core_session_get_channel(session)), (long) bytes, my_host, switch_sockaddr_get_port(rtp_session-\u003elocal_addr), old_host, rtp_session-\u003eremote_port, tx_host, switch_sockaddr_get_port(rtp_session-\u003efrom_addr), send_msg-\u003eheader.pt, ntohl(send_msg-\u003eheader.ts), send_msg-\u003eheader.m); uuid_deflect Deflect an answered SIP call off of FreeSWITCH by sending the REFER methodUsage: uuid_deflect uuid_deflect waits for the final response from the far end to be reported. It returns the sip fragment from that response as the text in the FreeSWITCH response to uuid_deflect. If the far end reports the REFER was successful, then FreeSWITCH will issue a bye on the channel.Exampleuuid_deflect 0c9520c4-58e7-40c4-b7e3-819d72a98614 sip:info@example.netResponse:Content-Type: api/responseContent-Length: 30+OK:SIP/2.0 486 Busy Here uuid_displace Displace the audio for the target with the specified audio .Usage: uuid_displace [start|stop] [] [mux]Arguments:\nuuid = Unique ID of this call (see ‘show channels’) start|stop = Start or stop this action file = path to an audio source (.wav file, shoutcast stream, etc…) limit = limit number of seconds before terminating the displacement mux = multiplex; mix the original audio together with ‘file’, i.e. both parties can still converse while the file is playing (if the level is not too loud) To specify the 5th argument ‘mux’ you must specify a limit; if no time limit is desired on playback, then specify 0.Examplescli\u003e uuid_displace 1a152be6-2359-11dc-8f1e-4d36f239dfb5 start /sounds/test.wav 60cli\u003e uuid_displace 1a152be6-2359-11dc-8f1e-4d36f239dfb5 stop /sounds/test.wav\nuuid_display Updates the display on a phone if the phone supports this. This works on some SIP phones right now including Polycom and Snom.Usage: name|numberNote the pipe character separating the Caller ID name and Caller ID number.This command makes the phone re-negotiate the codec. The SIP -\u003e RTP Packet Size should be 0.020 seconds. If it is set to 0.030 on the Cisco SPA series phones it causes a DTMF lag. When DTMF keys are pressed on the phone they are can be seen on the fs_cli 4-6 seconds late.Example:freeswitch@sidious\u003e uuid_display f4053af7-a3b9-4c78-93e1-74e529658573 Fred Jones|1001+OK Success\nuuid_dual_transfer Transfer each leg of a call to different destinations.Usage: [/][/] [/][/] uuid_dump Dumps all variable values for a session.Usage: uuid_dump [format]Format options: txt (default, may be omitted), XML, JSON, plain uuid_early_ok Stops the process of ignoring early media, i.e. if ignore_early_media=true, this stops ignoring early media coming from Leg B and responds normally.Usage: uuid_early_ok uuid_exists Checks whether a given UUID exists.Usage: uuid_exists Returns true or false. uuid_flush_dtmf Flush queued DTMF digitsUsage: uuid_flush_dtmf uuid_fileman Manage the audio being played into a channel from a sound fileUsage: uuid_fileman cmd:valCommands are:\nspeed:\u003c+[step]\u003e|\u003c-[step]\u003e volume:\u003c+[step]\u003e|\u003c-[step]\u003e pause (toggle) stop truncate restart seek:\u003c+[milliseconds]\u003e|\u003c-[milliseconds]\u003e (1000ms = 1 second, 10000ms = 10 seconds.) Example to seek forward 30 seconds:uuid_fileman 0171ded1-2c31-445a-bb19-c74c659b7d08 seek:+3000(Or use the current channel via ${uuid}, e.g. in a bind_digit_action)The ‘pause’ argument is a toggle: the first time it is invoked it will pause playback, the second time it will resume playback. uuid_getvar Get a variable from a channel.Usage: uuid_getvar uuid_hold Place a channel on hold.Usage:uuid_hold place a call on holduuid_hold off switch off on holduuid_hold toggle toggles call-state based on current call-state uuid_kill Reset a specific channel.Usage: uuid_kill [cause]If no cause code is specified, NORMAL_CLEARING will be used. uuid_limit Apply or change limit(s) on a specified uuid.Usage: uuid_limit [[/interval]] [number [dialplan [context]]]See also mod_dptools: Limit uuid_media Reinvite FreeSWITCH out of the media path:Usage: uuid_media [off] Reinvite FreeSWITCH back in:Usage: uuid_media uuid_media_reneg Tell a channel to send a re-invite with optional list of new codecs to be renegotiated.Usage: uuid_media_reneg \u003c=\u003eExample: Adding =PCMU makes the offered codec string absolute. uuid_park Park callUsage: uuid_park The specified channel will be parked and the other leg of the call will be disconnected. uuid_pre_answer Pre–answer a channel.Usage: uuid_preanswer See Also: Misc._Dialplan_Tools_pre_answer uuid_preprocess Pre-process ChannelUsage: uuid_preprocess uuid_recv_dtmf Usage: uuid_recv_dtmf uuid_send_dtmf Send DTMF digits to Usage: uuid_send_dtmf [@]Use the character w for a .5 second delay and the character W for a 1 second delay.Default tone duration is 2000ms . uuid_send_info Send info to the endpointUsage: uuid_send_info uuid_session_heartbeat Usage: uuid_session_heartbeat [sched] [0|] uuid_setvar Set a variable on a channel. If value is omitted, the variable is unset.Usage: uuid_setvar [value] uuid_setvar_multi Set multiple vars on a channel.Usage: uuid_setvar_multi =[;=[;…]] uuid_simplify This command directs FreeSWITCH to remove itself from the SIP signaling path if it can safely do so.Usage: uuid_simplify Execute this API command to instruct FreeSWITCH™ to inspect the Leg A and Leg B network addresses. If they are both hosted by the same switch as a result of a transfer or forwarding loop across a number of FreeSWITCH™ systems the one executing this command will remove itself from the SIP and media path and restore the endpoints to their local FreeSWITCH™ to shorten the network path. This is particularly useful in large distributed FreeSWITCH™ installations.For example, suppose a call arrives at a FreeSWITCH™ box in Los Angeles, is answered, then forwarded to a FreeSWITCH™ box in London, answered there and then forwarded back to Los Angeles. The London switch could execute uuid_simplify to tell its local switch to examine both legs of the call to determine that they could be hosted by the Los Angeles switch since both legs are local to it. Alternatively, setting sip_auto_simplify to true either globally in vars.xml or as part of a dailplan extension would tell FS to perform this check for each call when both legs supervise. uuid_transfer Transfers an existing call to a specific extension within a and . Dialplan may be “xml” or “directory”.Usageuuid_transfer [-bleg|-both] [] []\nThe optional first argument will allow you to transfer both parties (-both) or only the party to whom is talking.(-bleg). Beware that -bleg actually means “the other leg”, so when it is executed on the actual B leg uuid it will transfer the actual A leg that originated the call and disconnect the actual B leg.NOTE: if the call has been bridged, and you want to transfer either side of the call, then you will need to use (or the API equivalent). If it’s not set, transfer doesn’t really work as you’d expect, and leaves calls in limbo.And more examples see Inline Dialplan uuid_phone_event Send hold indication upstream:Usageuuid_phone_event hold|talk\nRecord/Playback Commands uuid_record Record the audio associated with the given UUID into a file. The start command causes FreeSWITCH to start mixing all call legs together and saves the result as a file in the format that the file’s extension dictates. (if available) The stop command will stop the recording and close the file. If media setup hasn’t yet happened, the file will contain silent audio until media is available. Audio will be recorded for calls that are parked. The recording will continue through the bridged call. If the call is set to return to park after the bridge, the bug will remain on the call, but no audio is recorded until the call is bridged again. (TODO: What if media doesn’t flow through FreeSWITCH? Will it re-INVITE first? Or do we just not get the audio in that case?)Usage:uuid_record [start|stop|mask|unmask] []Where limit is the max number of seconds to record.If the path is not specified on start it will default to the channel variable “sound_prefix” or FreeSWITCH base_dir when the “sound_prefix” is empty.You may also specify “all” for path when stop is used to remove all for this uuid“stop” command must be followed by option.“mask” will mask with silence part of the recording beginning when the mask argument is executed by this command. see http://jira.freeswitch.org/browse/FS-5269.“unmask” will stop the masking and continue recording live audio normally.See record’s related variablesyou will also want to see mod_dptools: record_session Limit Commands More information is available at Limit commands limit_reset Reset a limit backend. limit_status Retrieve status from a limit backend. limit_usage Retrieve usage for a given resource. uuid_limit_release Manually decrease a resource usage by one. limit_interval_reset Reset the interval counter to zero prior to the start of the next interval. Miscellaneous Commands bg_system Execute a system command in the background.Usage: bg_system echo Echo input back to the consoleUsage: echo Example:echo This text will appearThis text will appear file_exists Tests whether filename exists.file_exists filenameExamples:freeswitch\u003e file_exists /tmp/real_filetrue\nfreeswitch\u003e file_exists /tmp/missing_filefalseExample dialplan usage:file_exists example\nfile_exists tests whether FreeSWITCH can see the file, but the file may still be unreadable because of restrictive permissions.\nfind_user_xml Checks to see if a user exists. Matches user tags found in the directory, similar to user_exists, but returns an XML representation of the user as defined in the directory (like the one shown in user_exists).Usage: find_user_xml references a key specified in a directory’s user tag represents the value of the key is the domain to which the user is assigned. list_users Lists Users configured in DirectoryUsage:list_users [group ] [domain ] [user ] [context ]Examples:freeswitch@localhost\u003e list_users group default\nuserid|context|domain|group|contact|callgroup|effective_caller_id_name|effective_caller_id_number2000|default|192.168.20.73|default|sofia/internal/sip:2000@192.168.20.219:5060|techsupport|B#-Test 2000|20002001|default|192.168.20.73|default|sofia/internal/sip:2001@192.168.20.150:63412;rinstance=8e2c8b86809acf2a|techsupport|Test 2001|20012002|default|192.168.20.73|default|error/user_not_registered|techsupport|Test 2002|20022003|default|192.168.20.73|default|sofia/internal/sip:2003@192.168.20.149:5060|techsupport|Test 2003|20032004|default|192.168.20.73|default|error/user_not_registered|techsupport|Test 2004|2004\n+OKSearch filters can be combined:freeswitch@localhost\u003e list_users group default user 2004\nuserid|context|domain|group|contact|callgroup|effective_caller_id_name|effective_caller_id_number2004|default|192.168.20.73|default|error/user_not_registered|techsupport|Test 2004|2004\n+OK sched_api Schedule an API call in the future.Usage:sched_api [+@] [\u0026] is the UNIX timestamp at which the command should be executed. If it is prefixed by +, specifies the number of seconds to wait before executing the command. If prefixed by @, it will execute the command periodically every seconds; for the first instance it will be executed after seconds. will be the value of “Task-Group” in generated events. “none” is the proper value for no group. If set to UUID of channel (example: ${uuid}), task will automatically be unscheduled when channel hangs up. is the command to execute at the scheduled time.A scheduled task or group of tasks can be revoked with sched_del or unsched_api.You could append the “\u0026” symbol to the end of the line to executed this command in its own thread.Example:sched_api +1800 none originate sofia/internal/1000%${sip_profile} \u0026echo()sched_api @600 check_sched log Periodic task is running…sched_api +10 ${uuid} chat verto|fs@mydomain.com|1000@mydomain.com|Hello World sched_broadcast Play a file to a specific call in the future.Usage:sched_broadcast [[+]|@time] [aleg|bleg|both]Schedule execution of an application on a chosen leg(s) with optional hangup:sched_broadcast [+] app[![hangup_cause]]::args [aleg|bleg|both] is the UNIX timestamp at which the command should be executed. If it is prefixed by +, specifies the number of seconds to wait before executing the command. If prefixed by @, it will execute the command periodically every seconds; for the first instance it will be executed after seconds.Examples:sched_broadcast +60 336889f2-1868-11de-81a9-3f4acc8e505e commercial.wav bothsched_broadcast +60 336889f2-1868-11de-81a9-3f4acc8e505e say::en\\snumber\\spronounced\\s12345 aleg sched_del Removes a prior scheduled group or task IDUsage:sched_del The one argument can either be a group of prior scheduled tasks or the returned task-id from sched_api.sched_transfer, sched_hangup and sched_broadcast commands add new tasks with group names equal to the channel UUID. Thus, sched_del with the channel UUID as the argument will remove all previously scheduled hangups, transfers and broadcasts for this channel.Examples:sched_del my_groupsched_del 2 sched_hangup Schedule a running call to hangup.Usage:sched_hangup [+] []sched_hangup +0 is the same as uuid_kill sched_transfer Schedule a transfer for a running call.Usage:sched_transfer [+] [] [] stun Executes a STUN lookup.Usage:stun [:port]Example:stun stun.freeswitch.org system Execute a system command.Usage:system The is passed to the system shell, where it may be expanded or interpreted in ways you don’t expect. This can lead to security bugs if you’re not careful. For example, the following command is dangerous:If a malicious remote caller somehow sets his caller ID name to “; rm -rf /” you would unintentionally be executing this shell command:log_caller_name; rm -rf /This would be a Bad Thing. time_test Runs a test to see how bad timer jitter is. It runs the test times if specified, otherwise it uses the default count of 10, and tries to sleep for mss microseconds. It returns the actual timer duration along with an average.Usage:time_test [count]Example:time_test 100 5\ntest 1 sleep 100 99test 2 sleep 100 97test 3 sleep 100 96test 4 sleep 100 97test 5 sleep 100 102avg 98 timer_test Runs a test to see how bad timer jitter is. Unlike time_test, this uses the actual FreeSWITCH timer infrastructure to do the timer test and exercises the timers used for call processing.Usage:timer_test \u003c10|20|40|60|120\u003e [\u003c1..200\u003e] []The first argument is the timer interval.The second is the number of test iterations.The third is the timer name; “show timers” will give you a list.Example:timer_test 20 3\nAvg: 16.408ms Total Time: 49.269ms\n2010-01-29 12:01:15.504280 [CONSOLE] mod_commands.c:310 Timer Test: 1 sleep 20 92542010-01-29 12:01:15.524351 [CONSOLE] mod_commands.c:310 Timer Test: 2 sleep 20 200422010-01-29 12:01:15.544336 [CONSOLE] mod_commands.c:310 Timer Test: 3 sleep 20 19928 tone_detect Start Tone Detection on a channel.Usage:tone_detect [ ] is required when this is executed as an api call; as a dialplan app the uuid is implicit as part of the channel variables is an arbitrary name that identifies this tone_detect instance; required frequencies to detect; required ‘r’ or ‘w’ to specify which direction to monitor duration during which to detect tones;0 = detect forever+time = number of milliseconds after tone_detect is executedtime = absolute time to stop in seconds since The Epoch (1 January, 1970) FS application to execute when tone_detect is triggered; if app is omitted, only an event will be returned arguments to application enclosed in single quotes the number of times tone_detect should be triggered before executing the specified appOnce tone_detect returns a result, it will not trigger again until reset. Reset tone_detect by calling tone_detect with no additional arguments to reactivate the previously specified tone_detect declaration.See also http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_tone_detect unsched_api Unschedule a previously scheduled API command.Usage:unsched_api url_decode Usage:url_decode url_encode Url encode a string.Usage:url_encode user_data Retrieves user information (parameters or variables) as defined in the FreeSWITCH user directory.Usage:user_data @ is the user’s id is the user’s domain specifies whether the requested data is contained in the “variables” or “parameters” section of the user’s record is the name (key) of the variable to retrieveExamples:user_data 1000@192.168.1.101 param passwordwill return a result of 1234, anduser_data 1000@192.168.1.101 var accountcodewill return a result of 1000 from the example user shown in user_exists, anduser_data 1000@192.168.1.101 attr idwill return the user’s actual alphanumeric ID (i.e. “john”) when number-alias=“1000” was set as an attribute for that user. user_exists Checks to see if a user exists. Matches user tags found in the directory and returns either true/false:Usage:user_exists references a key specified in a directory’s user tag represents the value of the key is the domain to which the user belongsExample:user_exists id 1000 192.168.1.101will return true where there exists in the directory a user with a key called id whose value equals 1000:User Directory EntryIn the above example, we also could have tested for randomvar:user_exists randomvar 45 192.168.1.101And we would have received the same true result, but:user_exists accountcode 1000 192.168.1.101oruser_exists vm-password 1000 192.168.1.101Would have returned false.\n","wordCount":"7361","inLanguage":"en","image":"https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2019-12-10T11:32:38+08:00","dateModified":"2019-12-10T11:32:38+08:00","author":{"@type":"Person","name":"Eddie Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/freeswitch/mod-command/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org/ accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/books/ title=读书><span>读书</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/kamailio/56/ title="Kamailio 5.6 wiki"><span>Kamailio 5.6 wiki</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/fe/ title=前端><span>前端</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org/>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/freeswitch/>FreeSWITCH之路</a></div><h1 class="post-title entry-hint-parent">mod_commands</h1><div class=post-meta><span title='2019-12-10 11:32:38 +0800 CST'>2019-12-10 11:32:38</span>&nbsp;·&nbsp;35 min&nbsp;·&nbsp;Eddie Wang&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/freeswitch/mod-command/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#usage aria-label=Usage><strong>Usage</strong></a><ul><li><a href=#clihttpsfreeswitchorgconfluencepluginsservletmobilecontentid1966741contentview1048948 aria-label=CLI><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048948">CLI</a></a></li><li><a href=#apievent-interfaces aria-label="API/Event Interfaces"><strong>API/Event Interfaces</strong></a></li><li><a href=#scripting-interfaces aria-label="Scripting Interfaces"><strong>Scripting Interfaces</strong></a></li><li><a href=#from-the-dialplanhttpsfreeswitchorgconfluencepluginsservletmobilecontentid1966741contentview1048645 aria-label="From the Dialplan"><strong>From the</strong> <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048645">Dialplan</a></a></li></ul></li><li><a href=#extraction-script aria-label="Extraction Script"><strong>Extraction Script</strong></a></li><li><a href=#core-commands aria-label="Core Commands"><strong>Core Commands</strong></a><ul><li><a href=#acl aria-label=acl><strong>acl</strong></a></li><li><a href=#alias aria-label=alias><strong>alias</strong></a></li><li><a href=#bgapi aria-label=bgapi><strong>bgapi</strong></a></li><li><a href=#complete aria-label=complete><strong>complete</strong></a></li><li><a href=#cond aria-label=cond><strong>cond</strong></a></li><li><a href=#domain_exists aria-label=domain_exists><strong>domain_exists</strong></a></li><li><a href=#eval aria-label=eval><strong>eval</strong></a></li><li><a href=#expand aria-label=expand><strong>expand</strong></a></li><li><a href=#fsctl aria-label=fsctl><strong>fsctl</strong></a><ul><li><a href=#api_expansion aria-label=api_expansion><strong>api_expansion</strong></a></li><li><a href=#calibrate_clock aria-label=calibrate_clock><strong>calibrate_clock</strong></a></li><li><a href=#debug_level aria-label=**debug_level **>**debug_level **</a></li><li><a href=#debug_sql aria-label=debug_sql><strong>debug_sql</strong></a></li><li><a href=#default_dtmf_duration aria-label=default_dtmf_duration><strong>default_dtmf_duration</strong></a></li><li><a href=#flush_db_handles aria-label=flush_db_handles><strong>flush_db_handles</strong></a></li><li><a href=#hupall aria-label=hupall><strong>hupall</strong></a></li><li><a href=#last_sps aria-label=last_sps><strong>last_sps</strong></a></li><li><a href=#loglevel aria-label=loglevel><strong>loglevel</strong></a></li><li><a href=#max_sessions aria-label=max_sessions><strong>max_sessions</strong></a></li><li><a href=#max_dtmf_duration aria-label=max_dtmf_duration><strong>max_dtmf_duration</strong></a></li><li><a href=#min_dtmf_duration aria-label=min_dtmf_duration><strong>min_dtmf_duration</strong></a></li><li><a href=#min_idle_cpu aria-label=min_idle_cpu><strong>min_idle_cpu</strong></a></li><li><a href=#pause aria-label=pause><strong>pause</strong></a></li><li><a href=#pause_check aria-label=pause_check><strong>pause_check</strong></a></li><li><a href=#ready_check aria-label=ready_check><strong>ready_check</strong></a></li><li><a href=#reclaim_mem aria-label=reclaim_mem><strong>reclaim_mem</strong></a></li><li><a href=#recover aria-label=recover><strong>recover</strong></a></li><li><a href=#resume aria-label=resume><strong>resume</strong></a></li><li><a href=#save_history aria-label=save_history><strong>save_history</strong></a></li><li><a href=#send_sighup aria-label=send_sighup><strong>send_sighup</strong></a></li><li><a href=#shutdown aria-label=shutdown><strong>shutdown</strong></a></li><li><a href=#shutdown_check aria-label=shutdown_check><strong>shutdown_check</strong></a></li><li><a href=#sps aria-label=sps><strong>sps</strong></a></li><li><a href=#sync_clock aria-label=sync_clock><strong>sync_clock</strong></a></li><li><a href=#sync_clock_when_idle aria-label=sync_clock_when_idle><strong>sync_clock_when_idle</strong></a></li><li><a href=#verbose_events aria-label=verbose_events><strong>verbose_events</strong></a></li></ul></li><li><a href=#global_getvar aria-label=global_getvar><strong>global_getvar</strong></a></li><li><a href=#global_setvar aria-label=global_setvar><strong>global_setvar</strong></a></li><li><a href=#group_call aria-label=group_call><strong>group_call</strong></a></li><li><a href=#help aria-label=help><strong>help</strong></a></li><li><a href=#host_lookup aria-label=host_lookup><strong>host_lookup</strong></a></li><li><a href=#hupall-1 aria-label=hupall><strong>hupall</strong></a></li><li><a href=#in_group aria-label=in_group><strong>in_group</strong></a></li><li><a href=#is_lan_addr aria-label=is_lan_addr><strong>is_lan_addr</strong></a></li><li><a href=#json aria-label=json><strong>json</strong></a></li><li><a href=#load aria-label=load><strong>load</strong></a></li><li><a href=#md5 aria-label=md5><strong>md5</strong></a></li><li><a href=#module_exists aria-label=module_exists><strong>module_exists</strong></a></li><li><a href=#msleep aria-label=msleep><strong>msleep</strong></a></li><li><a href=#nat_map aria-label=nat_map><strong>nat_map</strong></a></li><li><a href=#regex aria-label=regex><strong>regex</strong></a></li><li><a href=#reload aria-label=reload><strong>reload</strong></a></li><li><a href=#reloadacl aria-label=reloadacl><strong>reloadacl</strong></a></li><li><a href=#reloadxml aria-label=reloadxml><strong>reloadxml</strong></a></li><li><a href=#show aria-label=show><strong>show</strong></a><ul><li><a href=#tips-for-showing-calls-and-channels aria-label="Tips For Showing Calls and Channels"><strong>Tips For Showing Calls and Channels</strong></a></li></ul></li><li><a href=#shutdown-1 aria-label=shutdown><strong>shutdown</strong></a></li><li><a href=#status aria-label=status><strong>status</strong></a></li><li><a href=#strftime_tz aria-label=strftime_tz><strong>strftime_tz</strong></a></li><li><a href=#unload aria-label=unload><strong>unload</strong></a></li><li><a href=#version aria-label=version><strong>version</strong></a></li><li><a href=#xml_locate aria-label=xml_locate><strong>xml_locate</strong></a></li><li><a href=#xml_wrap aria-label=xml_wrap><strong>xml_wrap</strong></a></li></ul></li><li><a href=#call-management-commands aria-label="Call Management Commands"><strong>Call Management Commands</strong></a><ul><li><a href=#break aria-label=break><strong>break</strong></a></li><li><a href=#create_uuid aria-label=create_uuid><strong>create_uuid</strong></a></li><li><a href=#originate aria-label=originate><strong>originate</strong></a><ul><li><a href=#arguments aria-label=Arguments><strong>Arguments</strong></a></li><li><a href=#variables aria-label=Variables><strong>Variables</strong></a></li><li><a href=#examples aria-label=Examples><strong>Examples</strong></a></li></ul></li><li><a href=#pause-1 aria-label=pause><strong>pause</strong></a></li><li><a href=#uuid_answer aria-label=uuid_answer><strong>uuid_answer</strong></a></li><li><a href=#uuid_audio aria-label=uuid_audio><strong>uuid_audio</strong></a></li><li><a href=#uuid_break aria-label=uuid_break><strong>uuid_break</strong></a></li><li><a href=#uuid_bridge aria-label=uuid_bridge><strong>uuid_bridge</strong></a></li><li><a href=#uuid_broadcast aria-label=uuid_broadcast><strong>uuid_broadcast</strong></a></li><li><a href=#uuid_buglist aria-label=uuid_buglist><strong>uuid_buglist</strong></a></li><li><a href=#uuid_chat aria-label=uuid_chat><strong>uuid_chat</strong></a></li><li><a href=#uuid_debug_media aria-label=uuid_debug_media><strong>uuid_debug_media</strong></a><ul><li><a href=#read-format aria-label="Read Format"><strong>Read Format</strong></a></li><li><a href=#write-format aria-label="Write Format"><strong>Write Format</strong></a></li></ul></li><li><a href=#uuid_deflect aria-label=uuid_deflect><strong>uuid_deflect</strong></a></li><li><a href=#uuid_displace aria-label=uuid_displace><strong>uuid_displace</strong></a></li><li><a href=#uuid_display aria-label=uuid_display><strong>uuid_display</strong></a></li><li><a href=#uuid_dual_transfer aria-label=uuid_dual_transfer><strong>uuid_dual_transfer</strong></a></li><li><a href=#uuid_dump aria-label=uuid_dump><strong>uuid_dump</strong></a></li><li><a href=#uuid_early_ok aria-label=uuid_early_ok><strong>uuid_early_ok</strong></a></li><li><a href=#uuid_exists aria-label=uuid_exists><strong>uuid_exists</strong></a></li><li><a href=#uuid_flush_dtmf aria-label=uuid_flush_dtmf><strong>uuid_flush_dtmf</strong></a></li><li><a href=#uuid_fileman aria-label=uuid_fileman><strong>uuid_fileman</strong></a></li><li><a href=#uuid_getvar aria-label=uuid_getvar><strong>uuid_getvar</strong></a></li><li><a href=#uuid_hold aria-label=uuid_hold><strong>uuid_hold</strong></a></li><li><a href=#uuid_kill aria-label=uuid_kill><strong>uuid_kill</strong></a></li><li><a href=#uuid_limit aria-label=uuid_limit><strong>uuid_limit</strong></a></li><li><a href=#uuid_media aria-label=uuid_media><strong>uuid_media</strong></a></li><li><a href=#uuid_media_reneg aria-label=uuid_media_reneg><strong>uuid_media_reneg</strong></a></li><li><a href=#uuid_park aria-label=uuid_park><strong>uuid_park</strong></a></li><li><a href=#uuid_pre_answer aria-label=uuid_pre_answer><strong>uuid_pre_answer</strong></a></li><li><a href=#uuid_preprocess aria-label=uuid_preprocess><strong>uuid_preprocess</strong></a></li><li><a href=#uuid_recv_dtmf aria-label=uuid_recv_dtmf><strong>uuid_recv_dtmf</strong></a></li><li><a href=#uuid_send_dtmf aria-label=uuid_send_dtmf><strong>uuid_send_dtmf</strong></a></li><li><a href=#uuid_send_info aria-label=uuid_send_info><strong>uuid_send_info</strong></a></li><li><a href=#uuid_session_heartbeat aria-label=uuid_session_heartbeat><strong>uuid_session_heartbeat</strong></a></li><li><a href=#uuid_setvar aria-label=uuid_setvar><strong>uuid_setvar</strong></a></li><li><a href=#uuid_setvar_multi aria-label=uuid_setvar_multi><strong>uuid_setvar_multi</strong></a></li><li><a href=#uuid_simplify aria-label=uuid_simplify><strong>uuid_simplify</strong></a></li><li><a href=#uuid_transfer aria-label=uuid_transfer><strong>uuid_transfer</strong></a></li><li><a href=#uuid_phone_event aria-label=uuid_phone_event><strong>uuid_phone_event</strong></a></li></ul></li><li><a href=#recordplayback-commands aria-label="Record/Playback Commands"><strong>Record/Playback Commands</strong></a><ul><li><a href=#uuid_record aria-label=uuid_record><strong>uuid_record</strong></a></li></ul></li><li><a href=#limit-commands aria-label="Limit Commands"><strong>Limit Commands</strong></a><ul><li><a href=#limit_reset aria-label=limit_reset><strong>limit_reset</strong></a></li><li><a href=#limit_status aria-label=limit_status><strong>limit_status</strong></a></li><li><a href=#limit_usage aria-label=limit_usage><strong>limit_usage</strong></a></li><li><a href=#uuid_limit_release aria-label=uuid_limit_release><strong>uuid_limit_release</strong></a></li><li><a href=#limit_interval_reset aria-label=limit_interval_reset><strong>limit_interval_reset</strong></a></li></ul></li><li><a href=#miscellaneous-commands aria-label="Miscellaneous Commands"><strong>Miscellaneous Commands</strong></a><ul><li><a href=#bg_system aria-label=bg_system><strong>bg_system</strong></a></li><li><a href=#echo aria-label=echo><strong>echo</strong></a></li><li><a href=#file_exists aria-label=file_exists><strong>file_exists</strong></a></li><li><a href=#find_user_xml aria-label=find_user_xml><strong>find_user_xml</strong></a></li><li><a href=#list_users aria-label=list_users><strong>list_users</strong></a></li><li><a href=#sched_api aria-label=sched_api><strong>sched_api</strong></a></li><li><a href=#sched_broadcast aria-label=sched_broadcast><strong>sched_broadcast</strong></a></li><li><a href=#sched_del aria-label=sched_del><strong>sched_del</strong></a></li><li><a href=#sched_hangup aria-label=sched_hangup><strong>sched_hangup</strong></a></li><li><a href=#sched_transfer aria-label=sched_transfer><strong>sched_transfer</strong></a></li><li><a href=#stun aria-label=stun><strong>stun</strong></a></li><li><a href=#system aria-label=system><strong>system</strong></a></li><li><a href=#time_test aria-label=time_test><strong>time_test</strong></a></li><li><a href=#timer_test aria-label=timer_test><strong>timer_test</strong></a></li><li><a href=#tone_detect aria-label=tone_detect><strong>tone_detect</strong></a></li><li><a href=#unsched_api aria-label=unsched_api><strong>unsched_api</strong></a></li><li><a href=#url_decode aria-label=url_decode><strong>url_decode</strong></a></li><li><a href=#url_encode aria-label=url_encode><strong>url_encode</strong></a></li><li><a href=#user_data aria-label=user_data><strong>user_data</strong></a></li><li><a href=#user_exists aria-label=user_exists><strong>user_exists</strong></a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><p></p><h1 id=usage><strong>Usage</strong><a hidden class=anchor aria-hidden=true href=#usage>#</a></h1><p></p><h2 id=clihttpsfreeswitchorgconfluencepluginsservletmobilecontentid1966741contentview1048948><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048948">CLI</a><a hidden class=anchor aria-hidden=true href=#clihttpsfreeswitchorgconfluencepluginsservletmobilecontentid1966741contentview1048948>#</a></h2><p>See below.</p><h2 id=apievent-interfaces><strong>API/Event Interfaces</strong><a hidden class=anchor aria-hidden=true href=#apievent-interfaces>#</a></h2><ul><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048924">mod_event_socket</a></li><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048926">mod_erlang_event</a></li><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048928">mod_xml_rpc</a></li></ul><h2 id=scripting-interfaces><strong>Scripting Interfaces</strong><a hidden class=anchor aria-hidden=true href=#scripting-interfaces>#</a></h2><ul><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048930">mod_perl</a></li><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048935">mod_v8</a></li><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048940">mod_python</a></li><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048944">mod_lua</a></li></ul><h2 id=from-the-dialplanhttpsfreeswitchorgconfluencepluginsservletmobilecontentid1966741contentview1048645><strong>From the</strong> <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048645">Dialplan</a><a hidden class=anchor aria-hidden=true href=#from-the-dialplanhttpsfreeswitchorgconfluencepluginsservletmobilecontentid1966741contentview1048645>#</a></h2><p>An <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API command</a> can be called from the dialplan. Example:<strong>Invoke API Command From Dialplan</strong>Other examples:<strong>Other Dialplan API Command Examples</strong><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API commands</a> with multiple arguments usually have the arguments separated by a space:<strong>Multiple Arguments</strong></p><p><strong>Dialplan Usage</strong>If you are calling an <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API command</a> from the dialplan make absolutely certain that there isn&rsquo;t already a dialplan application that gives you the functionality you are looking for. See <a href=https://wiki.freeswitch.org/wiki/Mod_dptools>mod_dptools</a> for a list of dialplan applications, they are quite extensive.</p><h1 id=extraction-script><strong>Extraction Script</strong><a hidden class=anchor aria-hidden=true href=#extraction-script>#</a></h1><p>Mitch Capper wrote a Perl script to extract commands from mod_commands source code. It&rsquo;s tailored specifically for extracting from mod_commands but should work for most other files.<strong>Extraction Perl Script</strong>#!/usr/bin/perluse strict;open (fl,&ldquo;src/mod/applications/mod_commands/mod_commands.c&rdquo;);my $cont;{    local $/ = undef;    $cont = ;}close fl;my %DEFINES;my $reg_define = qr/[A-Za-z0-9_]+/;my $reg_function = qr/[A-Za-z0-9_]+/;my $reg_string_or_define = qr/(?:(?:$reg_define)|(?:"[^"]*"))/;</p><p>#load defineswhile ($cont =~ /                    ^\s* #define \s+ ($reg_define) \s+ "([^"]*)"                /mgx){    warn &ldquo;$1 is #defined multiple times&rdquo; if ($DEFINES{$1});    $DEFINES{$1} = $2;}</p><p>sub resolve_str_or_define($){    my ($str) = @_;    if ($str =~ s/^"// && $str =~ s/"$//){ #if starts and ends with a quote strip them off and return the str        return $str;    }    warn &ldquo;Unable to resolve define: $str&rdquo; if (! $DEFINES{$str});    return $DEFINES{$str};}#parse commandswhile ($cont =~ /                    SWITCH_ADD_API \s* ( ([^,]+) #interface $1                    ,\s* ($reg_string_or_define) # command $2                    ,\s* ($reg_string_or_define) # command description $3                    ,\s* ($reg_function) # function $4                    ,\s* ($reg_string_or_define) # usage $5                    \s*);                /sgx){        my ($interface,$command,$descr,$function,$usage) = ($1,$2,$3,$4,$5);        $command = resolve_str_or_define($command);        $descr = resolve_str_or_define($descr);        $usage = resolve_str_or_define($usage);        warn &ldquo;Found a not command interface of: $interface for command: $command&rdquo; if ($interface ne &ldquo;commands_api_interface&rdquo;);        print &ldquo;$command &ndash; $descr &ndash; $usage\n&rdquo;;}</p><h1 id=core-commands><strong>Core Commands</strong><a hidden class=anchor aria-hidden=true href=#core-commands>#</a></h1><p>Implemented in <a href=http://fisheye.freeswitch.org/browse/freeswitch.git/src/mod/applications/mod_commands/mod_commands.c>http://fisheye.freeswitch.org/browse/freeswitch.git/src/mod/applications/mod_commands/mod_commands.c</a><strong>Format of Returned Data</strong>Results of some status and listing commands are presented in comma delimited lists by default. Data returned from some modules may also contain commas, making it difficult to automate result processing. They may be able to be retrieved in an XML format by appending the string &ldquo;as xml&rdquo; to the end of the command string, or as json using &ldquo;as json&rdquo;, or change the delimiter from comma to something else using &ldquo;as delim |&rdquo;.</p><h2 id=acl><strong>acl</strong><a hidden class=anchor aria-hidden=true href=#acl>#</a></h2><p>Compare an ip to an Access Control ListUsage: acl &lt;list_name></p><h2 id=alias><strong>alias</strong><a hidden class=anchor aria-hidden=true href=#alias>#</a></h2><p>Alias: a means to save some keystrokes on commonly used commands.Usage: alias add | del [|*]Example:freeswitch> alias add reloadall reloadacl reloadxml+OKfreeswitch> alias add unreg sofia profile internal flush_inbound_reg+OKYou can add aliases that persist across restarts using the stickyadd argument:freeswitch> alias stickyadd reloadall reloadacl reloadxml+OKOnly really works from the <a href=https://wiki.freeswitch.org/wiki/Mod_console>console</a>, not <a href=https://wiki.freeswitch.org/wiki/Fs_cli>fs_cli</a>.</p><h2 id=bgapi><strong>bgapi</strong><a hidden class=anchor aria-hidden=true href=#bgapi>#</a></h2><p>Execute an <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API command</a> in a thread.Usage: bgapi [ ]</p><h2 id=complete><strong>complete</strong><a hidden class=anchor aria-hidden=true href=#complete>#</a></h2><p>Complete.Usage: complete add |del [|*]</p><h2 id=cond><strong>cond</strong><a hidden class=anchor aria-hidden=true href=#cond>#</a></h2><p>Evaluate a conditional expression.Usage: cond  ?  : Operators supported by are:</p><ul><li>== (equal to)</li><li>!= (not equal to)</li><li><blockquote><p>  (greater than)</p></blockquote></li><li><blockquote><p>= (greater than or equal to)</p></blockquote></li><li>&lt;  (less than)</li><li>&lt;= (less than or equal to)</li></ul><p><strong>How are values compared?</strong></p><ul><li>two strings are compared as strings</li><li>two numbers are compared as numbers</li><li>a string and a number are compared as strlen(string) and numbers</li></ul><p>For example, foo == 3 evaluates to true, and foo == three to false.</p><p> Examples (click to expand)</p><p>Example:<strong>Return true if first value is greater than the second</strong>cond 5 > 3 ? true : falsetrueExample in dialplan:Slightly more complex example:</p><p><strong>Note about syntax</strong>The whitespace around the question mark and colon are required since <a href=https://freeswitch.org/jira/browse/FS-5945>FS-5945</a>. Before that, they were optional. If the spaces are missing, the cond function will return -ERR.</p><h2 id=domain_exists><strong>domain_exists</strong><a hidden class=anchor aria-hidden=true href=#domain_exists>#</a></h2><p>Check if a FreeSWITCH domain exists.Usage: domain_exists</p><h2 id=eval><strong>eval</strong><a hidden class=anchor aria-hidden=true href=#eval>#</a></h2><p>Eval (noop). Evaluates a string, expands variables. Those variables that are set only during a call session require the uuid of the desired session or else return &ldquo;-ERR no reply&rdquo;.Usage: eval [uuid: ]Examples:eval ${domain}10.15.0.94eval Hello, World!Hello, World!eval uuid:e72aff5c-6838-49a8-98fb-84c90ad840d9 ${channel-state}CS_EXECUTE</p><h2 id=expand><strong>expand</strong><a hidden class=anchor aria-hidden=true href=#expand>#</a></h2><p>Execute an <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API command</a> with variable expansion.Usage: expand [uuid: ] Example:expand originate sofia/internal/1001%${domain} 9999In this example the value of ${domain} is expanded. If the domain were, for example, &ldquo;192.168.1.1&rdquo; then this command would be executed:originate sofia/internal/1001%192.168.1.1 9999</p><h2 id=fsctl><strong>fsctl</strong><a hidden class=anchor aria-hidden=true href=#fsctl>#</a></h2><p>Send control messages to FreeSWITCH.USAGE: fsctl   [   api_expansion [on|off] |   calibrate_clock |   debug_level [level] |   debug_sql |   default_dtmf_duration [n] |   flush_db_handles |   hupall |   last_sps |   loglevel [level] |   max_dtmf_duration [n] |   max_sessions [n] |   min_dtmf_duration [n] |   min_idle_cpu [d] |   pause [inbound|outbound] |   pause_check [inbound|outbound] |   ready_check |   reclaim_mem |   recover |   resume [inbound|outbound] |   save_history |   send_sighup |   shutdown [cancel|elegant|asap|now|restart] |   shutdown_check |   sps |   sps_peak_reset |   sql [start] |   sync_clock |   sync_clock_when_idle |   threaded_system_exec |   verbose_events [on|off]   ]</p><p><strong>fsctl arguments</strong></p><h3 id=api_expansion><strong>api_expansion</strong><a hidden class=anchor aria-hidden=true href=#api_expansion>#</a></h3><p>Usage: fsctl api_expansion [on|off]Toggles API expansion. With it off, no <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API functions</a> can be expanded inside channel variables like ${show channels} This is a specific security mode that is not often used.</p><h3 id=calibrate_clock><strong>calibrate_clock</strong><a hidden class=anchor aria-hidden=true href=#calibrate_clock>#</a></h3><p>Usage: fsctl calibrate_clockRuns an algorithm to compute how long it actually must sleep in order to sleep for a true 1ms.  It&rsquo;s only useful in older kernels that don&rsquo;t have timerfd.  In those older kernels FS auto detects that it needs to do perform that computation. This command just repeats the calibration.</p><h3 id=debug_level>**debug_level **<a hidden class=anchor aria-hidden=true href=#debug_level>#</a></h3><p>Usage: fsctl debug_level [level]Set the amount of debug information that will be posted to the log. 1 is less verbose while 9 is more verbose. Additional debug messages will be posted at the ALERT loglevel.0 - fatal errors, panic1 - critical errors, minimal progress at subsystem level2 - non-critical errors3 - warnings, progress messages5 - signaling protocol actions (incoming packets, &mldr;)7 - media protocol actions (incoming packets, &mldr;)9 - entering/exiting functions, very verbatim progress</p><p></p><h3 id=debug_sql><strong>debug_sql</strong><a hidden class=anchor aria-hidden=true href=#debug_sql>#</a></h3><p>Usage: fsctl debug_sqlToggle core SQL debugging messages on or off each time this command is invoked. Use with caution on busy systems. In order to see all messages issue the &ldquo;logelevel debug&rdquo; command on the fs_cli interface.</p><h3 id=default_dtmf_duration><strong>default_dtmf_duration</strong><a hidden class=anchor aria-hidden=true href=#default_dtmf_duration>#</a></h3><p>Usage: fsctl default_dtmf_duration [int]int = number of clock ticksExample:fsctl default_dtmf_duration 2000This example sets the default_dtmf_duration switch parameter to 250ms. The number is specified in clock ticks (CT) where duration (milliseconds) = CT / 8 or CT = duration * 8The default_dtmf_duration specifies the DTMF duration to use on originated DTMF events or on events that are received without a duration specified. This value is bounded on the lower end by min_dtmf_duration and on the upper end by max_dtmf_duration. So max_dtmf_duration >= default_dtmf_duration >= min_dtmf_duration . This value can be set persistently in switch.conf.xmlTo check the current value:fsctl default_dtmf_duration 0FS recognizes a duration of 0 as a status check. Instead of setting the value to 0, it simply returns the current value.</p><h3 id=flush_db_handles><strong>flush_db_handles</strong><a hidden class=anchor aria-hidden=true href=#flush_db_handles>#</a></h3><p>Usage: fsctl flush_db_handlesFlushes cached database handles from the core db handlers. FreeSWITCH reuses db handles whenever possible, but a heavily loaded FS system can accumulate a large number of db handles during peak periods while FS continues to allocate new db handles to service new requests in a FIFO manner. &ldquo;fsctl flush_db_handles&rdquo; closes db connections that are no longer needed to avoid exceeding connections to the database server.</p><h3 id=hupall><strong>hupall</strong><a hidden class=anchor aria-hidden=true href=#hupall>#</a></h3><p>Usage: fsctl hupall &lt;clearing_type> dialed_ext Disconnect existing calls to a destination and post a clearing cause.For example, to kill an active call with normal clearing and the destination being extension 1000:fsctl hupall normal_clearing dialed_ext 1000</p><h3 id=last_sps><strong>last_sps</strong><a hidden class=anchor aria-hidden=true href=#last_sps>#</a></h3><p>Usage: fsctl last_spsQuery the actual sessions-per-second.fsctl last_sps+OK last sessions per second: 723987253(Your mileage might vary.)</p><h3 id=loglevel><strong>loglevel</strong><a hidden class=anchor aria-hidden=true href=#loglevel>#</a></h3><p>Usage: fsctl loglevel [level]Filter much detail the log messages will contain when displayed on the fs_cli interface. See <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/1048950">mod_console</a> for legal values of &ldquo;level&rdquo; and further discussion.The available loglevels can be specified by number or name:0 - CONSOLE1 - ALERT2 - CRIT3 - ERR4 - WARNING5 - NOTICE6 - INFO7 - DEBUG</p><h3 id=max_sessions><strong>max_sessions</strong><a hidden class=anchor aria-hidden=true href=#max_sessions>#</a></h3><p>Usage: fsctl max_sessions [int]Set how many simultaneous call sessions FS will allow. This value can be ascertained by load testing, but is affected by processor speed and quantity, network and disk bandwidth, choice of codecs, and other factors. See switch.conf.xml for the persistent setting max-sessions.</p><h3 id=max_dtmf_duration><strong>max_dtmf_duration</strong><a hidden class=anchor aria-hidden=true href=#max_dtmf_duration>#</a></h3><p>Usage: fsctl max_dtmf_duration [int]Default = 192000 clock ticksExample:fsctl max_dtmf_duration 80000This example sets the max_dtmf_duration switch parameter to 10,000ms (10 seconds). The integer is specified in clock ticks (CT) where CT / 8 = ms. The max_dtmf_duration caps the playout of a DTMF event at the specified duration. Events exceeding this duration will be truncated to this duration. You cannot configure a duration that exceeds this setting. This setting can be lowered, but cannot exceed 192000 (the default). This setting cannot be set lower than min_dtmf_duration. This setting can be set persistently in switch.conf.xml as max-dtmf-duration.To query the current value:fsctl max_dtmf_duration 0FreeSWITCH recognizes a duration of 0 as a status check. Instead of setting the value to 0, it simply returns the current value.</p><h3 id=min_dtmf_duration><strong>min_dtmf_duration</strong><a hidden class=anchor aria-hidden=true href=#min_dtmf_duration>#</a></h3><p>Usage: fsctl min_dtmf_duration [int]Default = 400 clock ticksExample:fsctl min_dtmf_duration 800This example sets the min_dtmf_duration switch parameter to 100ms. The integer is specified in clock ticks (CT) where CT / 8 = ms. The min_dtmf_duration specifies the minimum DTMF duration to use on outgoing events. Events shorter than this will be increased in duration to match min_dtmf_duration. You cannot configure a DTMF duration on a profile that is less than this setting. You may increase this value, but cannot set it lower than 400 (the default). This value cannot exceed max_dtmf_duration. This setting can be set persistently in switch.conf.xml as min-dtmf-duration.It is worth noting that many devices squelch in-band DTMF when sending <a href=https://tools.ietf.org/html/rfc2833>RFC 2833</a>. Devices that squelch in-band DTMF have a certain reaction time and clamping time which can sometimes reach as high as 40ms, though most can do it in less than 20ms. As the shortness of your DTMF event duration approaches this clamping threshold, the risk of your DTMF being ignored as a squelched event increases. If your call is always IP-IP the entire route, this is likely not a concern. However, when your call is sent to the PSTN, the <a href=https://tools.ietf.org/html/rfc2833>RFC 2833</a> DTMF events must be encoded in the audio stream. This means that other devices down the line (possibly a PBX or IVR that you are calling) might not hear DTMF tones that are long enough to decode and so will ignore them entirely. For this reason, it is recommended that you do not send DTMF events shorter than 80ms.Checking the current value:fsctl min_dtmf_duration 0FreeSWITCH recognizes a duration of 0 as a status check. Instead of setting the value to 0, it simply returns the current value.</p><h3 id=min_idle_cpu><strong>min_idle_cpu</strong><a hidden class=anchor aria-hidden=true href=#min_idle_cpu>#</a></h3><p>Usage: fsctl min_idle_cpu [int]Allocates the minimum percentage of CPU idle time available to other processes to prevent FreeSWITCH from consuming all available CPU cycles.Example:fsctl min_idle_cpu 10This allocates a minimum of 10% CPU idle time which is not available for processing by FS. Once FS reaches 90% CPU consumption it will respond with cause code 503 to additional SIP requests until its own usage drops below 90%, while reserving that last 10% for other processes on the machine. </p><h3 id=pause><strong>pause</strong><a hidden class=anchor aria-hidden=true href=#pause>#</a></h3><p>Usage: fsctl pause [inbound|outbound]Pauses the ability to receive inbound or originate outbound calls, or both directions if the keyword is omitted. Executing fsctl pause inbound will also prevent registration requests from being processed. Executing fsctl pause outbound will result in the Critical log message &ldquo;The system cannot create any outbound sessions at this time&rdquo; in the FS log.Use resume with the corresponding argument to restore normal operation.</p><h3 id=pause_check><strong>pause_check</strong><a hidden class=anchor aria-hidden=true href=#pause_check>#</a></h3><p>Usage: fsctl pause_check [inbound|outbound]Returns true if the specified mode is active.Examples:fsctl pause_check inboundtrueindicates that inbound calls and registrations are paused. Use fsctl resume inbound to restore normal operation.fsctl pause_checktrueindicates that both inbound and outbound sessions are paused. Use fsctl resume to restore normal operation.</p><h3 id=ready_check><strong>ready_check</strong><a hidden class=anchor aria-hidden=true href=#ready_check>#</a></h3><p>Usage: fsctl ready_checkReturns true if the system is in the ready state, as opposed to awaiting an elegant shutdown or other not-ready state.</p><h3 id=reclaim_mem><strong>reclaim_mem</strong><a hidden class=anchor aria-hidden=true href=#reclaim_mem>#</a></h3><p>Usage: fsctl reclaim_mem</p><h3 id=recover><strong>recover</strong><a hidden class=anchor aria-hidden=true href=#recover>#</a></h3><p>Usage: fsctl recoverSends an endpoint–specific recover command to each channel detected as recoverable. This replaces “sofia recover” and makes it possible to have multiple endpoints besides SIP implement recovery.</p><h3 id=resume><strong>resume</strong><a hidden class=anchor aria-hidden=true href=#resume>#</a></h3><p>Usage: fsctl resume [inbound|outbound]Resumes normal operation after pausing inbound, outbound, or both directions of call processing by FreeSWITCH.Example:fsctl resume inbound+OKResumes processing of inbound calls and registrations. Note that this command always returns +OK, but the same keyword must be used that corresponds to the one used in the pause command in order to take effect.</p><h3 id=save_history><strong>save_history</strong><a hidden class=anchor aria-hidden=true href=#save_history>#</a></h3><p>Usage: fsctl save_historyWrite out the command history in anticipation of executing a configuration that might crash FS. This is useful when debugging a new module or script to allow other developers to see what commands were executed before the crash.</p><h3 id=send_sighup><strong>send_sighup</strong><a hidden class=anchor aria-hidden=true href=#send_sighup>#</a></h3><p>Usage: fsctl send_sighupDoes the same thing that killing the FS process with -HUP would do without having to use the UNIX kill command. Useful in environments like Windows where there is no kill command or in cron or other scripts by using fs_cli -x &ldquo;fsctl send_sighup&rdquo; where the FS user process might not have privileges to use the UNIX kill command.</p><h3 id=shutdown><strong>shutdown</strong><a hidden class=anchor aria-hidden=true href=#shutdown>#</a></h3><p>Usage: fsctl shutdown [asap|asap restart|cancel|elegant|now|restart|restart asap|restart elegant]</p><ul><li>cancel - discontinue a previous shutdown request.</li><li>elegant - wait for all traffic to stop, while allowing new traffic.</li><li>asap - wait for all traffic to stop, but deny new traffic.</li><li>now - shutdown FreeSWITCH immediately.</li><li>restart - restart FreeSWITCH immediately following the shutdown.</li></ul><p>When giving &ldquo;elegant&rdquo;, &ldquo;asap&rdquo; or &ldquo;now&rdquo; it&rsquo;s also possible to add the restart command:</p><h3 id=shutdown_check><strong>shutdown_check</strong><a hidden class=anchor aria-hidden=true href=#shutdown_check>#</a></h3><p>Usage: fsctl shutdown_checkReturns true if FS is shutting down, or shutting down and restarting.</p><h3 id=sps><strong>sps</strong><a hidden class=anchor aria-hidden=true href=#sps>#</a></h3><p>Usage: fsctl sps [int]This changes the sessions-per-second limit from the value initially set in switch.conf</p><h3 id=sync_clock><strong>sync_clock</strong><a hidden class=anchor aria-hidden=true href=#sync_clock>#</a></h3><p>Usage: fsctl sync_clockFreeSWITCH will not trust the system time. It gets one sample of system time when it first starts and uses the monotonic clock after that moment. You can sync it back to the current value of the system&rsquo;s real-time clock with fsctl sync_clockNote: fsctl sync_clock immediately takes effect, which can affect the times on your CDRs. You can end up underbilling/overbilling, or even calls hungup before they originated. e.g. if FS clock is off by 1 month, then your CDRs will show calls that lasted for 1 month!See fsctl sync_clock_when_idle which is much safer.</p><h3 id=sync_clock_when_idle><strong>sync_clock_when_idle</strong><a hidden class=anchor aria-hidden=true href=#sync_clock_when_idle>#</a></h3><p>Usage: fsctl sync_clock_when_idleSynchronize the FreeSWITCH clock to the host machine&rsquo;s real-time clock, but wait until there are 0 channels in use. That way it doesn&rsquo;t affect any CDRs.</p><h3 id=verbose_events><strong>verbose_events</strong><a hidden class=anchor aria-hidden=true href=#verbose_events>#</a></h3><p>Usage: fsctl verbose_events [on|off]Enables verbose events. Verbose events have <strong>every</strong> channel variable in <strong>every</strong> event for a particular channel. Non-verbose events have only the pre-selected channel variables in the event headers.See <a href=https://wiki.freeswitch.org/wiki/Switch.conf.xml>switch.conf.xml</a> for the persistent setting of verbose-channel-events.</p><p></p><h2 id=global_getvar><strong>global_getvar</strong><a hidden class=anchor aria-hidden=true href=#global_getvar>#</a></h2><p>Gets the value of a global variable. If the parameter is not provided then it gets all the global variables.Usage: global_getvar []</p><h2 id=global_setvar><strong>global_setvar</strong><a hidden class=anchor aria-hidden=true href=#global_setvar>#</a></h2><p>Sets the value of a global variable.Usage: global_setvar =Example:global_setvar outbound_caller_id=2024561000</p><h2 id=group_call><strong>group_call</strong><a hidden class=anchor aria-hidden=true href=#group_call>#</a></h2><p>Returns the bridge string defined in a <a href=https://wiki.freeswitch.org/wiki/XML_User_Directory_Guide#Groups>call group</a>.Usage: group_call group@domain[+F|+A|+E]+F will return the group members in a serial fashion separated by | (the pipe character)+A (default) will return them in a parallel fashion separated by , (comma)+E will return them in a <a href=https://wiki.freeswitch.org/wiki/Freeswitch_IVR_Originate#Enterprise_originate>enterprise fashion</a> separated by :_: (colon underscore colon).There is no space between the domain and the optional flag. See <a href=https://wiki.freeswitch.org/wiki/XML_User_Directory_Guide#Groups>Groups</a> in the XML User Directory for more information.Please note: If you need to have outgoing user variables set in leg B, make sure you don&rsquo;t have dial-string and group-dial-string in your domain or dialed group variables list; instead set dial-string or group-dial-string in the default group of the user. This way group_call will return user/101 and user/ would set all your user variables to the leg B channel.The B leg receives a new variable, dialed_group, containing the full group name.</p><h2 id=help><strong>help</strong><a hidden class=anchor aria-hidden=true href=#help>#</a></h2><p>Show help for all the <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API commands</a>.Usage: help</p><h2 id=host_lookup><strong>host_lookup</strong><a hidden class=anchor aria-hidden=true href=#host_lookup>#</a></h2><p>Performs a DNS lookup on a host name.Usage: host_lookup</p><h2 id=hupall-1><strong>hupall</strong><a hidden class=anchor aria-hidden=true href=#hupall-1>#</a></h2><p>Disconnect existing channels.Usage: hupall [ ]All channels with set to will be disconnected with code.Example:originate {foo=bar}sofia/internal/someone1@server.com,<a href=mailto:sofia/internal/someone2@server.com>sofia/internal/someone2@server.com</a> &amp;parkhupall normal_clearing foo barTo hang up all calls on the switch indiscriminately:hupall system_shutdown</p><h2 id=in_group><strong>in_group</strong><a hidden class=anchor aria-hidden=true href=#in_group>#</a></h2><p>Determine if a user is a member of a group.Usage: in_group [@] &lt;group_name></p><h2 id=is_lan_addr><strong>is_lan_addr</strong><a hidden class=anchor aria-hidden=true href=#is_lan_addr>#</a></h2><p>See if an IP is a LAN address.Usage: is_lan_addr</p><h2 id=json><strong>json</strong><a hidden class=anchor aria-hidden=true href=#json>#</a></h2><p>JSON APIUsage: json {&ldquo;command&rdquo; : &ldquo;&mldr;&rdquo;, &ldquo;data&rdquo; : &ldquo;&mldr;&rdquo;}<strong>Example</strong>> json {&ldquo;command&rdquo; : &ldquo;status&rdquo;, &ldquo;data&rdquo; : &ldquo;&rdquo;} {&ldquo;command&rdquo;:&ldquo;status&rdquo;,&ldquo;data&rdquo;:"",&ldquo;status&rdquo;:&ldquo;success&rdquo;,&ldquo;response&rdquo;:{&ldquo;systemStatus&rdquo;:&ldquo;ready&rdquo;,&ldquo;uptime&rdquo;:{&ldquo;years&rdquo;:0,&ldquo;days&rdquo;:20,&ldquo;hours&rdquo;:20,&ldquo;minutes&rdquo;:37,&ldquo;seconds&rdquo;:4,&ldquo;milliseconds&rdquo;:254,&ldquo;microseconds&rdquo;:44},&ldquo;version&rdquo;:&ldquo;1.6.9 -16-d574870 64bit&rdquo;,&ldquo;sessions&rdquo;:{&ldquo;count&rdquo;:{&ldquo;total&rdquo;:132,&ldquo;active&rdquo;:0,&ldquo;peak&rdquo;:2,&ldquo;peak5Min&rdquo;:0,&ldquo;limit&rdquo;:1000},&ldquo;rate&rdquo;:{&ldquo;current&rdquo;:0,&ldquo;max&rdquo;:30,&ldquo;peak&rdquo;:2,&ldquo;peak5Min&rdquo;:0}},&ldquo;idleCPU&rdquo;:{&ldquo;used&rdquo;:0,&ldquo;allowed&rdquo;:99.733333},&ldquo;stackSizeKB&rdquo;:{&ldquo;current&rdquo;:240,&ldquo;max&rdquo;:8192}}}</p><h2 id=load><strong>load</strong><a hidden class=anchor aria-hidden=true href=#load>#</a></h2><p>Load external moduleUsage: load &lt;mod_name>Example:load mod_v8</p><h2 id=md5><strong>md5</strong><a hidden class=anchor aria-hidden=true href=#md5>#</a></h2><p>Return MD5 hash for the given input dataUsage: md5 hash-keyExample:md5 freeswitch-is-awesome765715d4f914bf8590d1142b6f64342e</p><h2 id=module_exists><strong>module_exists</strong><a hidden class=anchor aria-hidden=true href=#module_exists>#</a></h2><p>Check if module is loaded.Usage: module_exists Example:module_exists mod_event_sockettrue</p><h2 id=msleep><strong>msleep</strong><a hidden class=anchor aria-hidden=true href=#msleep>#</a></h2><p>Sleep for x number of millisecondsUsage: msleep</p><h2 id=nat_map><strong>nat_map</strong><a hidden class=anchor aria-hidden=true href=#nat_map>#</a></h2><p>Manage Network Address Translation mapping.Usage: nat_map [status|reinit|republish] | [add|del] [tcp|udp] [sticky] | [mapping] &lt;enable|disable></p><ul><li>status - Gives the NAT type, the external IP, and the currently mapped ports.</li><li>reinit - Completely re-initializes the NAT engine. Use this if you have changed routes or have changed your home router from NAT mode to UPnP mode.</li><li>republish - Causes FreeSWITCH to republish the NAT maps. This should not be necessary in normal operation.</li><li>mapping - Controls whether port mapping requests will be sent to the NAT (the command line option of -nonatmap can set it to disable on startup). This gives the ability of still using NAT for getting the public IP without opening the ports in the NAT.</li></ul><p>Note: sticky makes the mapping stay across FreeSWITCH restarts. It gives you a permanent mapping.Warning: If you have multiple network interfaces with unique IP addresses defined in sip profiles using the same port, nat_map <em>will</em> get confused when it tries to map the same ports for multiple profiles. Set up a static mapping between the public address and port and the private address and port in the sip_profiles to avoid this problem.</p><h2 id=regex><strong>regex</strong><a hidden class=anchor aria-hidden=true href=#regex>#</a></h2><p>Evaluate a regex (regular expression).Usage: regex |[|][|(n|b)]regex m://[/][/(n|b)]regex m:<del></del>[<del>][</del>(n|b)]This command behaves differently depending upon whether or not a substitution string and optional flag is supplied:</p><ul><li>If a subst is not supplied, regex returns either &ldquo;true&rdquo; if the pattern finds a match or &ldquo;false&rdquo; if not.</li><li>If a subst is supplied, regex returns the subst value on a true condition.</li><li>If a subst is supplied, on a false (no pattern match) condition regex returns:<ul><li>the source string with no flag;</li><li>with the n flag regex returns null which forces the response &ldquo;-ERR no reply&rdquo; from regex;</li><li>with the b flag regex returns &ldquo;false&rdquo;</li></ul></li></ul><p>The regex delimiter defaults to the | (pipe) character. The delimiter may be changed to ~ (tilde) or / (forward slash) by prefixing the regex with m:Examples:regex test1234|\d &lt;== Returns &ldquo;true&rdquo;regex m:/test1234/\d &lt;== Returns &ldquo;true&rdquo;regex m:<del>test1234</del>\d &lt;== Returns &ldquo;true&rdquo;regex test|\d &lt;== Returns &ldquo;false&rdquo;regex test1234|(\d+)|$1 &lt;== Returns &ldquo;1234&rdquo;regex sip:foo@bar.baz|^sip:(.*)|$1 &lt;== Returns &ldquo;<a href=mailto:foo@bar.baz>foo@bar.baz</a>&rdquo;regex testingonetwo|(\d+)|$1 &lt;== Returns &ldquo;testingonetwo&rdquo; (no match)regex m:<del>30</del>/^(10|20|40)$/<del>$1 &lt;== Returns &ldquo;30&rdquo; (no match)regex m:<del>30</del>/^(10|20|40)$/</del>$1<del>n &lt;== Returns &ldquo;-ERR no reply&rdquo; (no match)regex m:<del>30</del>/^(10|20|40)$/</del>$1~b &lt;== Returns &ldquo;false&rdquo; (no match)Logic in revision 14727 if the source string matches the result then the condition was false however there was a match and it is 1001.regex 1001|/(^\d{4}$)/|$1</p><ul><li>See also <a href=https://wiki.freeswitch.org/wiki/Regular_Expression>Regular_Expression</a></li></ul><h2 id=reload><strong>reload</strong><a hidden class=anchor aria-hidden=true href=#reload>#</a></h2><p>Reload a module.Usage: reload &lt;mod_name></p><h2 id=reloadacl><strong>reloadacl</strong><a hidden class=anchor aria-hidden=true href=#reloadacl>#</a></h2><p>Reload Access Control Lists after modifying them in autoload_configs/acl.conf.xml and as defined in extensions in the user directory conf/directory/*.xmlUsage: reloadacl [reloadxml]</p><h2 id=reloadxml><strong>reloadxml</strong><a hidden class=anchor aria-hidden=true href=#reloadxml>#</a></h2><p>Reload conf/freeswitch.xml settings after modifying configuration files.Usage: reloadxml</p><h2 id=show><strong>show</strong><a hidden class=anchor aria-hidden=true href=#show>#</a></h2><p>Display various reports, <strong>VERY</strong> useful for troubleshooting and confirming proper configuration of FreeSWITCH. Arguments can not be abbreviated, they must be specified fully.Usage: show [   aliases |   api |   application |   bridged_calls |   calls [count] |   channels [count|like ] |   chat |   codec |   complete |   detailed_bridged_calls |   detailed_calls |   dialplan |   endpoint |   file |   interface_types |   interfaces |   limits   management |   modules |   nat_map |registrations |   say |   tasks |   timer |   ] [as xml|as delim ]XML formatted:show foo as xmlChange delimiter:show foo as delim |</p><ul><li>aliases – list defined command aliases</li><li>api – list <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API commands</a> exposed by loadable modules</li><li>application – list applications exposed by loadable modules, notably mod_dptools</li><li>bridged_calls – deprecated, use &ldquo;show calls&rdquo;</li><li>calls [count] – list details of currently active calls; the keyword &ldquo;count&rdquo; eliminates the details and only prints the total count of calls</li><li>channels [count|like ] – list current channels; see <a href=https://wiki.freeswitch.org/wiki/Channels_vs_Calls>Channels vs Calls</a><ul><li>count – show only the count of active channels, no details</li><li>like – filter results to include only channels that contain in uuid, channel name, cid_number, cid_name, presence data fields.</li></ul></li><li>chat – list chat interfaces</li><li>codec – list codecs that are currently loaded in FreeSWITCH</li><li>complete – list command argument completion tables</li><li>detailed_bridged_calls – same as &ldquo;show detailed_calls&rdquo;</li><li>detailed_calls – like &ldquo;show calls&rdquo; but with more fields</li><li>dialplan – list dialplan interfaces</li><li>endpoint – list endpoint interfaces currently available to FS</li><li>file – list supported file format interfaces</li><li>interface_types – list all interface types with a summary count of each type of interface available</li><li>interfaces – enumerate all available interfaces by type, showing the module which exposes each interface</li><li>limits – list database limit interfaces</li><li>management – list management interfaces</li><li>module – enumerate modules and the path to each</li><li>nat_map – list Network Address Translation map</li><li>registrations – enumerate user extension registrations</li><li>say – enumerate available TTS (text-to-speech) interface modules with language supported</li><li>tasks – list FS tasks</li><li>timer – list timer modules</li></ul><h3 id=tips-for-showing-calls-and-channels><strong>Tips For Showing Calls and Channels</strong><a hidden class=anchor aria-hidden=true href=#tips-for-showing-calls-and-channels>#</a></h3><p>The best way to get an understanding of all of the show calls/channels is to use them and observe the results. To display more fields:</p><ul><li>show detailed_calls</li><li>show bridged_calls</li><li>show detailed_bridged_calls</li></ul><p>These three take the expand on information shown by &ldquo;show calls&rdquo;. Note that &ldquo;show detailed_calls&rdquo; replaces &ldquo;show distinct_channels&rdquo;. It provides similar, but more detailed, information. Also note that there is no &ldquo;show detailed_channels&rdquo; command, however using &ldquo;show detailed_calls&rdquo; will yield the same net result: FreeSWITCH lists detailed information about one-legged calls and bridged calls by using &ldquo;show detailed_calls&rdquo;, which can be quite useful while configuring and troubleshooting FS.<strong>Filtering Results</strong>To filter only channels matching a specific uuid or related to a specific call, set the presence_data channel variable in the bridge or originate application to a unique string. Then you can use:show channels like footo list only those channels of interest. The <strong>like</strong> directive filters on these fields:</p><ul><li>uuid</li><li>channel name</li><li>caller id name</li><li>caller id number</li><li>presence_data</li></ul><p>NOTE: <strong>presence_data</strong> must be set during <strong>bridge</strong> or <strong>originate</strong> and not after the channel is established.</p><h2 id=shutdown-1><strong>shutdown</strong><a hidden class=anchor aria-hidden=true href=#shutdown-1>#</a></h2><p>Stop the FreeSWITCH program.Usage: shutdownThis only works from the console. To shutdown FS from an API call or fs_cli, you should use &ldquo;fsctl shutdown&rdquo; which offers a number of options.Shutdown from the console ignores arguments and exits immediately!</p><p></p><h2 id=status><strong>status</strong><a hidden class=anchor aria-hidden=true href=#status>#</a></h2><p>Show current FS status. Very helpful information to provide when asking questions on the mailing list or irc channel.Usage: statusfreeswitch@internal> statusUP 17 years, 20 days, 10 hours, 10 minutes, 31 seconds, 571 milliseconds, 721 microsecondsFreeSWITCH (Version 1.5.8b git 87751f9 2013-12-13 18:13:56Z 32bit) is ready 53987253 session(s) since startup 127 session(s) - peak 127, last 5min 253 55 session(s) per Sec out of max 60, peak 55, last 5min 253 1000 session(s) max min idle cpu 0.00/97.71</p><h2 id=strftime_tz><strong>strftime_tz</strong><a hidden class=anchor aria-hidden=true href=#strftime_tz>#</a></h2><p>Displays formatted time, converted to a specific timezone. See /usr/share/zoneinfo/zone.tab for the standard list of Linux timezones.Usage: strftime_tz [format_string]Example:strftime_tz US/Eastern %Y-%m-%d %T</p><h2 id=unload><strong>unload</strong><a hidden class=anchor aria-hidden=true href=#unload>#</a></h2><p>Unload external module.Usage: unload &lt;mod_name></p><h2 id=version><strong>version</strong><a hidden class=anchor aria-hidden=true href=#version>#</a></h2><p>Show version of the switchUsage: version [short]Examples:freeswitch@internal> versionFreeSWITCH Version 1.5.8b+git<del>20131213T181356Z</del>87751f9eaf~32bit (git 87751f9 2013-12-13 18:13:56Z 32bit)freeswitch@internal> version short1.5.8b</p><h2 id=xml_locate><strong>xml_locate</strong><a hidden class=anchor aria-hidden=true href=#xml_locate>#</a></h2><p>Write active xml tree or specified branch to stdout.Usage: xml_locate [root | | &lt;tag_attr_name> &lt;tag_attr_val>]xml_locate root will return all XML being used by FreeSWITCHxml_locate : Will return the XML corresponding to the specified xml_locate directoryxml_locate configurationxml_locate dialplanxml_locate phrasesExample:xml_locate directory domain name example.comxml_locate configuration configuration name ivr.conf</p><h2 id=xml_wrap><strong>xml_wrap</strong><a hidden class=anchor aria-hidden=true href=#xml_wrap>#</a></h2><p>Wrap another <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API command</a> in XML.Usage: xml_wrap</p><h1 id=call-management-commands><strong>Call Management Commands</strong><a hidden class=anchor aria-hidden=true href=#call-management-commands>#</a></h1><p></p><h2 id=break><strong>break</strong><a hidden class=anchor aria-hidden=true href=#break>#</a></h2><p>Deprecated. See uuid_break.</p><h2 id=create_uuid><strong>create_uuid</strong><a hidden class=anchor aria-hidden=true href=#create_uuid>#</a></h2><p>Creates a new UUID and returns it as a string.Usage: create_uuid</p><h2 id=originate><strong>originate</strong><a hidden class=anchor aria-hidden=true href=#originate>#</a></h2><p>Originate a new call.<strong>Usage</strong>originate &lt;call_url> |&&lt;application_name>(&lt;app_args>) [] [] [&lt;cid_name>] [&lt;cid_num>] [&lt;timeout_sec>]</p><p>FreeSWITCH will originate a call to &lt;call_url> as Leg A. If that leg supervises within 60 seconds FS will continue by searching for an extension definition in the specified dialplan for or else execute the application that follows the & along with its arguments.<strong>Originate Arguments</strong></p><h3 id=arguments><strong>Arguments</strong><a hidden class=anchor aria-hidden=true href=#arguments>#</a></h3><ul><li>&lt;call_url> URL you are calling. For more info on sofia SIP URL syntax see: <a href=https://freeswitch.org/confluence/display/FREESWITCH/Sofia+SIP+Stack#SofiaSIPStack-Syntax>FreeSwitch Endpoint Sofia</a></li><li>Destination, one of:<ul><li>Destination number to search in dialplan; note that registered extensions will fail this way, use &amp;bridge(user/xxxx) instead</li><li>&&lt;application_name>(&lt;app_args>)<ul><li>&ldquo;&&rdquo; indicates what follows is an application name, not an exten</li><li>(&lt;app_args>) is optional (not all applications require parameters, e.g. park)</li><li>The most commonly used application names include:park, bridge, javascript/lua/perl, playback (remove mod_native_file).</li><li>Note: Use single quotes to pass arguments with spaces, e.g. &lsquo;&amp;lua(test.lua arg1 arg2)&rsquo;</li><li>Note: There is no space between & and the application name</li></ul></li></ul></li><li>Defaults to &lsquo;XML&rsquo; if not specified.</li><li>Defaults to &lsquo;default&rsquo; if not specified.</li><li>&lt;cid_name> CallerID name to send to Leg A.</li><li>&lt;cid_num> CallerID number to send to Leg A.</li><li>&lt;timeout_sec> Timeout in seconds; default = 60 seconds.</li></ul><p><strong>Originate Variables</strong></p><h3 id=variables><strong>Variables</strong><a hidden class=anchor aria-hidden=true href=#variables>#</a></h3><p>These variables can be prepended to the dial string inside curly braces and separated by commas. Example:originate {sip_auto_answer=true,return_ring_ready=false}user/1001 9198Variables within braces must be separated by a comma.</p><ul><li>group_confirm_key</li><li>group_confirm_file</li><li>forked_dial</li><li>fail_on_single_reject</li><li>ignore_early_media - must be defined on Leg B in bridge or originate command to stop remote ringback from being heard by Leg A</li><li>return_ring_ready</li><li>originate_retries</li><li>originate_retry_sleep_ms</li><li>origination_caller_id_name</li><li>origination_caller_id_number</li><li>originate_timeout</li><li>sip_auto_answer</li></ul><p><a href=https://wiki.freeswitch.org/wiki/Channel_Variables#Originate_related_variables>Description of originate&rsquo;s related variables</a> </p><p><strong>Originate Examples</strong></p><h3 id=examples><strong>Examples</strong><a hidden class=anchor aria-hidden=true href=#examples>#</a></h3><p>You can call a locally registered sip endpoint 300 and park the call like so Note that the &ldquo;example&rdquo; profile used here must be the one to which 300 is registered. Also note the use of % instead of @ to indicate that it is a registered extension.originate sofia/example/300%pbx.internal &amp;park()Or you could instead connect a remote sip endpoint to extension 8600originate <a href=mailto:sofia/example/300@foo.com>sofia/example/300@foo.com</a> 8600Or you could instead connect a remote SIP endpoint to another remote extensionoriginate <a href=mailto:sofia/example/300@foo.com>sofia/example/300@foo.com</a> &amp;bridge(<a href=mailto:sofia/example/400@bar.com>sofia/example/400@bar.com</a>)Or you could even run a Javascript application test.jsoriginate <a href=mailto:sofia/example/1000@somewhere.com>sofia/example/1000@somewhere.com</a> &amp;javascript(test.js)To run a javascript with arguments you must surround it in single quotes.originate <a href=mailto:sofia/example/1000@somewhere.com>sofia/example/1000@somewhere.com</a> &lsquo;&amp;javascript(test.js myArg1 myArg2)&rsquo;Setting channel variables to the dial stringoriginate {ignore_<a href="mailto:early_media=true%7Dsofia/mydomain.com/18005551212@1.2.3.4">early_media=true}sofia/mydomain.com/18005551212@1.2.3.4</a> 15555551212Setting SIP header variables to send to another FS box during originateoriginate {sip_h_X-varA=111,sip_<a href="mailto:h_X-varB=222%7Dsofia/mydomain.com/18005551212@1.2.3.4">h_X-varB=222}sofia/mydomain.com/18005551212@1.2.3.4</a> 15555551212Note: you can set any channel variable, even custom ones. Use single quotes to enclose values with spaces, commas, etc.originate {my_<a href="mailto:own_var=my_value%7Dsofia/mydomain.com/that.ext@1.2.3.4">own_var=my_value}sofia/mydomain.com/that.ext@1.2.3.4</a> 15555551212originate {my_own_var=&lsquo;my <a href="mailto:value'%7Dsofia/mydomain.com/that.ext@1.2.3.4">value'}sofia/mydomain.com/that.ext@1.2.3.4</a> 15555551212If you need to fake the ringback to the originated endpoint try this:originate {ringback='%(2000,4000,440.0,480.0)'}sofia/example/300@foo.com &amp;bridge(<a href=mailto:sofia/example/400@bar.com>sofia/example/400@bar.com</a>)To specify a parameter to the Leg A call and the Leg B bridge application:originate {&lsquo;origination_caller_id_number=2024561000&rsquo;}sofia/gateway/whitehouse.gov/2125551212 &amp;bridge([&rsquo;effective_caller_id_number=7036971379&rsquo;]sofia/gateway/pentagon.gov/3035554499)</p><p>If you need to make originate return immediately when the channel is in &ldquo;Ring-Ready&rdquo; state try this:originate {return_ring_ready=true}sofia/gateway/someprovider/919246461929 &amp;socket(&lsquo;127.0.0.1:8082 async full&rsquo;)More info on <a href=http://blog.godson.in/2010/12/use-of-returnringready-originate.html>return_ring_ready</a>You can even set music on hold for the ringback if you want:originate {ringback='/path/to/music.wav'}sofia/gateway/name/number &amp;bridge(sofia/gateway/siptoshore/12425553741)You can originate a call in the background (asynchronously) and playback a message with a 60 second timeout.bgapi originate {ignore_early_media=true,originate_timeout=60}sofia/gateway/name/number &amp;playback(message)You can specify the UUID of an originated call by doing the following:</p><ul><li>Use create_uuid to generate a UUID to use.</li><li>This will allow you to kill an originated call before it is answered by using uuid_kill.</li><li>If you specify origination_uuid it will remain the UUID for the answered call leg for the whole session.</li></ul><p>originate {origination_<a href="mailto:uuid=...%7Duser/100@domain.name.com">uuid=...}user/100@domain.name.com</a>Here&rsquo;s an example of originating a call to the echo conference (an external sip URL) and bridging it to a local user&rsquo;s phone:originate <a href=mailto:sofia/internal/9996@conference.freeswitch.org>sofia/internal/9996@conference.freeswitch.org</a> &amp;bridge(user/105@default)Here&rsquo;s an example of originating a call to an extension in a different context than &lsquo;default&rsquo; (required for the FreePBX which uses context_1, context_2, etc.):originate <a href=mailto:sofia/internal/2001@foo.com>sofia/internal/2001@foo.com</a> 3001 xml context_3You can also originate to multiple extensions as follows:originate user/1001,user/1002,user/1003 &amp;park()To put an outbound call into a conference at early media, either of these will work (they are effectively the same thing)originate <a href=mailto:sofia/example/300@foo.com>sofia/example/300@foo.com</a> &amp;conference(conf_uuid-TEST_CON)originate <a href=mailto:sofia/example/300@foo.com>sofia/example/300@foo.com</a> conference:conf_uuid-TEST_CON inlineSee <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/6586667">mod_dptools: Inline Dialplan</a> for more detail on &lsquo;inline&rsquo; DialplansAn example of using loopback and inline on the A-leg can be found <a href=http://lists.freeswitch.org/pipermail/freeswitch-users/2013-January/091769.html>in this mailing list post</a> </p><h2 id=pause-1><strong>pause</strong><a hidden class=anchor aria-hidden=true href=#pause-1>#</a></h2><p>Pause playback of recorded media that was started with uuid_broadcast.<strong>Usage</strong>pause &lt;on|off>Turning pause &ldquo;on&rdquo; activates the pause function, i.e. it pauses the playback of recorded media. Turning pause &ldquo;off&rdquo; deactivates the pause function and resumes playback of recorded media at the same point where it was paused.Note: always returns -ERR no reply when successful; returns -ERR No such channel! when uuid is invalid.</p><h2 id=uuid_answer><strong>uuid_answer</strong><a hidden class=anchor aria-hidden=true href=#uuid_answer>#</a></h2><p>Answer a channel<strong>Usage</strong>uuid_answer See Also</p><ul><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/6586406">mod_dptools: answer</a></li></ul><h2 id=uuid_audio><strong>uuid_audio</strong><a hidden class=anchor aria-hidden=true href=#uuid_audio>#</a></h2><p>Adjust the audio levels on a channel or mute (read/write) via a media bug.<strong>Usage</strong>uuid_audio [start [read|write] [[mute|level] ]|stop] is in the range from -4 to 4, 0 being the default value.Level is required for both mute|level params:freeswitch@internal> uuid_audio 0d7c3b93-a5ae-4964-9e4d-902bba50bd19 start write mute freeswitch@internal> uuid_audio 0d7c3b93-a5ae-4964-9e4d-902bba50bd19 start write level (This command behaves funky. Requires further testing to vet all arguments. - JB)See Also</p><ul><li><a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/6587102">mod_dptools: set audio level</a></li></ul><p></p><h2 id=uuid_break><strong>uuid_break</strong><a hidden class=anchor aria-hidden=true href=#uuid_break>#</a></h2><p>Break out of media being sent to a channel. For example, if an audio file is being played to a channel, issuing uuid_break will discontinue the media and the call will move on in the dialplan, script, or whatever is controlling the call.Usage: uuid_break [all]If the <strong>all</strong> flag is used then all audio files/prompts/etc. that are queued up to be played to the channel will be stopped and removed from the queue, otherwise only the currently playing media will be stopped.</p><h2 id=uuid_bridge><strong>uuid_bridge</strong><a hidden class=anchor aria-hidden=true href=#uuid_bridge>#</a></h2><p>Bridge two call legs together.<strong>Usage</strong>uuid_bridge &lt;other_uuid>uuid_bridge needs at least any one leg to be in the answered state. If, for example, one channel is parked and another channel is actively conversing on a call, executing uuid_bridge on these 2 channels will drop the existing call and bridge together the specified channels.</p><h2 id=uuid_broadcast><strong>uuid_broadcast</strong><a hidden class=anchor aria-hidden=true href=#uuid_broadcast>#</a></h2><p>Execute an arbitrary dialplan application, typically playing a media file, on a specific uuid. If a filename is specified then it is played into the channel(s). To execute an application use &ldquo;app::args&rdquo; syntax.<strong>Usage</strong>uuid_broadcast [aleg|bleg|both]Execute an application on a chosen leg(s) with optional hangup afterwards:<strong>Usage</strong>uuid_broadcast app[![hangup_cause]]::args [aleg|bleg|both]Examples:<strong>Example</strong>uuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e sorry.wav bothuuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e say::en\snumber\spronounced\s12345 aleguuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e say!::en\snumber\spronounced\s12345 aleguuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e say!user_busy::en\snumber\spronounced\s12345 aleguuid_broadcast 336889f2-1868-11de-81a9-3f4acc8e505e playback!user_busy::sorry.wav aleg</p><h2 id=uuid_buglist><strong>uuid_buglist</strong><a hidden class=anchor aria-hidden=true href=#uuid_buglist>#</a></h2><p>List the media bugs on channel. Output is formatted as XML.<strong>Usage</strong></p><p>uuid_buglist</p><p></p><h2 id=uuid_chat><strong>uuid_chat</strong><a hidden class=anchor aria-hidden=true href=#uuid_chat>#</a></h2><p>Send a chat message.<strong>Usage</strong>uuid_chat If the endpoint associated with the session has a receive_event handler, this message gets sent to that session and is interpreted as an instant message.</p><h2 id=uuid_debug_media><strong>uuid_debug_media</strong><a hidden class=anchor aria-hidden=true href=#uuid_debug_media>#</a></h2><p>Debug media, either audio or video.<strong>Usage</strong>uuid_debug_media &lt;read|write|both|vread|vwrite|vboth> &lt;on|off>Use &ldquo;read&rdquo; or &ldquo;write&rdquo; for the audio direction to debug, or &ldquo;both&rdquo; for both directions. And prefix with v for video media.uuid_debug_media emits a HUGE amount of data. If you invoke this command from fs_cli, be prepared.</p><p><strong>Example output</strong>R <a href=mailto:sofia/internal/1003@192.168.65.3>sofia/internal/1003@192.168.65.3</a> b= 172 192.168.65.3:17668 192.168.65.114:16072 192.168.65.114:16072 pt=0 ts=2981605109 m=0W <a href=mailto:sofia/internal/1003@192.168.65.3>sofia/internal/1003@192.168.65.3</a> b= 172 192.168.65.3:17668 192.168.65.114:16072 192.168.65.114:16072 pt=0 ts=12212960 m=0R <a href=mailto:sofia/internal/1003@192.168.65.3>sofia/internal/1003@192.168.65.3</a> b= 172 192.168.65.3:17668 192.168.65.114:16072 192.168.65.114:16072 pt=0 ts=2981605269 m=0W <a href=mailto:sofia/internal/1003@192.168.65.3>sofia/internal/1003@192.168.65.3</a> b= 172 192.168.65.3:17668 192.168.65.114:16072 192.168.65.114:16072 pt=0 ts=12213120 m=0</p><h3 id=read-format><strong>Read Format</strong><a hidden class=anchor aria-hidden=true href=#read-format>#</a></h3><p>&ldquo;R %s b=%4ld %s:%u %s:%u %s:%u pt=%d ts=%u m=%d\n&rdquo;where the values are:</p><ul><li>switch_channel_get_name(switch_core_session_get_channel(session)),</li><li>(long) bytes,</li><li>my_host, switch_sockaddr_get_port(rtp_session->local_addr),</li><li>old_host, rtp_session->remote_port,</li><li>tx_host, switch_sockaddr_get_port(rtp_session->from_addr),</li><li>rtp_session->recv_msg.header.pt,</li><li>ntohl(rtp_session->recv_msg.header.ts),</li><li>rtp_session->recv_msg.header.m</li></ul><h3 id=write-format><strong>Write Format</strong><a hidden class=anchor aria-hidden=true href=#write-format>#</a></h3><p>&ldquo;W %s b=%4ld %s:%u %s:%u %s:%u pt=%d ts=%u m=%d\n&rdquo;where the values are:</p><ul><li>switch_channel_get_name(switch_core_session_get_channel(session)),</li><li>(long) bytes,</li><li>my_host, switch_sockaddr_get_port(rtp_session->local_addr),</li><li>old_host, rtp_session->remote_port,</li><li>tx_host, switch_sockaddr_get_port(rtp_session->from_addr),</li><li>send_msg->header.pt,</li><li>ntohl(send_msg->header.ts),</li><li>send_msg->header.m);</li></ul><h2 id=uuid_deflect><strong>uuid_deflect</strong><a hidden class=anchor aria-hidden=true href=#uuid_deflect>#</a></h2><p>Deflect an answered SIP call off of FreeSWITCH by sending the REFER methodUsage: uuid_deflect uuid_deflect waits for the final response from the far end to be reported. It returns the sip fragment from that response as the text in the FreeSWITCH response to uuid_deflect. If the far end reports the REFER was successful, then FreeSWITCH will issue a bye on the channel.<strong>Example</strong>uuid_deflect 0c9520c4-58e7-40c4-b7e3-819d72a98614 sip:info@example.netResponse:Content-Type: api/responseContent-Length: 30+OK:SIP/2.0 486 Busy Here</p><h2 id=uuid_displace><strong>uuid_displace</strong><a hidden class=anchor aria-hidden=true href=#uuid_displace>#</a></h2><p>Displace the audio for the target with the specified audio .Usage: uuid_displace [start|stop] [] [mux]Arguments:</p><ul><li>uuid = Unique ID of this call (see &lsquo;show channels&rsquo;)</li><li>start|stop = Start or stop this action</li><li>file = path to an audio source (.wav file, shoutcast stream, etc&mldr;)</li><li>limit = limit number of seconds before terminating the displacement</li><li>mux = multiplex; mix the original audio together with &lsquo;file&rsquo;, i.e. both parties can still converse while the file is playing (if the level is not too loud)</li></ul><p>To specify the 5th argument &lsquo;mux&rsquo; you must specify a limit; if no time limit is desired on playback, then specify 0.<strong>Examples</strong>cli> uuid_displace 1a152be6-2359-11dc-8f1e-4d36f239dfb5 start /sounds/test.wav 60cli> uuid_displace 1a152be6-2359-11dc-8f1e-4d36f239dfb5 stop /sounds/test.wav</p><p></p><h2 id=uuid_display><strong>uuid_display</strong><a hidden class=anchor aria-hidden=true href=#uuid_display>#</a></h2><p>Updates the display on a phone if the phone supports this. This works on some SIP phones right now including Polycom and Snom.Usage: name|numberNote the pipe character separating the Caller ID name and Caller ID number.This command makes the phone re-negotiate the codec. The SIP -> RTP Packet Size should be 0.020 seconds. If it is set to 0.030 on the Cisco SPA series phones it causes a DTMF lag. When DTMF keys are pressed on the phone they are can be seen on the fs_cli 4-6 seconds late.Example:freeswitch@sidious> uuid_display f4053af7-a3b9-4c78-93e1-74e529658573 Fred Jones|1001+OK Success</p><p></p><h2 id=uuid_dual_transfer><strong>uuid_dual_transfer</strong><a hidden class=anchor aria-hidden=true href=#uuid_dual_transfer>#</a></h2><p>Transfer each leg of a call to different destinations.Usage: [/][/] [/][/]</p><h2 id=uuid_dump><strong>uuid_dump</strong><a hidden class=anchor aria-hidden=true href=#uuid_dump>#</a></h2><p>Dumps all variable values for a session.Usage: uuid_dump [format]Format options: txt (default, may be omitted), XML, JSON, plain</p><h2 id=uuid_early_ok><strong>uuid_early_ok</strong><a hidden class=anchor aria-hidden=true href=#uuid_early_ok>#</a></h2><p>Stops the process of ignoring early media, i.e. if ignore_early_media=true, this stops ignoring early media coming from Leg B and responds normally.Usage: uuid_early_ok</p><h2 id=uuid_exists><strong>uuid_exists</strong><a hidden class=anchor aria-hidden=true href=#uuid_exists>#</a></h2><p>Checks whether a given UUID exists.Usage: uuid_exists Returns true or false.</p><h2 id=uuid_flush_dtmf><strong>uuid_flush_dtmf</strong><a hidden class=anchor aria-hidden=true href=#uuid_flush_dtmf>#</a></h2><p>Flush queued DTMF digitsUsage: uuid_flush_dtmf</p><h2 id=uuid_fileman><strong>uuid_fileman</strong><a hidden class=anchor aria-hidden=true href=#uuid_fileman>#</a></h2><p>Manage the audio being played into a channel from a sound fileUsage: uuid_fileman <a href=cmd:val>cmd:val</a>Commands are:</p><ul><li>speed:&lt;+[step]>|&lt;-[step]></li><li>volume:&lt;+[step]>|&lt;-[step]></li><li>pause (toggle)</li><li>stop</li><li>truncate</li><li>restart</li><li>seek:&lt;+[milliseconds]>|&lt;-[milliseconds]> (1000ms = 1 second, 10000ms = 10 seconds.)</li></ul><p>Example to seek forward 30 seconds:uuid_fileman 0171ded1-2c31-445a-bb19-c74c659b7d08 seek:+3000(Or use the current channel via ${uuid}, e.g. in a bind_digit_action)The &lsquo;pause&rsquo; argument is a toggle: the first time it is invoked it will pause playback, the second time it will resume playback.</p><h2 id=uuid_getvar><strong>uuid_getvar</strong><a hidden class=anchor aria-hidden=true href=#uuid_getvar>#</a></h2><p>Get a variable from a channel.Usage: uuid_getvar</p><h2 id=uuid_hold><strong>uuid_hold</strong><a hidden class=anchor aria-hidden=true href=#uuid_hold>#</a></h2><p>Place a channel on hold.Usage:uuid_hold place a call on holduuid_hold off switch off on holduuid_hold toggle toggles call-state based on current call-state</p><h2 id=uuid_kill><strong>uuid_kill</strong><a hidden class=anchor aria-hidden=true href=#uuid_kill>#</a></h2><p>Reset a specific channel.Usage: uuid_kill [cause]If no cause code is specified, NORMAL_CLEARING will be used.</p><h2 id=uuid_limit><strong>uuid_limit</strong><a hidden class=anchor aria-hidden=true href=#uuid_limit>#</a></h2><p>Apply or change limit(s) on a specified uuid.Usage: uuid_limit [[/interval]] [number [dialplan [context]]]See also <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/3375201">mod_dptools: Limit</a></p><h2 id=uuid_media><strong>uuid_media</strong><a hidden class=anchor aria-hidden=true href=#uuid_media>#</a></h2><p>Reinvite FreeSWITCH out of the media path:Usage: uuid_media [off] Reinvite FreeSWITCH back in:Usage: uuid_media</p><h2 id=uuid_media_reneg><strong>uuid_media_reneg</strong><a hidden class=anchor aria-hidden=true href=#uuid_media_reneg>#</a></h2><p>Tell a channel to send a re-invite with optional list of new codecs to be renegotiated.Usage: uuid_media_reneg &lt;=>Example: Adding =PCMU makes the offered codec string absolute.</p><h2 id=uuid_park><strong>uuid_park</strong><a hidden class=anchor aria-hidden=true href=#uuid_park>#</a></h2><p>Park callUsage: uuid_park The specified channel will be parked and the other leg of the call will be disconnected.</p><h2 id=uuid_pre_answer><strong>uuid_pre_answer</strong><a hidden class=anchor aria-hidden=true href=#uuid_pre_answer>#</a></h2><p>Pre–answer a channel.Usage: uuid_preanswer See Also: <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/6586998">Misc._Dialplan_Tools_pre_answer</a></p><h2 id=uuid_preprocess><strong>uuid_preprocess</strong><a hidden class=anchor aria-hidden=true href=#uuid_preprocess>#</a></h2><p>Pre-process ChannelUsage: uuid_preprocess</p><h2 id=uuid_recv_dtmf><strong>uuid_recv_dtmf</strong><a hidden class=anchor aria-hidden=true href=#uuid_recv_dtmf>#</a></h2><p>Usage: uuid_recv_dtmf  &lt;dtmf_data></p><p></p><h2 id=uuid_send_dtmf><strong>uuid_send_dtmf</strong><a hidden class=anchor aria-hidden=true href=#uuid_send_dtmf>#</a></h2><p>Send DTMF digits to Usage: uuid_send_dtmf [@&lt;tone_duration>]Use the character w for a .5 second delay and the character W for a 1 second delay.Default tone duration is 2000ms .</p><h2 id=uuid_send_info><strong>uuid_send_info</strong><a hidden class=anchor aria-hidden=true href=#uuid_send_info>#</a></h2><p>Send info to the endpointUsage: uuid_send_info</p><h2 id=uuid_session_heartbeat><strong>uuid_session_heartbeat</strong><a hidden class=anchor aria-hidden=true href=#uuid_session_heartbeat>#</a></h2><p>Usage: uuid_session_heartbeat [sched] [0|]</p><h2 id=uuid_setvar><strong>uuid_setvar</strong><a hidden class=anchor aria-hidden=true href=#uuid_setvar>#</a></h2><p>Set a variable on a channel. If value is omitted, the variable is unset.Usage: uuid_setvar [value]</p><h2 id=uuid_setvar_multi><strong>uuid_setvar_multi</strong><a hidden class=anchor aria-hidden=true href=#uuid_setvar_multi>#</a></h2><p>Set multiple vars on a channel.Usage: uuid_setvar_multi =[;=[;&mldr;]]</p><h2 id=uuid_simplify><strong>uuid_simplify</strong><a hidden class=anchor aria-hidden=true href=#uuid_simplify>#</a></h2><p>This command directs FreeSWITCH to remove itself from the SIP signaling path if it can safely do so.Usage: uuid_simplify Execute this <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API command</a> to instruct FreeSWITCH™ to inspect the Leg A and Leg B network addresses. If they are both hosted by the same switch as a result of a transfer or forwarding loop across a number of FreeSWITCH™ systems the one executing this command will remove itself from the SIP and media path and restore the endpoints to their local FreeSWITCH™ to shorten the network path. This is particularly useful in large distributed FreeSWITCH™ installations.For example, suppose a call arrives at a FreeSWITCH™ box in Los Angeles, is answered, then forwarded to a FreeSWITCH™ box in London, answered there and then forwarded back to Los Angeles. The London switch could execute uuid_simplify to tell its local switch to examine both legs of the call to determine that they could be hosted by the Los Angeles switch since both legs are local to it. Alternatively, setting sip_auto_simplify to true either globally in vars.xml or as part of a dailplan extension would tell FS to perform this check for each call when both legs supervise. </p><h2 id=uuid_transfer><strong>uuid_transfer</strong><a hidden class=anchor aria-hidden=true href=#uuid_transfer>#</a></h2><p>Transfers an existing call to a specific extension within a and . Dialplan may be &ldquo;xml&rdquo; or &ldquo;directory&rdquo;.<strong>Usage</strong>uuid_transfer [-bleg|-both] [] []</p><p>The optional first argument will allow you to transfer both parties (-both) or only the party to whom is talking.(-bleg). Beware that -bleg actually means &ldquo;the other leg&rdquo;, so when it is executed on the actual B leg uuid it will transfer the actual A leg that originated the call and disconnect the actual B leg.NOTE: if the call has been bridged, and you want to transfer either side of the call, then you will need to use (or the API equivalent). If it&rsquo;s not set, transfer doesn&rsquo;t really work as you&rsquo;d expect, and leaves calls in limbo.And more examples see <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/13173434">Inline Dialplan</a></p><h2 id=uuid_phone_event><strong>uuid_phone_event</strong><a hidden class=anchor aria-hidden=true href=#uuid_phone_event>#</a></h2><p>Send hold indication upstream:<strong>Usage</strong>uuid_phone_event hold|talk</p><p></p><h1 id=recordplayback-commands><strong>Record/Playback Commands</strong><a hidden class=anchor aria-hidden=true href=#recordplayback-commands>#</a></h1><p></p><h2 id=uuid_record><strong>uuid_record</strong><a hidden class=anchor aria-hidden=true href=#uuid_record>#</a></h2><p>Record the audio associated with the given UUID into a file. The start command causes FreeSWITCH to start mixing all call legs together and saves the result as a file in the format that the file&rsquo;s extension dictates. (if available) The stop command will stop the recording and close the file. If media setup hasn&rsquo;t yet happened, the file will contain silent audio until media is available. Audio will be recorded for calls that are parked. The recording will continue through the bridged call. If the call is set to return to park after the bridge, the bug will remain on the call, but no audio is recorded until the call is bridged again. (TODO: What if media doesn&rsquo;t flow through FreeSWITCH? Will it re-INVITE first? Or do we just not get the audio in that case?)Usage:uuid_record [start|stop|mask|unmask] []Where limit is the max number of seconds to record.If the path is not specified on start it will default to the channel variable &ldquo;sound_prefix&rdquo; or FreeSWITCH base_dir when the &ldquo;sound_prefix&rdquo; is empty.You may also specify &ldquo;all&rdquo; for path when stop is used to remove all for this uuid&ldquo;stop&rdquo; command must be followed by option.&ldquo;mask&rdquo; will mask with silence part of the recording beginning when the mask argument is executed by this command. see <a href=http://jira.freeswitch.org/browse/FS-5269>http://jira.freeswitch.org/browse/FS-5269</a>.&ldquo;unmask&rdquo; will stop the masking and continue recording live audio normally.<a href=https://freeswitch.org/confluence/display/FREESWITCH/Channel+Variables#ChannelVariables-CallRecordingRelated>See record&rsquo;s related variables</a>you will also want to see <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/6587110">mod_dptools: record_session</a></p><h1 id=limit-commands><strong>Limit Commands</strong><a hidden class=anchor aria-hidden=true href=#limit-commands>#</a></h1><p>More information is available at <a href=https://wiki.freeswitch.org/wiki/Limit#API>Limit commands</a></p><h2 id=limit_reset><strong>limit_reset</strong><a hidden class=anchor aria-hidden=true href=#limit_reset>#</a></h2><p>Reset a limit backend.</p><h2 id=limit_status><strong>limit_status</strong><a hidden class=anchor aria-hidden=true href=#limit_status>#</a></h2><p>Retrieve status from a limit backend.</p><h2 id=limit_usage><strong>limit_usage</strong><a hidden class=anchor aria-hidden=true href=#limit_usage>#</a></h2><p>Retrieve usage for a given resource.</p><h2 id=uuid_limit_release><strong>uuid_limit_release</strong><a hidden class=anchor aria-hidden=true href=#uuid_limit_release>#</a></h2><p>Manually decrease a resource usage by one.</p><h2 id=limit_interval_reset><strong>limit_interval_reset</strong><a hidden class=anchor aria-hidden=true href=#limit_interval_reset>#</a></h2><p>Reset the interval counter to zero prior to the start of the next interval.</p><h1 id=miscellaneous-commands><strong>Miscellaneous Commands</strong><a hidden class=anchor aria-hidden=true href=#miscellaneous-commands>#</a></h1><p></p><h2 id=bg_system><strong>bg_system</strong><a hidden class=anchor aria-hidden=true href=#bg_system>#</a></h2><p>Execute a system command in the background.Usage: bg_system</p><h2 id=echo><strong>echo</strong><a hidden class=anchor aria-hidden=true href=#echo>#</a></h2><p>Echo input back to the consoleUsage: echo Example:echo This text will appearThis text will appear</p><h2 id=file_exists><strong>file_exists</strong><a hidden class=anchor aria-hidden=true href=#file_exists>#</a></h2><p>Tests whether filename exists.file_exists filenameExamples:freeswitch> file_exists /tmp/real_filetrue</p><p>freeswitch> file_exists /tmp/missing_filefalseExample dialplan usage:<strong>file_exists example</strong></p><p>file_exists tests whether FreeSWITCH can see the file, but the file may still be unreadable because of restrictive permissions.</p><p></p><h2 id=find_user_xml><strong>find_user_xml</strong><a hidden class=anchor aria-hidden=true href=#find_user_xml>#</a></h2><p>Checks to see if a user exists. Matches user tags found in the directory, similar to <a href="https://wiki.freeswitch.org/index.php?title=User_exists&amp;action=edit&amp;redlink=1">user_exists</a>, but returns an XML representation of the user as defined in the directory (like the one shown in <a href=https://wiki.freeswitch.org/wiki/Mod_commands#user_exists>user_exists</a>).Usage: find_user_xml references a key specified in a directory&rsquo;s user tag represents the value of the key is the domain to which the user is assigned.</p><h2 id=list_users><strong>list_users</strong><a hidden class=anchor aria-hidden=true href=#list_users>#</a></h2><p>Lists Users configured in DirectoryUsage:list_users [group ] [domain ] [user ] [context ]Examples:freeswitch@localhost> list_users group default</p><p>userid|context|domain|group|contact|callgroup|effective_caller_id_name|effective_caller_id_number2000|default|192.168.20.73|default|sofia/internal/sip:2000@192.168.20.219:5060|techsupport|B#-Test 2000|20002001|default|192.168.20.73|default|sofia/internal/sip:2001@192.168.20.150:63412;rinstance=8e2c8b86809acf2a|techsupport|Test 2001|20012002|default|192.168.20.73|default|error/user_not_registered|techsupport|Test 2002|20022003|default|192.168.20.73|default|sofia/internal/sip:2003@192.168.20.149:5060|techsupport|Test 2003|20032004|default|192.168.20.73|default|error/user_not_registered|techsupport|Test 2004|2004</p><p>+OKSearch filters can be combined:freeswitch@localhost> list_users group default user 2004</p><p>userid|context|domain|group|contact|callgroup|effective_caller_id_name|effective_caller_id_number2004|default|192.168.20.73|default|error/user_not_registered|techsupport|Test 2004|2004</p><p>+OK</p><h2 id=sched_api><strong>sched_api</strong><a hidden class=anchor aria-hidden=true href=#sched_api>#</a></h2><p>Schedule an <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API call</a> in the future.Usage:sched_api [+@] &lt;group_name> &lt;command_string>[&] is the UNIX timestamp at which the command should be executed. If it is prefixed by +, specifies the number of seconds to wait before executing the command. If prefixed by @, it will execute the command periodically every seconds; for the first instance it will be executed after seconds.&lt;group_name> will be the value of &ldquo;Task-Group&rdquo; in generated events. &ldquo;none&rdquo; is the proper value for no group. If set to UUID of channel (example: ${uuid}), task will automatically be unscheduled when channel hangs up.&lt;command_string> is the command to execute at the scheduled time.A scheduled task or group of tasks can be revoked with sched_del or unsched_api.You could append the &ldquo;&&rdquo; symbol to the end of the line to executed this command in its own thread.Example:sched_api +1800 none originate sofia/internal/1000%${sip_profile} &amp;echo()sched_api @600 check_sched log Periodic task is running&mldr;sched_api +10 ${uuid} chat <a href=mailto:verto%7Cfs@mydomain.com>verto|fs@mydomain.com</a>|1000@mydomain.com|Hello World</p><h2 id=sched_broadcast><strong>sched_broadcast</strong><a hidden class=anchor aria-hidden=true href=#sched_broadcast>#</a></h2><p>Play a file to a specific call in the future.Usage:sched_broadcast [[+]|@time] [aleg|bleg|both]Schedule execution of an application on a chosen leg(s) with optional hangup:sched_broadcast [+] app[![hangup_cause]]::args [aleg|bleg|both] is the UNIX timestamp at which the command should be executed. If it is prefixed by +, specifies the number of seconds to wait before executing the command. If prefixed by @, it will execute the command periodically every seconds; for the first instance it will be executed after seconds.Examples:sched_broadcast +60 336889f2-1868-11de-81a9-3f4acc8e505e commercial.wav bothsched_broadcast +60 336889f2-1868-11de-81a9-3f4acc8e505e say::en\snumber\spronounced\s12345 aleg</p><h2 id=sched_del><strong>sched_del</strong><a hidden class=anchor aria-hidden=true href=#sched_del>#</a></h2><p>Removes a prior scheduled group or task IDUsage:sched_del &lt;group_name|task_id>The one argument can either be a group of prior scheduled tasks or the returned task-id from sched_api.sched_transfer, sched_hangup and sched_broadcast commands add new tasks with group names equal to the channel UUID. Thus, sched_del with the channel UUID as the argument will remove all previously scheduled hangups, transfers and broadcasts for this channel.Examples:sched_del my_groupsched_del 2</p><h2 id=sched_hangup><strong>sched_hangup</strong><a hidden class=anchor aria-hidden=true href=#sched_hangup>#</a></h2><p>Schedule a running call to hangup.Usage:sched_hangup [+] []sched_hangup +0 is the same as uuid_kill</p><h2 id=sched_transfer><strong>sched_transfer</strong><a hidden class=anchor aria-hidden=true href=#sched_transfer>#</a></h2><p>Schedule a transfer for a running call.Usage:sched_transfer [+] [] []</p><h2 id=stun><strong>stun</strong><a hidden class=anchor aria-hidden=true href=#stun>#</a></h2><p>Executes a STUN lookup.Usage:stun [:port]Example:stun stun.freeswitch.org</p><h2 id=system><strong>system</strong><a hidden class=anchor aria-hidden=true href=#system>#</a></h2><p>Execute a system command.Usage:system The is passed to the system shell, where it may be expanded or interpreted in ways you don&rsquo;t expect. This can lead to security bugs if you&rsquo;re not careful. For example, the following command is dangerous:If a malicious remote caller somehow sets his caller ID name to &ldquo;; rm -rf /&rdquo; you would unintentionally be executing this shell command:log_caller_name; rm -rf /This would be a Bad Thing.</p><h2 id=time_test><strong>time_test</strong><a hidden class=anchor aria-hidden=true href=#time_test>#</a></h2><p>Runs a test to see how bad timer jitter is. It runs the test times if specified, otherwise it uses the default count of 10, and tries to sleep for mss microseconds. It returns the actual timer duration along with an average.Usage:time_test [count]Example:time_test 100 5</p><p>test 1 sleep 100 99test 2 sleep 100 97test 3 sleep 100 96test 4 sleep 100 97test 5 sleep 100 102avg 98</p><h2 id=timer_test><strong>timer_test</strong><a hidden class=anchor aria-hidden=true href=#timer_test>#</a></h2><p>Runs a test to see how bad timer jitter is. Unlike time_test, this uses the actual FreeSWITCH timer infrastructure to do the timer test and exercises the timers used for call processing.Usage:timer_test &lt;10|20|40|60|120> [&lt;1..200>] [&lt;timer_name>]The first argument is the timer interval.The second is the number of test iterations.The third is the timer name; &ldquo;show timers&rdquo; will give you a list.Example:timer_test 20 3</p><p>Avg: 16.408ms Total Time: 49.269ms</p><p>2010-01-29 12:01:15.504280 [CONSOLE] mod_commands.c:310 Timer Test: 1 sleep 20 92542010-01-29 12:01:15.524351 [CONSOLE] mod_commands.c:310 Timer Test: 2 sleep 20 200422010-01-29 12:01:15.544336 [CONSOLE] mod_commands.c:310 Timer Test: 3 sleep 20 19928</p><h2 id=tone_detect><strong>tone_detect</strong><a hidden class=anchor aria-hidden=true href=#tone_detect>#</a></h2><p>Start Tone Detection on a channel.Usage:tone_detect &lt;tone_spec> [ ] is required when this is executed as an api call; as a dialplan app the uuid is implicit as part of the channel variables is an arbitrary name that identifies this tone_detect instance; required&lt;tone_spec> frequencies to detect; required &lsquo;r&rsquo; or &lsquo;w&rsquo; to specify which direction to monitor duration during which to detect tones;0 = detect forever+time = number of milliseconds after tone_detect is executedtime = absolute time to stop in seconds since The Epoch (1 January, 1970) FS application to execute when tone_detect is triggered; if app is omitted, only an event will be returned arguments to application enclosed in single quotes the number of times tone_detect should be triggered before executing the specified appOnce tone_detect returns a result, it will not trigger again until reset. Reset tone_detect by calling tone_detect with no additional arguments to reactivate the previously specified tone_detect declaration.See also <a href=http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_tone_detect>http://wiki.freeswitch.org/wiki/Misc._Dialplan_Tools_tone_detect</a></p><h2 id=unsched_api><strong>unsched_api</strong><a hidden class=anchor aria-hidden=true href=#unsched_api>#</a></h2><p>Unschedule a previously scheduled <a href="https://freeswitch.org/confluence/plugins/servlet/mobile?contentId=1966741#content/view/30867723">API command</a>.Usage:unsched_api &lt;task_id></p><h2 id=url_decode><strong>url_decode</strong><a hidden class=anchor aria-hidden=true href=#url_decode>#</a></h2><p>Usage:url_decode</p><h2 id=url_encode><strong>url_encode</strong><a hidden class=anchor aria-hidden=true href=#url_encode>#</a></h2><p>Url encode a string.Usage:url_encode</p><h2 id=user_data><strong>user_data</strong><a hidden class=anchor aria-hidden=true href=#user_data>#</a></h2><p>Retrieves user information (parameters or variables) as defined in the FreeSWITCH user directory.Usage:user_data @ &lt;attr|var|param> is the user&rsquo;s id is the user&rsquo;s domain&lt;attr|var|param> specifies whether the requested data is contained in the &ldquo;variables&rdquo; or &ldquo;parameters&rdquo; section of the user&rsquo;s record is the name (key) of the variable to retrieveExamples:user_data <a href=mailto:1000@192.168.1.101>1000@192.168.1.101</a> param passwordwill return a result of 1234, anduser_data <a href=mailto:1000@192.168.1.101>1000@192.168.1.101</a> var accountcodewill return a result of 1000 from the example user shown in <a href=https://wiki.freeswitch.org/wiki/Mod_commands#user_exists>user_exists</a>, anduser_data <a href=mailto:1000@192.168.1.101>1000@192.168.1.101</a> attr idwill return the user&rsquo;s actual alphanumeric ID (i.e. &ldquo;john&rdquo;) when number-alias=&ldquo;1000&rdquo; was set as an attribute for that user.</p><h2 id=user_exists><strong>user_exists</strong><a hidden class=anchor aria-hidden=true href=#user_exists>#</a></h2><p>Checks to see if a user exists. Matches user tags found in the directory and returns either true/false:Usage:user_exists references a key specified in a directory&rsquo;s user tag represents the value of the key is the domain to which the user belongsExample:user_exists id 1000 192.168.1.101will return true where there exists in the directory a user with a key called id whose value equals 1000:<strong>User Directory Entry</strong>In the above example, we also could have tested for randomvar:user_exists randomvar 45 192.168.1.101And we would have received the same true result, but:user_exists accountcode 1000 192.168.1.101oruser_exists vm-password 1000 192.168.1.101Would have returned false.</p></div><footer class=post-footer><ul class=post-tags></ul></footer><script src=https://giscus.app/client.js data-repo=wangduanduan/wangduanduan.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxMTkyMjMyNjA=" data-category=Announcements data-category-id=DIC_kwDOBxsz3M4CAjBq data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://wdd.js.org/>洞香春</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>