<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>FreeSWITCH之路 | 洞香春</title>
<meta name=keywords content><meta name=description content="VOIP"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/freeswitch/><link crossorigin=anonymous href=/assets/css/stylesheet.821c51435cba3e33e49e590a06514c54c32ac7957095ffcc1e0f390c47cf3228.css integrity="sha256-ghxRQ1y6PjPknlkKBlFMVMMqx5Vwlf/MHg85DEfPMig=" rel="preload stylesheet" as=style><link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wdd.js.org/freeswitch/index.xml><link rel=alternate hreflang=en href=https://wdd.js.org/freeswitch/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://wdd.js.org/freeswitch/"><meta property="og:site_name" content="洞香春"><meta property="og:title" content="FreeSWITCH之路"><meta property="og:description" content="VOIP"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="FreeSWITCH之路"><meta name=twitter:description content="VOIP"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"FreeSWITCH之路","item":"https://wdd.js.org/freeswitch/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org/ accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/books/ title=读书><span>读书</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span class=active>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/fe/ title=前端><span>前端</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://wdd.js.org/>Home</a></div><h1>FreeSWITCH之路</h1><div class=post-description>VOIP</div></header><div class=post-content><div class="notice note"><div class=notice-title><i class="fa fa-sticky-note" aria-hidden=true></i>Note</div><div class=notice-content>曲径通幽处，禅房花木深。</div></div></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>mod_commands</h2></header><div class=entry-content><p>Usage CLI See below. API/Event Interfaces mod_event_socket mod_erlang_event mod_xml_rpc Scripting Interfaces mod_perl mod_v8 mod_python mod_lua From the Dialplan An API command can be called from the dialplan. Example:Invoke API Command From DialplanOther examples:Other Dialplan API Command ExamplesAPI commands with multiple arguments usually have the arguments separated by a space:Multiple Arguments
...</p></div><footer class=entry-footer><span title='2019-12-10 11:32:38 +0800 CST'>2019-12-10 11:32:38</span>&nbsp;·&nbsp;35 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to mod_commands" href=https://wdd.js.org/freeswitch/mod-command/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>XML Switch Configuration</h2></header><div class=entry-content><p>The FreeSWITCH core configuration is contained in autoload_configs/switch.conf.xml
Default key bindings Function keys can be mapped to API commands using the following configuration:The default keybindings are;F1 = helpF2 = statusF3 = show channelsF4 = show callsF5 = sofia statusF6 = reloadxmlF7 = console loglevel 0F8 = console loglevel 7F9 = sofia status profile internalF10 = sofia profile internal siptrace onF11 = sofia profile internal siptrace offF12 = versionBeware that the option loglevel is actually setting the minimum hard_log_Level in the application. What this means is if you set this to something other than DEBUG no matter what log level you set the console to one you start up you will not be able to get any log messages below the level you set. Also be careful of mis-typing a log level, if the log level is not correct it will default to a hard_log_level of 0. This means that virtually no log messages will show up anywhere. ...</p></div><footer class=entry-footer><span title='2019-12-10 11:30:38 +0800 CST'>2019-12-10 11:30:38</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to XML Switch Configuration" href=https://wdd.js.org/freeswitch/xml-config/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Sofia SIP Stack</h2></header><div class=entry-content><p>Sofia is a SIP stack used by FreeSWITCH. When you see “sofia” anywhere in your configuration, think “This is SIP stuff.” It takes a while to master it all, so please be patient with yourself. SIP is a crazy protocol and it will make you crazy too if you aren’t careful. Read on for information on setting up SIP/Sofia in your FreeSWITCH configuration.
mod_sofia exposes the Sofia API and sets up the FreeSWITCH SIP endpoint. ...</p></div><footer class=entry-footer><span title='2019-12-10 11:27:17 +0800 CST'>2019-12-10 11:27:17</span>&nbsp;·&nbsp;13 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to Sofia SIP Stack" href=https://wdd.js.org/freeswitch/sofia-stack/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>编译FS</h2></header><div class=entry-content><p>make clean - Cleans the build environment make current - Cleans build environment, performs an git update, then does a make install make core_install (or make install_core) - Recompiles and installs just the core files. Handy if you are working on a core file and want to recompile without doing the whole shebang. make mod_XXXX-install - Recompiles and installs just a single module. Here are some examples: make mod_openzap-install make mod_sofia-install make mod_lcr-install make samples - This will not replace your configuration. This will instead make the default extensions and dialplan to run the basic configuration of FreeSWITCH.</p></div><footer class=entry-footer><span title='2019-12-10 11:25:04 +0800 CST'>2019-12-10 11:25:04</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 编译FS" href=https://wdd.js.org/freeswitch/compile-fs/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>fs 命令行</h2></header><div class=entry-content><p>运行fs 前台运行 freeswitch 后台运行 freeswich -nc 参数列表 These are the optional arguments you can pass to freeswitch:
FreeSWITCH startup switches
-waste -- allow memory waste -no-auto-stack -- don't adjust thread stack size -core -- dump cores -help -- print this message -version -- print the version and exit -rp -- enable high(realtime) priority settings -lp -- enable low priority settings -np -- enable normal priority settings (system default) -vg -- run under valgrind -nosql -- disable internal SQL scoreboard -heavy-timer -- Heavy Timer, possibly more accurate but at a cost -nonat -- disable auto NAT detection -nonatmap -- disable auto NAT port mapping -nocal -- disable clock calibration -nort -- disable clock clock_realtime -stop -- stop freeswitch -nc -- no console and run in background -ncwait -- no console and run in background, but wait until the system is ready before exiting (implies -nc) -c -- output to a console and stay in the foreground (default behavior) ...</p></div><footer class=entry-footer><span title='2019-12-10 11:19:39 +0800 CST'>2019-12-10 11:19:39</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to fs 命令行" href=https://wdd.js.org/freeswitch/command-line/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>fs reload命令</h2></header><div class=entry-content><p>Item Reload Command Notes XML Dialplan reloadxml Run each time you edit XML dial file(s) ACLs reloadacl Edit acl.conf.xml first Voicemail reload mod_voicemail Edit voicemail.conf.xml first Conference reload mod_conference Edit conference.conf.xml first Add Sofia Gateway sofia profile rescan Less intrusive - no calls dropped Remove Sofia Gateway sofia profile killgw &lt;gateway_name> Less intrusive - no calls dropped Restart Sofia Gateway sofia profile killgw &lt;gateway_name>sofia profile rescan Less intrusive - no calls dropped Add/remove Sofia Gateway sofia profile restart More intrusive - all profile calls dropped Local Stream see Mod_local_stream Edit localstream.conf.xml first Update a lua file nothing necessary file is loaded from disk each time it is run Update LCR SQL table nothing necessary SQL query is run for each new call Update LCR options reload mod_lcr Edit lcr.conf.xml first Update CID Lookup Options reload mod_cidlookup Edit cidlookup.conf.xml first Update JSON CDR Options reload mod_json_cdr Edit json_cdr.conf.xml first Update XML CDR Options reload mod_xml_cdr Edit xml_cdr.conf.xml first Update XML CURL Server Response nothing, unless using cache</p></div><footer class=entry-footer><span title='2019-12-10 11:17:55 +0800 CST'>2019-12-10 11:17:55</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to fs reload命令" href=https://wdd.js.org/freeswitch/reload/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>通道变量与SIP 消息头</h2></header><div class=entry-content><p>自定义SIP消息头如何从通道变量中获取？ if you pass a header variable called type from the proxy server, it will get displayed as variable_sip_h_type in FreeSWITCH™. To access that variable, you should strip off the variable_, and just do ${sip_h_type}</p></div><footer class=entry-footer><span title='2019-07-15 23:06:57 +0800 CST'>2019-07-15 23:06:57</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 通道变量与SIP 消息头" href=https://wdd.js.org/freeswitch/get-sip-header/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>fs日志级别</h2></header><div class=entry-content><p>fs日志级别
0 "CONSOLE", 1 "ALERT", 2 "CRIT", 3 "ERR", 4 "WARNING", 5 "NOTICE", 6 "INFO", 7 "DEBUG" 日志级别设置的越高，显示的日志越多
在autoload_configs/switch.conf.xml 设置了一些快捷键，可以在fs_cli中使用
F7将日志级别设置为0，显示的日志最少 F8将日志级别设置为7， 显示日志最多 同时也可以使用 console loglevel指令自定义设置级别
console loglevel 1 console loglevel notice 参考 https://freeswitch.org/confluence/display/FREESWITCH/Troubleshooting+Debugging</p></div><footer class=entry-footer><span title='2019-07-11 17:13:29 +0800 CST'>2019-07-11 17:13:29</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to fs日志级别" href=https://wdd.js.org/freeswitch/fs-log-level/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://wdd.js.org/freeswitch/>«&nbsp;Prev&nbsp;</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://wdd.js.org/>洞香春</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>