<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>node on 洞香春</title>
    <link>https://wdd.js.org/tags/node/</link>
    <description>Recent content in node on 洞香春</description>
    <image>
      <url>https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- gohugo.io</generator>
    <language>en</language>
    <lastBuildDate>Sun, 09 Jul 2023 14:20:45 +0800</lastBuildDate><atom:link href="https://wdd.js.org/tags/node/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>安装NodeJS, N命令似乎卡住了</title>
      <link>https://wdd.js.org/posts/2023/n-stucked/</link>
      <pubDate>Sun, 09 Jul 2023 14:20:45 +0800</pubDate>
      
      <guid>https://wdd.js.org/posts/2023/n-stucked/</guid>
      <description>我一般会紧跟着NodeJS官网的最新版，来更新本地的NodeJS版本。
我的系统是ubuntu 20.4, 我用tj/n这个工具来更新Node。
但是这一次，这个命令似乎卡住了。
我排查后发现，是n这个命令在访问https://nodejs.org/dist/index.tab这个地址时，卡住了。
请求超时，因为默认没有设置超时时长，所以等待了很久才显示超时的报错，表现象上看起来就是卡住了。
首先我用dig命令查了nodejs.org的dns解析，我发现是正常解析的。
然后我又用curl对nodejs官网做了一个测试，发现也是请求超时。
curl -i -m 5 https://nodejs.org curl: (28) Failed to connect to nodejs.org port 443 after 3854 ms: 连接超时 这样问题就清楚了，然后我就想起来npmirrror上应该有nodejs的镜像。 在查看n这个工具的文档时，我也发现，它是支持设置mirror的。
其中给的例子用的就是淘宝NPM
就是设置了一个环境变量。然后执行source ~/.zshrc
export N_NODE_MIRROR=https://npmmirror.com/mirrors/node 但是，我发现在命令行里用echo可以打印N_NODE_MIRROR这个变量的值，但是在安装脚本里，还是无法获取设置的这个mirror。
我想或许和我在执行sudo n lts时的sudo有关，这个.zshrc在sudo这种管理员模式下是不生效的。普通用户的环境变量也不会继承到sudo执行的环境变量里
最后，我用sudo -E n lts, 成功的从npmmirror上更新了nodejs的版本。
关于curl超时的这个问题，我也给n仓库提出了pull request, https://github.com/tj/n/pull/771</description>
    </item>
    
    <item>
      <title>NodeJS Events 模块笔记</title>
      <link>https://wdd.js.org/posts/2018/08/deepin-nodejs-events/</link>
      <pubDate>Fri, 10 Aug 2018 10:18:57 +0800</pubDate>
      
      <guid>https://wdd.js.org/posts/2018/08/deepin-nodejs-events/</guid>
      <description>1. 环境 node 8.11.3 2. 基本使用 // 01.js const EventEmitter = require(&amp;#39;events&amp;#39;); class MyEmitter extends EventEmitter {} const myEmitter = new MyEmitter(); myEmitter.on(&amp;#39;event&amp;#39;, () =&amp;gt; { console.log(&amp;#39;an event occurred!&amp;#39;); }); myEmitter.emit(&amp;#39;event&amp;#39;); 输出：
an event occurred! 3. 传参与this指向 emit()方法可以传不限制数量的参数。 除了箭头函数外，在回调函数内部，this会被绑定到EventEmitter类的实例上 // 02.js const EventEmitter = require(&amp;#39;events&amp;#39;) class MyEmitter extends EventEmitter {} const myEmitter = new MyEmitter() myEmitter.on(&amp;#39;event&amp;#39;, function (a, b){ console.log(a, b, this, this === myEmitter) }) myEmitter.on(&amp;#39;event&amp;#39;, (a, b) =&amp;gt; { console.</description>
    </item>
    
  </channel>
</rss>
