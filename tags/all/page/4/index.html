<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>All | 洞香春</title>
<meta name=keywords content><meta name=description content="Eddie Wang的个人博客"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/tags/all/><link crossorigin=anonymous href=/assets/css/stylesheet.821c51435cba3e33e49e590a06514c54c32ac7957095ffcc1e0f390c47cf3228.css integrity="sha256-ghxRQ1y6PjPknlkKBlFMVMMqx5Vwlf/MHg85DEfPMig=" rel="preload stylesheet" as=style><link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wdd.js.org/tags/all/index.xml><link rel=alternate hreflang=en href=https://wdd.js.org/tags/all/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://wdd.js.org/tags/all/"><meta property="og:site_name" content="洞香春"><meta property="og:title" content="All"><meta property="og:description" content="Eddie Wang的个人博客"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="All"><meta name=twitter:description content="Eddie Wang的个人博客"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org/ accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/books/ title=读书><span>读书</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/kamailio/56/ title="Kamailio 5.6 wiki"><span>Kamailio 5.6 wiki</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/fe/ title=前端><span>前端</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://wdd.js.org/>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/tags/>Tags</a></div><h1>All</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.12 黑名单参数</h2></header><div class=entry-content><p>1. dst_blocklist_expire Alias name: dst_blocklist_ttl
How much time a blocklisted destination will be kept in the blocklist (w/o any update).
dst_blocklist_expire = time in s (default 60 s) 2. dst_blocklist_gc_interval How often the garbage collection will run (eliminating old, expired entries).
dst_blocklist_gc_interval = time in s (default 60 s) 3. dst_blocklist_init If off, the blocklist is not initialized at startup and cannot be enabled at runtime, this saves some memory.
...</p></div><footer class=entry-footer>1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.12 黑名单参数" href=https://wdd.js.org/kamailio/56/bl-params/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.13 实时参数</h2></header><div class=entry-content><p>1. real_time Sets real time priority for all the Kamailio processes, or the timers (bitmask).
Possible values: 0 - off 1 - the "fast" timer 2 - the "slow" timer 4 - all processes, except the timers Example: real_time= 7 => everything switched to real time priority. real_time = &lt;int> (flags) (default off) 2. rt_policy Real time scheduling policy, 0 = SCHED_OTHER, 1= SCHED_RR and 2=SCHED_FIFO
rt_policy= &lt;0..3> (default 0) 3. rt_prio Real time priority used for everything except the timers, if real_time is enabled.
...</p></div><footer class=entry-footer>1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.13 实时参数" href=https://wdd.js.org/kamailio/56/rt-params/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.14 核心函数</h2></header><div class=entry-content><p>Functions exported by core that can be used in route blocks.
1. add_local_rport ⭐️ Add rport parameter to local generated Via header – see RFC3581. In effect for forwarded SIP requests.
Example of usage:
add_local_rport(); 2. avpflags 3. break ‘break’ statement can be used to end a ‘case’ block in a ‘switch’ statement or exit from a ‘while’ statement.
4. drop ⭐️ Stop the execution of the configuration script and alter the implicit action which is done afterwards.
...</p></div><footer class=entry-footer>9 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.14 核心函数" href=https://wdd.js.org/kamailio/56/core-func/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.15 自定义全局参数</h2></header><div class=entry-content><p>These are parameters that can be defined by the writer of kamailio.cfg in order to be used inside routing blocks. One of the important properties for custom global parameters is that their value can be changed at runtime via RPC commands, without restarting Kamailio.
The definition of a custom global parameter must follow the pattern:
group.variable = value desc "description" The value can be a quoted string or integer number.
...</p></div><footer class=entry-footer>1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.15 自定义全局参数" href=https://wdd.js.org/kamailio/56/custom-params/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.16 路由块 - 请求路由、响应路由、分支路由、失败路由等</h2></header><div class=entry-content><p>1. Routing Blocks The routing blocks are the parts of the configuration file executed by kamailio at runtime. They can be seen as blocks of actions similar to functions (or procedures) from common programming languages.
A routing block is identified by a specific token, followed by a name in between square brackets and actions in between curly braces.
route_block_id[NAME] { ACTIONS } The name can be any alphanumeric string, with specific routing blocks enforcing a particular format.
...</p></div><footer class=entry-footer>8 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.16 路由块 - 请求路由、响应路由、分支路由、失败路由等" href=https://wdd.js.org/kamailio/56/routing-blocks/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.17 脚本语法 - if、else、switch、while、赋值、比较、算数等</h2></header><div class=entry-content><p>1. if IF-ELSE statement
Prototype:
if(expr) { actions; } else { actions; } The expr should be a valid logical expression.
The logical operators that can be used in expr:
==: equal !=: not equal =~: case-insensitive regular expression matching: Note: Posix regular expressions will be used, e.g. use [[:digit:]]{3} instead of \d\d\d !~: regular expression not-matching (NOT PORTED from Kamailio 1.x, use !(x =~ y)) >: greater >=: greater or equal &lt;: less &lt;=: less or equal &&: logical AND ||: logical OR !: logical NOT Example of usage:
...</p></div><footer class=entry-footer>5 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.17 脚本语法 - if、else、switch、while、赋值、比较、算数等" href=https://wdd.js.org/kamailio/56/script-statements/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.18 命令行参数</h2></header><div class=entry-content><p>Command Line Parameters Kamailio can be started with a set of command line parameters, providing more flexibility to control what is doing at runtime. Some of them can be quite useful when running on containerised environments.
To see the the available command line parameters, run kamailio -h:
# kamailio -h version: kamailio 5.4.0-dev4 (x86_64/darwin) 8c1864 Usage: kamailio [options] Options: -a mode Auto aliases mode: enable with yes or on, disable with no or off --alias=val Add an alias, the value has to be '[proto:]hostname[:port]' (like for 'alias' global parameter) -A define Add config pre-processor define (e.g., -A WITH_AUTH, -A 'FLT_ACC=1', -A 'DEFVAL="str-val"') -b nr Maximum receive buffer size which will not be exceeded by auto-probing procedure even if OS allows -c Check configuration file for syntax errors -d Debugging mode (multiple -d increase the level) -D Control how daemonize is done: -D..do not fork (almost) anyway; -DD..do not daemonize creator; -DDD..daemonize (default) -e Log messages printed in terminal colors (requires -E) -E Log to stderr -f file Configuration file (default: /usr/local/etc/kamailio/kamailio.cfg) -g gid Change gid (group id) -G file Create a pgid file -h This help message --help Long option for `-h` -I Print more internal compile flags and options -K Turn on "via:" host checking when forwarding replies -l address Listen on the specified address/interface (multiple -l mean listening on more addresses). The address format is [proto:]addr_lst[:port][/advaddr], where proto=udp|tcp|tls|sctp, addr_lst= addr|(addr, addr_lst), addr=host|ip_address|interface_name and advaddr=addr[:port] (advertised address). E.g: -l localhost, -l udp:127.0.0.1:5080, -l eth0:5062, -l udp:127.0.0.1:5080/1.2.3.4:5060, -l "sctp:(eth0)", -l "(eth0, eth1, 127.0.0.1):5065". The default behaviour is to listen on all the interfaces. --loadmodule=name load the module specified by name --log-engine=log engine name and data -L path Modules search path (default: /usr/local/lib64/kamailio/modules) -m nr Size of shared memory allocated in Megabytes --modparam=modname:paramname:type:value set the module parameter type has to be 's' for string value and 'i' for int value, example: --modparam=corex:alias_subdomains:s:kamailio.org -M nr Size of private memory allocated, in Megabytes -n processes Number of child processes to fork per interface (default: 8) -N Number of tcp child processes (default: equal to `-n') -O nr Script optimization level (debugging option) -P file Create a pid file -Q Number of sctp child processes (default: equal to `-n') -r Use dns to check if is necessary to add a "received=" field to a via -R Same as `-r` but use reverse dns; (to use both use `-rR`) --server-id=num set the value for server_id --subst=exp set a subst preprocessor directive --substdef=exp set a substdef preprocessor directive --substdefs=exp set a substdefs preprocessor directive -S disable sctp -t dir Chroot to "dir" -T Disable tcp -u uid Change uid (user id) -v Version number --version Long option for `-v` -V Alternative for `-v` -x name Specify internal manager for shared memory (shm) - can be: fm, qm or tlsf -X name Specify internal manager for private memory (pkg) - if omitted, the one for shm is used -Y dir Runtime dir path -w dir Change the working directory to "dir" (default: "/") -W type poll method (depending on support in OS, it can be: poll, epoll_lt, epoll_et, sigio_rt, select, kqueue, /dev/poll)</p></div><footer class=entry-footer>3 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.18 命令行参数" href=https://wdd.js.org/kamailio/56/cli-params/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.19 日志引擎</h2></header><div class=entry-content><p>Log Engine CLI Parameter The –log-engine parameter allows to specify what logging engine to be used, which is practically about the format of the log messages. If not set at all, then Kamailio does the classic style of line-based plain text log messages.
The value of this parameter can be –log-engine=name or –log-engine=name:data.
The name of the log engine can be:
json - write logs in structured JSON format the data for json log engine can be a set of character flags: a - add log prefix as a special field A - do not add log prefix c - add Call-ID (when available) as a dedicated JSON attribute j - the log prefix and message fields are printed in JSON structure format, detecting if they are enclosed in between { } or adding them as a text field M - strip EOL (’\n’) from the value of the log message field N - do not add EOL at the end of JSON document p - the log prefix is printed as it is in the root json document, it has to start with comma (,) and be a valid set of json fields U - CEE (Common Event Expression) schema format - https://cee.mitre.org/language/1.0-beta1/core-profile.html Example of JSON logs when running Kamailio with “–log-engine=json:M” :
...</p></div><footer class=entry-footer>2 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.19 日志引擎" href=https://wdd.js.org/kamailio/56/log-engine/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.2 通用元素 - 注释、标识符、变量、值、表达式</h2></header><div class=entry-content><p>1. Comments Line comments start with # (hash/pound character - like in shell) or / / (double forward slash - like in C++/Java).
Block comments start with /* (forward slash and asterisk) and are ended by */ (sterisk and forward slash) (like in C, C++, Java).
Example:
# this is a line comment // this is another line comment /* this is a block comment */ Important: be aware of preprocessor directives that start with #! (hash/pound and exclamation) - those are no longer line comments.
...</p></div><footer class=entry-footer>2 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.2 通用元素 - 注释、标识符、变量、值、表达式" href=https://wdd.js.org/kamailio/56/generic-elements/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>1.3 预处理指令 - 文件导入、宏定义、环境变量读取</h2></header><div class=entry-content><p>预处理指令主要的目的是方便脚本维护，方便脚本在不同环境下运行。 预处理之后，脚本才会开始解析。
1. include_file include_file "path_to_file" Include the content of the file in config before parsing. path_to_file must be a static string. Including file operation is done at startup. If you change the content of included file, you have to restart the SIP server to become effective.
路径必须是静态，修改脚本要重启
The path_to_file can be relative or absolute. If it is not absolute path, first attempt is to locate it relative to current directory, and if fails, relative to directory of the file that includes it. There is no restriction where include can be used or what can contain - any part of config file is ok. There is a limit of maximum 10 includes in depth, otherwise you can use as many includes as you want. Reporting of the cfg file syntax errors prints now the file name for easier troubleshooting.
...</p></div><footer class=entry-footer>5 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.3 预处理指令 - 文件导入、宏定义、环境变量读取" href=https://wdd.js.org/kamailio/56/pre-processor/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://wdd.js.org/tags/all/page/3/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://wdd.js.org/tags/all/page/5/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://wdd.js.org/>洞香春</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>