<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Shields on 洞香春</title>
    <link>https://wdd.js.org/tags/shields/</link>
    <description>Recent content in Shields on 洞香春</description>
    <image>
      <title>洞香春</title>
      <url>https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</url>
      <link>https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E</link>
    </image>
    <generator>Hugo -- 0.143.1</generator>
    <language>en</language>
    <lastBuildDate>Mon, 29 Oct 2018 09:14:43 +0800</lastBuildDate>
    <atom:link href="https://wdd.js.org/tags/shields/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>shields小徽章是如何生成的？以及搭建自己的shield服务器</title>
      <link>https://wdd.js.org/posts/2018/10/how-to-make-shields-badge/</link>
      <pubDate>Mon, 29 Oct 2018 09:14:43 +0800</pubDate>
      <guid>https://wdd.js.org/posts/2018/10/how-to-make-shields-badge/</guid>
      <description>&lt;h1 id=&#34;shields小徽章介绍&#34;&gt;shields小徽章介绍&lt;/h1&gt;
&lt;p&gt;一般开源项目都会有一些小徽章来标识项目的状态信息，并且这些信息是会自动更新的。在shields的官网https://shields.io/#/, 上面有各种各样的小图标，并且有很多自定义的方案。&lt;/p&gt;
&lt;h1 id=&#34;起因如何给私有部署的jenkins制作shields服务&#34;&gt;起因：如何给私有部署的jenkins制作shields服务？&lt;/h1&gt;
&lt;p&gt;私有部署的jenkins是用来打包docker镜像的，而我想获取最新的项目打包的jenkins镜像信息。但是私有的jenkins项目信息，公网的shields服务是无法获取其信息的。那么如果搭建一个私有的shields服务呢？&lt;/p&gt;
&lt;h1 id=&#34;第一步如何根据一些信息制作svg图标&#34;&gt;第一步：如何根据一些信息，制作svg图标&lt;/h1&gt;
&lt;p&gt;查看shields图标的源码，可以看到这些图标都是svg格式的图标。然后的思路就是，&lt;code&gt;将文字信息转成svg图标&lt;/code&gt;。最后我发现这个思路是个死胡同，&lt;/p&gt;
&lt;p&gt;有个npm包叫做，&lt;a href=&#34;https://github.com/shrhdk/text-to-svg&#34;&gt;text-to-svg&lt;/a&gt;, 似乎可以将文本转成svg, 但是看了文本转svg的效果，果断就放弃了。&lt;/p&gt;
&lt;p&gt;最后回到起点，看了shields官方仓库，发现一个templates目录，豁然开朗。&lt;code&gt;原来svg图标是由svg的模板生成的&lt;/code&gt;，每次生成图标只需要将信息添加到模板中，然后就可以渲染出svg字符串了。&lt;/p&gt;
&lt;p&gt;顺着这个思路，发现一个包&lt;a href=&#34;https://github.com/albanm/shields-lightweight&#34;&gt;shields-lightweight&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;var shields = require(&amp;#39;shields-lightweight&amp;#39;);
var svgBadge = shields.svg(&amp;#39;subject&amp;#39;, &amp;#39;status&amp;#39;, &amp;#39;red&amp;#39;, &amp;#39;flat&amp;#39;);
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;这个包的确可以生成和shields一样的小徽章，但是如果徽章中有中文，那么中文就会溢出。&lt;code&gt;因为一个中文字符的宽度要比一个英文字符宽很多。&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;所以我就fork了这个项目，重写了图标宽度计算的方式。&lt;a href=&#34;https://github.com/wangduanduan/shields-less&#34;&gt;shields-less&lt;/a&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;npm install shields-less

var shieldsLess = require(&amp;#39;shields-less&amp;#39;)
var svgBadge = shieldsLess.svg({
    leftText: &amp;#39;npm 黄河远上白云间&amp;#39;,
    rightText: &amp;#39;hello 世界&amp;#39;
})

var svgBadge2 = shieldsLess.svg({
    leftText: &amp;#39;npm 黄河远上白云间&amp;#39;,
    rightText: &amp;#39;hello 世界&amp;#39;,
    style: &amp;#39;square&amp;#39;
})

var svgBadge2 = shieldsLess.svg({
    leftText: &amp;#39;npm 黄河远上白云间&amp;#39;,
    rightText: &amp;#39;hello 世界&amp;#39;,
    leftColor: &amp;#39;#e64a19&amp;#39;,
    rightColor: &amp;#39;#448aff&amp;#39;,
    style: &amp;#39;square&amp;#39; // just two style: square and plat(default)
})
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;渲染后的效果，查看在线demo: &lt;a href=&#34;https://wdd.js.org/shields-less/example/&#34;&gt;https://wdd.js.org/shields-less/example/&lt;/a&gt;&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
