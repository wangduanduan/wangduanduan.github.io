<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>SIP on 洞香春</title>
    <link>https://wdd.js.org/tags/sip/</link>
    <description>Recent content in SIP on 洞香春</description>
    <generator>Hugo -- 0.151.0</generator>
    <language>en</language>
    <lastBuildDate>Tue, 06 Jan 2026 19:00:15 +0800</lastBuildDate>
    <atom:link href="https://wdd.js.org/tags/sip/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>天下苦 VOS 久矣</title>
      <link>https://wdd.js.org/posts/2026/the-voip-world-has-suffered-from-vos-for-too-long/</link>
      <pubDate>Tue, 06 Jan 2026 19:00:15 +0800</pubDate>
      <guid>https://wdd.js.org/posts/2026/the-voip-world-has-suffered-from-vos-for-too-long/</guid>
      <description>&lt;p&gt;天下苦 VOS 久矣。
此言非怒而发，乃久用之后，积怨成理也。&lt;/p&gt;
&lt;p&gt;VOS3x、VOS5x，曾有其功。
当年软交换荒芜，SIP 规范未成体系，工程师多凭经验行事。VOS 以一套封装良好的系统，解“能跑”之急，立一时之功，不可不认。&lt;/p&gt;
&lt;p&gt;然功成之后，不思进化；
市占既稳，便少革新。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;天下之患，莫大于此。&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;一垄断既久问题反成常态&#34;&gt;一、垄断既久，问题反成常态&lt;/h2&gt;
&lt;p&gt;今之 VOS，已非“可选方案”，而成“默认答案”。&lt;/p&gt;
&lt;p&gt;选型之时，不问架构，只问“是不是 VOS”；
排障之时，不查协议，只等“厂商回复”。&lt;/p&gt;
&lt;p&gt;于是，奇景频出：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SIP 行为异于 RFC，而曰“产品设计如此”&lt;/li&gt;
&lt;li&gt;性能瓶颈不可测，而曰“经验上差不多”&lt;/li&gt;
&lt;li&gt;复杂需求难以实现，而曰“VOS 不支持”,&lt;/li&gt;
&lt;li&gt;简单需求可实现，但“得加钱”&lt;/li&gt;
&lt;li&gt;故障定位止于日志，而曰“已提交工单”&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;久而久之，
问题不再被解决，
只是被习惯。&lt;/p&gt;
&lt;h2 id=&#34;二用-vos工程师何其卑微&#34;&gt;二、用 VOS，工程师何其卑微&lt;/h2&gt;
&lt;p&gt;用 VOS 者，常有此感：&lt;/p&gt;
&lt;p&gt;系统在跑，
却不知为何如此跑；
问题已现，
却不知从何而断。&lt;/p&gt;
&lt;p&gt;工程师所做者，不过：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;点配置&lt;/li&gt;
&lt;li&gt;调参数&lt;/li&gt;
&lt;li&gt;猜行为&lt;/li&gt;
&lt;li&gt;等回复&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;软交换本该是工程，
却活成了玄学。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;三opensips--kamailio让系统讲人话&#34;&gt;三、OpenSIPS / Kamailio：让系统“讲人话”&lt;/h2&gt;
&lt;p&gt;或问：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;“不用 VOS，又当用谁？”&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;曰：OpenSIPS，Kamailio。&lt;/p&gt;
&lt;p&gt;二者之道，不在“省钱”，而在&lt;strong&gt;透明&lt;/strong&gt;：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;SIP 即 SIP，不自创私货&lt;/li&gt;
&lt;li&gt;路由即代码，行为白纸黑字&lt;/li&gt;
&lt;li&gt;性能可压测，瓶颈可定位&lt;/li&gt;
&lt;li&gt;出问题先看脚本，而非先写邮件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;在此体系之中，
系统不再“猜你想要什么”，
而是“严格执行你所写之逻辑”。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;这是工程，
不是占卜。&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;四开源之苦在前开源之利在后&#34;&gt;四、开源之苦，在前；开源之利，在后&lt;/h2&gt;
&lt;p&gt;诚然，OpenSIPS / Kamailio 不好上手。
学习曲线陡峭，踩坑在所难免。&lt;/p&gt;</description>
    </item>
    <item>
      <title>SIP安全 - DTLS client Hello 攻击白皮书</title>
      <link>https://wdd.js.org/posts/2025/dtls-hello-attack/</link>
      <pubDate>Mon, 14 Jul 2025 23:13:23 +0800</pubDate>
      <guid>https://wdd.js.org/posts/2025/dtls-hello-attack/</guid>
      <description>&lt;h1 id=&#34;tldr&#34;&gt;TL;DR&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;攻击者伪造DTLS ClientHello消息，在SIP服务器和客户端之间建立一个非预期的连接。导致正常链接被阻断。&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;影响软件&#34;&gt;影响软件&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;FreeSWITCH&lt;/li&gt;
&lt;li&gt;RTPengine&lt;/li&gt;
&lt;li&gt;asterisk&lt;/li&gt;
&lt;li&gt;FreePBX&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;漏洞白皮书&#34;&gt;漏洞白皮书&lt;/h1&gt;
&lt;p&gt;&lt;a href=&#34;./webrtc-hello-race-conditions-paper.pdf&#34;&gt;webrtc-hello-race-conditions-paper&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;表现&#34;&gt;表现&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;应答后呼叫无声&lt;/li&gt;
&lt;/ul&gt;
&lt;h1 id=&#34;参考&#34;&gt;参考&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/EnableSecurity/advisories/tree/master/ES2023-03-rtpengine-dtls-hello-race&#34;&gt;https://github.com/EnableSecurity/advisories/tree/master/ES2023-03-rtpengine-dtls-hello-race&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/EnableSecurity/advisories/tree/master/ES2023-02-freeswitch-dtls-hello-race&#34;&gt;https://github.com/EnableSecurity/advisories/tree/master/ES2023-02-freeswitch-dtls-hello-race&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/EnableSecurity/advisories/tree/master/ES2023-03-rtpengine-dtls-hello-race&#34;&gt;https://github.com/EnableSecurity/advisories/tree/master/ES2023-03-rtpengine-dtls-hello-race&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
    </item>
    <item>
      <title>基于 WebRTC 构建 Web SIP Phone</title>
      <link>https://wdd.js.org/posts/2018/02/webrtc-web-sip-phone/</link>
      <pubDate>Sun, 11 Feb 2018 14:44:58 +0800</pubDate>
      <guid>https://wdd.js.org/posts/2018/02/webrtc-web-sip-phone/</guid>
      <description>&lt;h1 id=&#34;0-阅前须知&#34;&gt;0 阅前须知&lt;/h1&gt;
&lt;ul&gt;
&lt;li&gt;本文并不是教程，只是实现方案&lt;/li&gt;
&lt;li&gt;我只是从WEB端考虑这个问题，实际还需要后端sip服务器的配合&lt;/li&gt;
&lt;li&gt;jsSIP有个非常不错的在线demo, 可以去哪里玩耍，很好玩呢 &lt;a href=&#34;https://tryit.jssip.net/&#34;&gt;try jssip &lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://wdd.js.org/img/images/20180211144554_nUwjgc_Screenshot.jpeg&#34;&gt;&lt;/p&gt;
&lt;h1 id=&#34;1-技术简介&#34;&gt;1. 技术简介&lt;/h1&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;WebRTC&lt;/code&gt;: WebRTC，名称源自&lt;code&gt;网页即时通信&lt;/code&gt;（英语：Web Real-Time Communication）的缩写，是一个支持网页浏览器进行实时语音对话或视频对话的API。它于2011年6月1日开源并在Google、Mozilla、Opera支持下被纳入万维网联盟的W3C推荐标准&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;SIP&lt;/code&gt;: &lt;code&gt;会话发起协议&lt;/code&gt;（Session Initiation Protocol，缩写SIP）是一个由IETF MMUSIC工作组开发的协议，作为标准被提议用于创建，修改和终止包括视频，语音，即时通信，在线游戏和虚拟现实等多种多媒体元素在内的交互式用户会话。2000年11月，SIP被正式批准成为3GPP信号协议之一，并成为IMS体系结构的一个永久单元。SIP与H.323一样，是用于VoIP最主要的信令协议之一。&lt;/li&gt;
&lt;/ul&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://wdd.js.org/img/images/20180211144604_Zdxh2x_Screenshot.jpeg&#34;&gt;&lt;/p&gt;
&lt;p&gt;一般来说，要么使用实体话机，要么在系统上安装基于sip的客户端程序。实体话机硬件成本高，基于sip的客户端往往兼容性差，无法跨平台，易被杀毒软件查杀。&lt;/p&gt;
&lt;p&gt;而&lt;code&gt;WebRTC&lt;/code&gt;或许是更好的解决方案，只要一个浏览器就可以实时语音视频通话，这是很不错的解决方案。WebSocket可以用来传递sip信令，而WebRTC用来实时传输语音视频流。&lt;/p&gt;
&lt;h1 id=&#34;2-前端webrtc实现方案&#34;&gt;2. 前端WebRTC实现方案&lt;/h1&gt;
&lt;p&gt;其实我们不需要去自己处理WebRTC的相关方法，或者去处理视频或者媒体流。市面上已经有不错的模块可供选择。&lt;/p&gt;
&lt;h2 id=&#34;21-jssip&#34;&gt;2.1 &lt;a href=&#34;http://jssip.net/&#34;&gt;jsSIP&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;jsSIP是JavaScript SIP 库&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img loading=&#34;lazy&#34; src=&#34;https://wdd.js.org/img/images/20180211144616_7c5Pf0_Screenshot.jpeg&#34;&gt;&lt;/p&gt;
&lt;p&gt;功能特点如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;可以在浏览器或者Nodejs中运行&lt;/li&gt;
&lt;li&gt;使用WebSocket传递SIP协议&lt;/li&gt;
&lt;li&gt;视频音频实时消息使用WebRTC&lt;/li&gt;
&lt;li&gt;非常轻量&lt;/li&gt;
&lt;li&gt;100%纯JavaScript&lt;/li&gt;
&lt;li&gt;使用简单并且具有强大的Api&lt;/li&gt;
&lt;li&gt;服务端支持 OverSIP, Kamailio, Asterisk, OfficeSIP，reSIProcate，Frafos ABC SBC，TekSIP&lt;/li&gt;
&lt;li&gt;是RFC 7118 and OverSIP的作者写的&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;下面是使用JsSIP打电话的例子，非常简单吧&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// Create our JsSIP instance and run it:

var socket = new JsSIP.WebSocketInterface(&amp;#39;wss://sip.myhost.com&amp;#39;);
var configuration = {
  sockets  : [ socket ],
  uri      : &amp;#39;sip:alice@example.com&amp;#39;,
  password : &amp;#39;superpassword&amp;#39;
};

var ua = new JsSIP.UA(configuration);

ua.start();

// Register callbacks to desired call events
var eventHandlers = {
  &amp;#39;progress&amp;#39;: function(e) {
    console.log(&amp;#39;call is in progress&amp;#39;);
  },
  &amp;#39;failed&amp;#39;: function(e) {
    console.log(&amp;#39;call failed with cause: &amp;#39;+ e.data.cause);
  },
  &amp;#39;ended&amp;#39;: function(e) {
    console.log(&amp;#39;call ended with cause: &amp;#39;+ e.data.cause);
  },
  &amp;#39;confirmed&amp;#39;: function(e) {
    console.log(&amp;#39;call confirmed&amp;#39;);
  }
};

var options = {
  &amp;#39;eventHandlers&amp;#39;    : eventHandlers,
  &amp;#39;mediaConstraints&amp;#39; : { &amp;#39;audio&amp;#39;: true, &amp;#39;video&amp;#39;: true }
};

var session = ua.call(&amp;#39;sip:bob@example.com&amp;#39;, options);
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;22-sipjs&#34;&gt;2.2 &lt;a href=&#34;https://sipjs.com/&#34;&gt;SIP.js&lt;/a&gt;&lt;/h2&gt;
&lt;p&gt;sip.js项目实际是fork自jsSIP的，这里主要介绍它的服务端支持情况。其他接口自己自行查阅&lt;/p&gt;</description>
    </item>
  </channel>
</rss>
