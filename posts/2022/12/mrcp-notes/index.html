<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>MRCPv2 协议学习 | 洞香春</title><meta name=keywords content="mrcp,rfc"><meta name=description content="简介 MRCPv2 是Media Resource Control Protocol Version 2的缩写 MRCP 允许客户端去操作服务端的媒体资源处理 MRCP 的常见功能如下 文本转语音 语音识别 说话人识别 语音认证 等等 MRCP 并不是一个独立的协议，而是依赖于其他的协议，如 SIP/SDP MRCPv2 RFC 发表于 2012 年 MRCPv2 主要由思科,Nuance,Speechworks 开发 MRCPv2 是基于 MRCPv1 开发的 MRCPv2 不兼容 MRCPv1 MRCPv2 在传输层使用 TCP 或者 TLS 定义 媒体资源： An entity on the speech processing server that can be controlled through MRCPv2. MRCP 服务器： Aggregate of one or more &ldquo;Media Resource&rdquo; entities on a server, exposed through MRCPv2."><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/posts/2022/12/mrcp-notes/><link crossorigin=anonymous href=/assets/css/stylesheet.6d3944e058d85363bbe8a792a9b5f40002bca80be859dc19c466dd8de223973e.css integrity="sha256-bTlE4FjYU2O76KeSqbX0AAK8qAvoWdwZxGbdjeIjlz4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="MRCPv2 协议学习"><meta property="og:description" content="简介 MRCPv2 是Media Resource Control Protocol Version 2的缩写 MRCP 允许客户端去操作服务端的媒体资源处理 MRCP 的常见功能如下 文本转语音 语音识别 说话人识别 语音认证 等等 MRCP 并不是一个独立的协议，而是依赖于其他的协议，如 SIP/SDP MRCPv2 RFC 发表于 2012 年 MRCPv2 主要由思科,Nuance,Speechworks 开发 MRCPv2 是基于 MRCPv1 开发的 MRCPv2 不兼容 MRCPv1 MRCPv2 在传输层使用 TCP 或者 TLS 定义 媒体资源： An entity on the speech processing server that can be controlled through MRCPv2. MRCP 服务器： Aggregate of one or more &ldquo;Media Resource&rdquo; entities on a server, exposed through MRCPv2."><meta property="og:type" content="article"><meta property="og:url" content="https://wdd.js.org/posts/2022/12/mrcp-notes/"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-12-01T10:08:38+08:00"><meta property="article:modified_time" content="2022-12-01T10:08:38+08:00"><meta property="og:site_name" content="洞香春"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="MRCPv2 协议学习"><meta name=twitter:description content="简介 MRCPv2 是Media Resource Control Protocol Version 2的缩写 MRCP 允许客户端去操作服务端的媒体资源处理 MRCP 的常见功能如下 文本转语音 语音识别 说话人识别 语音认证 等等 MRCP 并不是一个独立的协议，而是依赖于其他的协议，如 SIP/SDP MRCPv2 RFC 发表于 2012 年 MRCPv2 主要由思科,Nuance,Speechworks 开发 MRCPv2 是基于 MRCPv1 开发的 MRCPv2 不兼容 MRCPv1 MRCPv2 在传输层使用 TCP 或者 TLS 定义 媒体资源： An entity on the speech processing server that can be controlled through MRCPv2. MRCP 服务器： Aggregate of one or more &ldquo;Media Resource&rdquo; entities on a server, exposed through MRCPv2."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://wdd.js.org/posts/"},{"@type":"ListItem","position":3,"name":"MRCPv2 协议学习","item":"https://wdd.js.org/posts/2022/12/mrcp-notes/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"MRCPv2 协议学习","name":"MRCPv2 协议学习","description":"简介 MRCPv2 是Media Resource Control Protocol Version 2的缩写 MRCP 允许客户端去操作服务端的媒体资源处理 MRCP 的常见功能如下 文本转语音 语音识别 说话人识别 语音认证 等等 MRCP 并不是一个独立的协议，而是依赖于其他的协议，如 SIP/SDP MRCPv2 RFC 发表于 2012 年 MRCPv2 主要由思科,Nuance,Speechworks 开发 MRCPv2 是基于 MRCPv1 开发的 MRCPv2 不兼容 MRCPv1 MRCPv2 在传输层使用 TCP 或者 TLS 定义 媒体资源： An entity on the speech processing server that can be controlled through MRCPv2. MRCP 服务器： Aggregate of one or more \u0026ldquo;Media Resource\u0026rdquo; entities on a server, exposed through MRCPv2.","keywords":["mrcp","rfc"],"articleBody":"简介 MRCPv2 是Media Resource Control Protocol Version 2的缩写 MRCP 允许客户端去操作服务端的媒体资源处理 MRCP 的常见功能如下 文本转语音 语音识别 说话人识别 语音认证 等等 MRCP 并不是一个独立的协议，而是依赖于其他的协议，如 SIP/SDP MRCPv2 RFC 发表于 2012 年 MRCPv2 主要由思科,Nuance,Speechworks 开发 MRCPv2 是基于 MRCPv1 开发的 MRCPv2 不兼容 MRCPv1 MRCPv2 在传输层使用 TCP 或者 TLS 定义 媒体资源： An entity on the speech processing server that can be controlled through MRCPv2. MRCP 服务器： Aggregate of one or more “Media Resource” entities on a server, exposed through MRCPv2. Often, ‘server’ in this document refers to an MRCP server. MRCP 客户端: An entity controlling one or more Media Resources through MRCPv2 (“Client” for short). DTMF: Dual-Tone Multi-Frequency; a method of transmitting key presses in-band, either as actual tones (Q.23 [Q.23]) or as named tone events (RFC 4733 [RFC4733]). Endpointing: The process of automatically detecting the beginning and end of speech in an audio stream. This is critical both for speech recognition and for automated recording as one would find in voice mail systems. Hotword Mode: A mode of speech recognition where a stream of utterances is evaluated for match against a small set of command words. This is generally employed either to trigger some action or to control the subsequent grammar to be used for further recognition. 架构 客户端使用SIP/SDP建立MRCP控制通道 SIP使用SDP的offer/answer模型来描述MRCP通道的参数 服务端在answer SDP中提供唯一的通道ID和服务端TCP端口号 客户端可以开启一个新的TCP链接，多个MRCP通道也可以共享一个TCP链接 管理资源控制通道 This “m=” line MUST have a media type field of “application” transport type field of either “TCP/MRCPv2” or “TCP/TLS/MRCPv2” The port number field of the “m=” line MUST contain the “discard” port of the transport protocol (port 9 for TCP) in the SDP offer from the client MUST contain the TCP listen port on the server in the SDP answer MRCPv2 servers MUST NOT assume any relationship between resources using the same port other than the sharing of the communication channel. To remain backwards compatible with conventional SDP usage, the format field of the “m=” line MUST have the arbitrarily selected value of “1”. The a=connection attribute MUST have a value of “new” on the very first control “m=” line offer from the client to an MRCPv2 server Subsequent control “m=” line offers from the client to the MRCP server MAY contain “new” or “existing”, depending on whether the client wants to set up a new connection or share an existing connection When the client wants to deallocate the resource from this session, it issues a new SDP offer, according to RFC 3264 [RFC3264], where the control “m=” line port MUST be set to 0 When the client wants to tear down the whole session and all its resources, it MUST issue a SIP BYE request to close the SIP session. This will deallocate all the control channels and resources allocated under the session. MRCPv2 Session Termination If an MRCP client notices that the underlying connection has been closed for one of its MRCP channels, and it has not previously initiated a re-INVITE to close that channel, it MUST send a BYE to close down the SIP dialog and all other MRCP channels. If an MRCP server notices that the underlying connection has been closed for one of its MRCP channels, and it has not previously received and accepted a re-INVITE closing that channel, then it MUST send a BYE to close down the SIP dialog and all other MRCP channels.\nMRCP request request-line = mrcp-version SP message-length SP method-name SP request-id CRLF request-id = 1*10DIGIT MRCP response response-line = mrcp-version SP message-length SP request-id SP status-code SP request-state CRLF status-code = 3DIGIT request-state = “COMPLETE” / “IN-PROGRESS” / “PENDING” event event-line = mrcp-version SP message-length SP event-name SP request-id SP request-state CRLF event-name = synthesizer-event / recognizer-event / recorder-event / verifier-event 参考 https://www.rfc-editor.org/rfc/rfc6787 ","wordCount":"600","inLanguage":"en","datePublished":"2022-12-01T10:08:38+08:00","dateModified":"2022-12-01T10:08:38+08:00","author":{"@type":"Person","name":"Eddie Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/posts/2022/12/mrcp-notes/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/books/ title=读书><span>读书</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/fe/ title=前端><span>前端</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/posts/>Posts</a></div><h1 class=post-title>MRCPv2 协议学习</h1><div class=post-meta><span title='2022-12-01 10:08:38 +0800 CST'>2022-12-01 10:08:38</span>&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Eddie Wang&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2022/12/mrcp-notes/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=简介>简介</a></li><li><a href=#%e5%ae%9a%e4%b9%89 aria-label=定义>定义</a></li><li><a href=#%e6%9e%b6%e6%9e%84 aria-label=架构>架构</a></li><li><a href=#%e7%ae%a1%e7%90%86%e8%b5%84%e6%ba%90%e6%8e%a7%e5%88%b6%e9%80%9a%e9%81%93 aria-label=管理资源控制通道>管理资源控制通道</a></li><li><a href=#mrcpv2-session-termination aria-label="MRCPv2 Session Termination">MRCPv2 Session Termination</a></li><li><a href=#mrcp-request aria-label="MRCP request">MRCP request</a></li><li><a href=#mrcp-response aria-label="MRCP response">MRCP response</a></li><li><a href=#event aria-label=event>event</a></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=简介>简介<a hidden class=anchor aria-hidden=true href=#简介>#</a></h1><ul><li>MRCPv2 是<code>Media Resource Control Protocol Version 2</code>的缩写</li><li>MRCP 允许客户端去操作服务端的媒体资源处理</li><li>MRCP 的常见功能如下<ul><li>文本转语音</li><li>语音识别</li><li>说话人识别</li><li>语音认证</li><li>等等</li></ul></li><li>MRCP 并不是一个独立的协议，而是依赖于其他的协议，如 SIP/SDP</li><li>MRCPv2 RFC 发表于 2012 年</li><li>MRCPv2 主要由思科,Nuance,Speechworks 开发</li><li>MRCPv2 是基于 MRCPv1 开发的</li><li>MRCPv2 不兼容 MRCPv1</li><li>MRCPv2 在传输层使用 TCP 或者 TLS</li></ul><h1 id=定义>定义<a hidden class=anchor aria-hidden=true href=#定义>#</a></h1><ul><li>媒体资源： An entity on the speech processing server that can be controlled through MRCPv2.</li><li>MRCP 服务器： Aggregate of one or more &ldquo;Media Resource&rdquo; entities on a server, exposed through MRCPv2. Often, &lsquo;server&rsquo; in this document refers to an MRCP server.</li><li>MRCP 客户端: An entity controlling one or more Media Resources through MRCPv2 (&ldquo;Client&rdquo; for short).</li><li>DTMF: Dual-Tone Multi-Frequency; a method of transmitting key presses in-band, either as actual tones (Q.23 [Q.23]) or as named tone events (RFC 4733 [RFC4733]).</li><li>Endpointing: The process of automatically detecting the beginning and end of speech in an audio stream. This is critical both for speech recognition and for automated recording as one would find in voice mail systems.</li><li>Hotword Mode: A mode of speech recognition where a stream of utterances is evaluated for match against a small set of command words. This is generally employed either to trigger some action or to control the subsequent grammar to be used for further recognition.</li></ul><h1 id=架构>架构<a hidden class=anchor aria-hidden=true href=#架构>#</a></h1><ul><li>客户端使用SIP/SDP建立MRCP控制通道</li><li>SIP使用SDP的offer/answer模型来描述MRCP通道的参数</li><li>服务端在answer SDP中提供唯一的通道ID和服务端TCP端口号</li><li>客户端可以开启一个新的TCP链接，多个MRCP通道也可以共享一个TCP链接</li></ul><p><img loading=lazy src=2022-12-01-11-49-00.png alt></p><h1 id=管理资源控制通道>管理资源控制通道<a hidden class=anchor aria-hidden=true href=#管理资源控制通道>#</a></h1><ul><li>This &ldquo;m=&rdquo; line MUST have a media type field of &ldquo;application&rdquo;</li><li>transport type field of either &ldquo;TCP/MRCPv2&rdquo; or &ldquo;TCP/TLS/MRCPv2&rdquo;</li><li>The port number field of the &ldquo;m=&rdquo; line MUST contain the &ldquo;discard&rdquo; port of the transport protocol (port 9 for TCP) in the SDP offer from the client</li><li>MUST contain the TCP listen port on the server in the SDP answer</li><li>MRCPv2 servers MUST NOT assume any relationship between resources using the same port other than the sharing of the communication channel.</li><li>To remain backwards compatible with conventional SDP usage, the format field of the &ldquo;m=&rdquo; line MUST have the arbitrarily selected value of &ldquo;1&rdquo;.</li><li>The a=connection attribute MUST have a value of &ldquo;new&rdquo; on the very first control &ldquo;m=&rdquo; line offer from the client to an MRCPv2 server</li><li>Subsequent control &ldquo;m=&rdquo; line offers from the client to the MRCP server MAY contain &ldquo;new&rdquo; or &ldquo;existing&rdquo;, depending on whether the client wants to set up a new connection or share an existing connection</li><li>When the client wants to deallocate the resource from this session, it issues a new SDP offer, according to RFC 3264 [RFC3264], where the control &ldquo;m=&rdquo; line port MUST be set to 0</li><li>When the client wants to tear down the whole session and all its resources, it MUST issue a SIP BYE request to close the SIP session.
This will deallocate all the control channels and resources allocated under the session.</li></ul><h1 id=mrcpv2-session-termination>MRCPv2 Session Termination<a hidden class=anchor aria-hidden=true href=#mrcpv2-session-termination>#</a></h1><p>If an MRCP client notices that the underlying connection has been
closed for one of its MRCP channels, and it has not previously
initiated a re-INVITE to close that channel, it MUST send a BYE to
close down the SIP dialog and all other MRCP channels. If an MRCP
server notices that the underlying connection has been closed for one
of its MRCP channels, and it has not previously received and accepted
a re-INVITE closing that channel, then it MUST send a BYE to close
down the SIP dialog and all other MRCP channels.</p><h1 id=mrcp-request>MRCP request<a hidden class=anchor aria-hidden=true href=#mrcp-request>#</a></h1><pre tabindex=0><code>request-line   =    mrcp-version SP message-length SP method-name
                       SP request-id CRLF
</code></pre><ul><li>request-id = 1*10DIGIT</li></ul><h1 id=mrcp-response>MRCP response<a hidden class=anchor aria-hidden=true href=#mrcp-response>#</a></h1><pre tabindex=0><code>response-line  =    mrcp-version SP message-length SP request-id
                       SP status-code SP request-state CRLF
</code></pre><ul><li>status-code = 3DIGIT</li><li>request-state = &ldquo;COMPLETE&rdquo;
/ &ldquo;IN-PROGRESS&rdquo;
/ &ldquo;PENDING&rdquo;</li></ul><h1 id=event>event<a hidden class=anchor aria-hidden=true href=#event>#</a></h1><pre tabindex=0><code>event-line       =  mrcp-version SP message-length SP event-name
                       SP request-id SP request-state CRLF
</code></pre><ul><li>event-name = synthesizer-event
/ recognizer-event
/ recorder-event
/ verifier-event</li></ul><h1 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h1><ul><li><a href=https://www.rfc-editor.org/rfc/rfc6787>https://www.rfc-editor.org/rfc/rfc6787</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://wdd.js.org/tags/mrcp/>mrcp</a></li><li><a href=https://wdd.js.org/tags/rfc/>rfc</a></li></ul><nav class=paginav><a class=prev href=https://wdd.js.org/posts/2022/12/xian-travel/><span class=title>« Prev</span><br><span>西安之旅 不仅有羊肉泡馍 也有长恨歌</span></a>
<a class=next href=https://wdd.js.org/git/clean-all-history/><span class=title>Next »</span><br><span>清除所有GIT历史记录</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=wangduanduan/wangduanduan.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxMTkyMjMyNjA=" data-category=Announcements data-category-id=DIC_kwDOBxsz3M4CAjBq data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://wdd.js.org>洞香春</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>