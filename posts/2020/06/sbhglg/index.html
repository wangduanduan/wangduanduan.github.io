<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[未完成] WebSocket调研 | 洞香春</title><meta name=keywords content><meta name=description content="调研目的 在异常情况下，网络断开对WebSocket的影响 测试代码 测试代码没有心跳机制 心跳机制并不包含在WebSocket协议内部 var ws = new WebSocket('wss://echo.websocket.org/') ws.onopen =function(e){ console.log('onopen') } ws.onerror = function (e) { console.log('onerror: ' + e.code) console.log(e) } ws.onclose = function (e) { console.log('onclose: ' + e.code) console.log(e) } 场景1: 断网后，是否会立即触发onerror, 或者onclose事件？ 答案：不会立即触发
测试代码中没有心跳机制，断网后，并不会立即触发onerror或者onclose的回调函数。
个人测试的情况
及其 测试场景 Macbook pro chrome 83.0.4103.106 每隔10秒发送一次消息的情况下，40秒后出发onclose事件 Macbook pro chrome 83.0.4103.106 一直不发送消息，一直就不回出发onclose事件 Macbook pro chrome 83.0.4103.106 发出一个消息后？ 场景2: 断网后，使用send()发送数据，回触发事件吗？ 为什么无法准确拿到断开原因？ WebSocket关闭事件中有三个属性
code 断开原因码 reason 具体原因 wasClean 是否是正常断开 官方文档上，code字段有很多个值。但是大多数情况下，要么拿到的值是undefined, 要么是1006，基本上没有其他情况。"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/posts/2020/06/sbhglg/><link crossorigin=anonymous href=/assets/css/stylesheet.6d3944e058d85363bbe8a792a9b5f40002bca80be859dc19c466dd8de223973e.css integrity="sha256-bTlE4FjYU2O76KeSqbX0AAK8qAvoWdwZxGbdjeIjlz4=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:title" content="[未完成] WebSocket调研"><meta property="og:description" content="调研目的 在异常情况下，网络断开对WebSocket的影响 测试代码 测试代码没有心跳机制 心跳机制并不包含在WebSocket协议内部 var ws = new WebSocket('wss://echo.websocket.org/') ws.onopen =function(e){ console.log('onopen') } ws.onerror = function (e) { console.log('onerror: ' + e.code) console.log(e) } ws.onclose = function (e) { console.log('onclose: ' + e.code) console.log(e) } 场景1: 断网后，是否会立即触发onerror, 或者onclose事件？ 答案：不会立即触发
测试代码中没有心跳机制，断网后，并不会立即触发onerror或者onclose的回调函数。
个人测试的情况
及其 测试场景 Macbook pro chrome 83.0.4103.106 每隔10秒发送一次消息的情况下，40秒后出发onclose事件 Macbook pro chrome 83.0.4103.106 一直不发送消息，一直就不回出发onclose事件 Macbook pro chrome 83.0.4103.106 发出一个消息后？ 场景2: 断网后，使用send()发送数据，回触发事件吗？ 为什么无法准确拿到断开原因？ WebSocket关闭事件中有三个属性
code 断开原因码 reason 具体原因 wasClean 是否是正常断开 官方文档上，code字段有很多个值。但是大多数情况下，要么拿到的值是undefined, 要么是1006，基本上没有其他情况。"><meta property="og:type" content="article"><meta property="og:url" content="https://wdd.js.org/posts/2020/06/sbhglg/"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-06-24T11:09:02+08:00"><meta property="article:modified_time" content="2020-06-24T11:09:02+08:00"><meta property="og:site_name" content="洞香春"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[未完成] WebSocket调研"><meta name=twitter:description content="调研目的 在异常情况下，网络断开对WebSocket的影响 测试代码 测试代码没有心跳机制 心跳机制并不包含在WebSocket协议内部 var ws = new WebSocket('wss://echo.websocket.org/') ws.onopen =function(e){ console.log('onopen') } ws.onerror = function (e) { console.log('onerror: ' + e.code) console.log(e) } ws.onclose = function (e) { console.log('onclose: ' + e.code) console.log(e) } 场景1: 断网后，是否会立即触发onerror, 或者onclose事件？ 答案：不会立即触发
测试代码中没有心跳机制，断网后，并不会立即触发onerror或者onclose的回调函数。
个人测试的情况
及其 测试场景 Macbook pro chrome 83.0.4103.106 每隔10秒发送一次消息的情况下，40秒后出发onclose事件 Macbook pro chrome 83.0.4103.106 一直不发送消息，一直就不回出发onclose事件 Macbook pro chrome 83.0.4103.106 发出一个消息后？ 场景2: 断网后，使用send()发送数据，回触发事件吗？ 为什么无法准确拿到断开原因？ WebSocket关闭事件中有三个属性
code 断开原因码 reason 具体原因 wasClean 是否是正常断开 官方文档上，code字段有很多个值。但是大多数情况下，要么拿到的值是undefined, 要么是1006，基本上没有其他情况。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"Posts","item":"https://wdd.js.org/posts/"},{"@type":"ListItem","position":3,"name":"[未完成] WebSocket调研","item":"https://wdd.js.org/posts/2020/06/sbhglg/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[未完成] WebSocket调研","name":"[未完成] WebSocket调研","description":"调研目的 在异常情况下，网络断开对WebSocket的影响 测试代码 测试代码没有心跳机制 心跳机制并不包含在WebSocket协议内部 var ws = new WebSocket(\u0026#39;wss://echo.websocket.org/\u0026#39;) ws.onopen =function(e){ console.log(\u0026#39;onopen\u0026#39;) } ws.onerror = function (e) { console.log(\u0026#39;onerror: \u0026#39; + e.code) console.log(e) } ws.onclose = function (e) { console.log(\u0026#39;onclose: \u0026#39; + e.code) console.log(e) } 场景1: 断网后，是否会立即触发onerror, 或者onclose事件？ 答案：不会立即触发\n测试代码中没有心跳机制，断网后，并不会立即触发onerror或者onclose的回调函数。\n个人测试的情况\n及其 测试场景 Macbook pro chrome 83.0.4103.106 每隔10秒发送一次消息的情况下，40秒后出发onclose事件 Macbook pro chrome 83.0.4103.106 一直不发送消息，一直就不回出发onclose事件 Macbook pro chrome 83.0.4103.106 发出一个消息后？ 场景2: 断网后，使用send()发送数据，回触发事件吗？ 为什么无法准确拿到断开原因？ WebSocket关闭事件中有三个属性\ncode 断开原因码 reason 具体原因 wasClean 是否是正常断开 官方文档上，code字段有很多个值。但是大多数情况下，要么拿到的值是undefined, 要么是1006，基本上没有其他情况。","keywords":[],"articleBody":"调研目的 在异常情况下，网络断开对WebSocket的影响 测试代码 测试代码没有心跳机制 心跳机制并不包含在WebSocket协议内部 var ws = new WebSocket('wss://echo.websocket.org/') ws.onopen =function(e){ console.log('onopen') } ws.onerror = function (e) { console.log('onerror: ' + e.code) console.log(e) } ws.onclose = function (e) { console.log('onclose: ' + e.code) console.log(e) } 场景1: 断网后，是否会立即触发onerror, 或者onclose事件？ 答案：不会立即触发\n测试代码中没有心跳机制，断网后，并不会立即触发onerror或者onclose的回调函数。\n个人测试的情况\n及其 测试场景 Macbook pro chrome 83.0.4103.106 每隔10秒发送一次消息的情况下，40秒后出发onclose事件 Macbook pro chrome 83.0.4103.106 一直不发送消息，一直就不回出发onclose事件 Macbook pro chrome 83.0.4103.106 发出一个消息后？ 场景2: 断网后，使用send()发送数据，回触发事件吗？ 为什么无法准确拿到断开原因？ WebSocket关闭事件中有三个属性\ncode 断开原因码 reason 具体原因 wasClean 是否是正常断开 官方文档上，code字段有很多个值。但是大多数情况下，要么拿到的值是undefined, 要么是1006，基本上没有其他情况。\n这并不是浏览器的bug, 这是浏览器故意这样做的。在w3c的官方文档上给出的原因其实是处于安全的考虑。\n试想一下，如果把断开原因给出的非常具体。那么一个恶意的js脚本就有可能做端口扫描或则恶意的注入。\nUser agents must not convey any failure information to scripts in a way that would allow a script to distinguish the following situations:\nA server whose host name could not be resolved.\nA server to which packets could not successfully be routed.\nA server that refused the connection on the specified port.\nA server that failed to correctly perform a TLS handshake (e.g., the server certificate can’t be verified).\nA server that did not complete the opening handshake (e.g. because it was not a WebSocket server).\nA WebSocket server that sent a correct opening handshake, but that specified options that caused the client to drop the connection (e.g. the server specified a subprotocol that the client did not offer).\nA WebSocket server that abruptly closed the connection after successfully completing the opening handshake.\nIn all of these cases, the the WebSocket connection close code would be 1006, as required by the WebSocket Protocol specification. [WSP]\nAllowing a script to distinguish these cases would allow a script to probe the user’s local network in preparation for an attack. https://www.w3.org/TR/websockets/%23concept-websocket-close-fail\n","wordCount":"252","inLanguage":"en","datePublished":"2020-06-24T11:09:02+08:00","dateModified":"2020-06-24T11:09:02+08:00","author":{"@type":"Person","name":"Eddie Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/posts/2020/06/sbhglg/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/fe/ title=Frontend><span>Frontend</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/container/ title=k8s/docker><span>k8s/docker</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/shell/ title=Shell><span>Shell</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/posts/>Posts</a></div><h1 class=post-title>[未完成] WebSocket调研</h1><div class=post-meta><span title='2020-06-24 11:09:02 +0800 CST'>2020-06-24 11:09:02</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Eddie Wang&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2020/06/sbhglg/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e8%b0%83%e7%a0%94%e7%9b%ae%e7%9a%84 aria-label=调研目的>调研目的</a></li><li><a href=#%e6%b5%8b%e8%af%95%e4%bb%a3%e7%a0%81 aria-label=测试代码>测试代码</a></li><li><a href=#%e5%9c%ba%e6%99%af1-%e6%96%ad%e7%bd%91%e5%90%8e%e6%98%af%e5%90%a6%e4%bc%9a%e7%ab%8b%e5%8d%b3%e8%a7%a6%e5%8f%91onerror-%e6%88%96%e8%80%85onclose%e4%ba%8b%e4%bb%b6 aria-label="场景1: 断网后，是否会立即触发onerror, 或者onclose事件？">场景1: 断网后，是否会立即触发onerror, 或者onclose事件？</a></li><li><a href=#%e5%9c%ba%e6%99%af2-%e6%96%ad%e7%bd%91%e5%90%8e%e4%bd%bf%e7%94%a8send%e5%8f%91%e9%80%81%e6%95%b0%e6%8d%ae%e5%9b%9e%e8%a7%a6%e5%8f%91%e4%ba%8b%e4%bb%b6%e5%90%97 aria-label="场景2: 断网后，使用send()发送数据，回触发事件吗？">场景2: 断网后，使用send()发送数据，回触发事件吗？</a></li><li><a href=#%e4%b8%ba%e4%bb%80%e4%b9%88%e6%97%a0%e6%b3%95%e5%87%86%e7%a1%ae%e6%8b%bf%e5%88%b0%e6%96%ad%e5%bc%80%e5%8e%9f%e5%9b%a0 aria-label=为什么无法准确拿到断开原因？>为什么无法准确拿到断开原因？</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=调研目的>调研目的<a hidden class=anchor aria-hidden=true href=#调研目的>#</a></h1><ul><li>在异常情况下，网络断开对WebSocket的影响</li></ul><h1 id=测试代码>测试代码<a hidden class=anchor aria-hidden=true href=#测试代码>#</a></h1><ul><li>测试代码没有心跳机制</li><li>心跳机制并不包含在WebSocket协议内部</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>var ws <span style=color:#f92672>=</span> new WebSocket<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;wss://echo.websocket.org/&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ws.onopen <span style=color:#f92672>=</span><span style=color:#66d9ef>function</span><span style=color:#f92672>(</span>e<span style=color:#f92672>){</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    console.log<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;onopen&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ws.onerror <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> <span style=color:#f92672>(</span>e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  console.log<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;onerror: &#39;</span> + e.code<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  console.log<span style=color:#f92672>(</span>e<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>ws.onclose <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span> <span style=color:#f92672>(</span>e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  console.log<span style=color:#f92672>(</span><span style=color:#e6db74>&#39;onclose: &#39;</span> + e.code<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  console.log<span style=color:#f92672>(</span>e<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><h1 id=场景1-断网后是否会立即触发onerror-或者onclose事件>场景1: 断网后，是否会立即触发onerror, 或者onclose事件？<a hidden class=anchor aria-hidden=true href=#场景1-断网后是否会立即触发onerror-或者onclose事件>#</a></h1><p><strong>答案</strong>：不会立即触发</p><p>测试代码中没有心跳机制，断网后，并不会立即触发onerror或者onclose的回调函数。</p><p>个人测试的情况</p><table><thead><tr><th>及其</th><th>测试场景</th></tr></thead><tbody><tr><td>Macbook pro chrome 83.0.4103.106</td><td>每隔10秒发送一次消息的情况下，40秒后出发onclose事件</td></tr><tr><td>Macbook pro chrome 83.0.4103.106</td><td>一直不发送消息，一直就不回出发onclose事件</td></tr><tr><td>Macbook pro chrome 83.0.4103.106</td><td>发出一个消息后？</td></tr></tbody></table><h1 id=场景2-断网后使用send发送数据回触发事件吗>场景2: 断网后，使用send()发送数据，回触发事件吗？<a hidden class=anchor aria-hidden=true href=#场景2-断网后使用send发送数据回触发事件吗>#</a></h1><h1 id=为什么无法准确拿到断开原因>为什么无法准确拿到断开原因？<a hidden class=anchor aria-hidden=true href=#为什么无法准确拿到断开原因>#</a></h1><p>WebSocket关闭事件中有三个属性</p><ul><li>code 断开原因码</li><li>reason 具体原因</li><li>wasClean 是否是正常断开</li></ul><p>官方文档上，code字段有很多个值。但是大多数情况下，要么拿到的值是undefined, 要么是1006，基本上没有其他情况。</p><p>这并不是浏览器的bug, 这是浏览器故意这样做的。在w3c的官方文档上给出的原因其实是处于安全的考虑。</p><p>试想一下，如果把断开原因给出的非常具体。那么一个恶意的js脚本就有可能做端口扫描或则恶意的注入。</p><blockquote><p>User agents must not convey any failure information to scripts in a way that would allow a script to distinguish the following situations:</p><p>A server whose host name could not be resolved.</p></blockquote><blockquote><p>A server to which packets could not successfully be routed.</p></blockquote><blockquote><p>A server that refused the connection on the specified port.</p></blockquote><blockquote><p>A server that failed to correctly perform a TLS handshake (e.g., the server certificate can&rsquo;t be verified).</p></blockquote><blockquote><p>A server that did not complete the opening handshake (e.g. because it was not a WebSocket server).</p></blockquote><blockquote><p>A WebSocket server that sent a correct opening handshake, but that specified options that caused the client to drop the connection (e.g. the server specified a subprotocol that the client did not offer).</p></blockquote><blockquote><p>A WebSocket server that abruptly closed the connection after successfully completing the opening handshake.</p></blockquote><blockquote><p>In all of these cases, the the WebSocket connection close code would be 1006, as required by the WebSocket Protocol specification. [WSP]</p></blockquote><blockquote></blockquote><blockquote><p>Allowing a script to distinguish these cases would allow a script to probe the user&rsquo;s local network in preparation for an attack. <a href=https://www.w3.org/TR/websockets/%23concept-websocket-close-fail>https://www.w3.org/TR/websockets/%23concept-websocket-close-fail</a></p></blockquote></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://wdd.js.org/posts/2020/06/rlmqq8/><span class=title>« Prev</span><br><span>生产环境nginx配置</span></a>
<a class=next href=https://wdd.js.org/posts/2020/06/qtdzvr/><span class=title>Next »</span><br><span>fping 网络状态监控测试</span></a></nav></footer><script src=https://giscus.app/client.js data-repo=wangduanduan/wangduanduan.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxMTkyMjMyNjA=" data-category=Announcements data-category-id=DIC_kwDOBxsz3M4CAjBq data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2024 <a href=https://wdd.js.org>洞香春</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>