<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | æ´é¦™æ˜¥</title><meta name=keywords content><meta name=description content="Posts - æ´é¦™æ˜¥"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.a2acda249b8eac62938bb2d2f1c562c5f74d5728640d2a1a7d6aeaec5c50ef24.css integrity="sha256-oqzaJJuOrGKTi7LS8cVixfdNVyhkDSoafWrq7FxQ7yQ=" rel="preload stylesheet" as=style><link rel=icon href=https://wdd.js.org/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/favicon.ico><link rel=apple-touch-icon href=https://wdd.js.org/favicon.ico><link rel=mask-icon href=https://wdd.js.org/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wdd.js.org/posts/index.xml title=rss><link rel=alternate hreflang=en href=https://wdd.js.org/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/firacode@6.2.0/distr/fira_code.css><style>body{font-family:-apple-system,BlinkMacSystemFont,segoe ui,Roboto,helvetica neue,Arial,noto sans,sans-serif,apple color emoji,segoe ui emoji;font-size:16px;line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}h1,h2,h3,h4,h5,h6{font-weight:600;letter-spacing:-.02em}code,pre{font-family:fira code,jetbrains mono,Consolas,monospace;font-variant-ligatures:normal;font-size:.95em}</style><meta property="og:url" content="https://wdd.js.org/posts/"><meta property="og:site_name" content="æ´é¦™æ˜¥"><meta property="og:title" content="Posts"><meta property="og:description" content="Eddie Wangçš„ä¸ªäººåšå®¢"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="Eddie Wangçš„ä¸ªäººåšå®¢"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://wdd.js.org/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org/ accesskey=h title="æ´é¦™æ˜¥ (Alt + H)"><img src=https://wdd.js.org/favicon.ico alt aria-label=logo height=35>æ´é¦™æ˜¥</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/books/ title=è¯»ä¹¦><span>è¯»ä¹¦</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/fe/ title=å‰ç«¯><span>å‰ç«¯</span></a></li><li><a href=https://wdd.js.org/search/ title=æœç´¢><span>æœç´¢</span></a></li><li><a href=https://wdd.js.org/tags/ title=æ ‡ç­¾><span>æ ‡ç­¾</span></a></li><li><a href=https://wdd.js.org/archives/ title=å½’æ¡£><span>å½’æ¡£</span></a></li><li><a href=https://wdd.js.org/about/ title=æˆ‘><span>æˆ‘</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://wdd.js.org/>Home</a></div><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>ä»£ç å¢è‚¥èµ‹</h2></header><div class=entry-content><p>å¤§å­¦ï¼Œç¼–ç¨‹ä¹‹å¸ˆä½œä¸šï¼Œæ›°ï¼šxxxåŠŸèƒ½ï¼Œè‡³å°‘ä»£ç ä¸‰åƒè¡Œã€‚
å®¤å‹å‘•å¿ƒæ²¥è¡€ï¼ŒåºŸå¯å¿˜é£Ÿï¼Œä¸œæ‹¼è¥¿å‡‘ã€‚å¥ˆä½•å‡‘åˆ°ä»£ç ä¸€åƒè¡Œã€‚
å‹ä¸é‡Šç„¶ï¼Œæ€æ€ä¸ä¹ã€‚æ±‚åŠ©äºæˆ‘ã€‚
äºå‘ŠçŸ¥æ›°ï¼šæ­¤äº‹æ˜“å°”ï¼ä½†éœ€å¯ä¹ä¸¤ç“¶ã€ç“œå­ä¸¤åŒ…ã€‚
å‹æ‚¦ä¹‹ï¼Œæ›°ï¼šè¯·ç¨ç­‰ï¼Œç‰‡åˆ»å›ã€‚
å‹å³å›ï¼Œä»£ç äº¦æˆã€‚
å‹é»¯ç„¶é“ï¼šå­ä¹‹åŠŸåŠ›ï¼Œæ— ä¸åŠä¹Ÿã€‚
äºç¬‘æ›°ï¼šæ— ä»–ï¼Œä½†æ‰‹ç†Ÿè€Œã€‚
å¤šåŠ æ³¨é‡Šå¤šæ¢è¡Œï¼Œä¸€ä¸ç•™ç¥ä¸‰åƒè¡Œã€‚
ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ˜‚ğŸ¤£ğŸ¤£ğŸ¤£ğŸ¤£ğŸ˜…ğŸ˜…ğŸ˜…ğŸ˜…</p></div><footer class=entry-footer><span title='2020-03-24 13:42:26 +0800 CST'>2020-03-24 13:42:26</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to ä»£ç å¢è‚¥èµ‹" href=https://wdd.js.org/posts/2020/03/wyeo4w/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>devicemap é©±åŠ¨æ¨¡å¼ä¿®æ”¹</h2></header><div class=entry-content><p></p></div><footer class=entry-footer><span title='2020-03-20 17:32:30 +0800 CST'>2020-03-20 17:32:30</span>&nbsp;Â·&nbsp;<span>0 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to devicemap  é©±åŠ¨æ¨¡å¼ä¿®æ”¹" href=https://wdd.js.org/posts/2020/03/eaikcr/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å‘½ä»¤è¡Œæ—¥å¿—æŸ¥çœ‹ç¥å™¨ï¼šlnav</h2></header><div class=entry-content><p>lnav, ä¸éœ€è¦æœåŠ¡ç«¯ï¼Œä¸éœ€è¦è®¾ç½®ï¼Œä»ç„¶åŠŸèƒ½å¼ºå¤§åˆ°æ²¡æœ‰æœ‹å‹ã€‚
é€Ÿåº¦ä¸æ€§èƒ½ lnavæ˜¯ä¸€ä¸ªå¯ä»¥è¿è¡Œåœ¨ç»ˆç«¯ä¸Šçš„æ—¥å¿—åˆ†æå·¥å…·ã€‚åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¦‚æœgrepå’Œtailç­‰å‘½ä»¤æ— æ³•æ»¡è¶³ä½ çš„éœ€æ±‚ï¼Œæˆ–è®¸ä½ å¯ä»¥å°è¯•ä¸€ä¸‹lnavã€‚
lnavçš„å®˜æ–¹ä»“åº“æ˜¯https://github.com/tstack/lnavï¼Œåœ¨macä¸Šå¯ä»¥ä½¿ç”¨ brew install lnavÂ å‘½ä»¤å®‰è£…è¿™ä¸ªå‘½ä»¤ã€‚
åœ¨æˆ‘çš„4C8Gçš„Macbook Proä¸Šï¼Œæ‰“å¼€ä¸€ä¸ª2.8Gçš„æ—¥å¿—æ–‡ä»¶åˆ°æ¸²æŸ“å‡ºç°ï¼Œéœ€è¦èŠ±è´¹çº¦40sï¼Œå¹³å‡æ¯ç§’è½½å…¥è¶…è¿‡70MBã€‚è½½å…¥æ—¥å¿—å’Œæ¸²æŸ“æ—¶ï¼Œä½¿ç”¨äº†æ¥è¿‘100%çš„CPUã€‚æ¸²æŸ“å®Œæ¯•ï¼Œä½¿ç”¨1.2Gçš„å†…å­˜ç©ºé—´ã€‚
æ€»ä¹‹å‘¢ï¼Œè¿™ä¸ªå·¥å…·è½½å…¥æ—¥å¿—çš„é€Ÿåº¦å¾ˆå¿«ã€‚ä½†æ˜¯æœ€å¥½ä¸è¦å†ç”Ÿäº§ç¯å¢ƒä¸Šä½¿ç”¨è¿™ä¸ªå‘½ä»¤è½½å…¥è¿‡å¤§çš„æ—¥å¿—æ–‡ä»¶ï¼Œå¦åˆ™å¯èƒ½é€ æˆç³»ç»Ÿèµ„æºæ¶ˆè€—å¤ªå¤§çš„é—®é¢˜ã€‚
åœ¨è½½å…¥2.8Gçš„æ—¥å¿—æ–‡ä»¶å(3200å¤šä¸‡è¡Œ)ï¼Œè¿‡æ»¤æ—¶æ˜¾å¾—éå¸¸å¡é¡¿ï¼Œä½†æ˜¯æŸ¥çœ‹æ—¥å¿—å¹¶ä¸å¡é¡¿ã€‚
åœ¨lnavçš„æœç´¢å…³é”®å­—ï¼Œä¸‹æ¬¡æ‰“å¼€å…¶ä»–æ—¥å¿—æ—¶ï¼Œlnavä¼šè‡ªåŠ¨æœç´¢è¿™ä¸ªå…³é”®è¯ã€‚è¿™æ˜¯å®ƒçš„Sessionè®°å½•åŠŸèƒ½ï¼Œå¯ä»¥ä½¿ç”¨Ctrl+Ré‡ç½®Sessionã€‚
lnavçš„ç‰¹ç‚¹
è¯­æ³•é«˜äº® å„ç§è¿‡æ»¤æ¡ä»¶ å¤šå…³é”®è¯è¿‡æ»¤ å„ç§å¿«æ·è·³è½¬ è‡ªå¸¦ç»Ÿè®¡å’Œå¯è§†åŒ–åŠŸèƒ½ï¼Œæ¯”å¦‚ä½¿ç”¨æ¡å½¢å›¾å±•ç¤ºå•ä½æ—¶é—´å†…çš„æŠ¥é”™å’Œæ—¥å¿—æ•°é‡ è‡ªåŠ¨æ—¥å¿—æ ¼å¼æ£€æŸ¥ã€‚æ”¯æŒå¾ˆå¤šç§æ—¥å¿—æ ¼å¼ èƒ½å¤ŸæŒ‰ç…§æ—¶é—´å»è¿‡æ»¤æ—¥å¿— TABè‡ªåŠ¨è¡¥å…¨ å®æ—¶æ“ä½œ æ”¯æŒSQLè¯­æ³•æŸ¥æ—¥å¿— æ”¯æŒæ–‡ä»¶å¯¼å‡ºæˆå…¶ä»–æ ¼å¼ æ”¯æŒç›´æ¥æ‰“å¼€tar.gzç­‰å‹ç¼©åçš„æ—¥å¿—æ–‡ä»¶ æ”¯æŒå¾ˆå¤šå¿«æ·é”® xä¸‹é¢æ˜¯æŒ‰å¤©çš„æ—¥å¿—ç»Ÿè®¡ï¼Œç°è‰²æ˜¯æ™®é€šæ—¥å¿—ï¼Œé»„è‰²æ˜¯å‘Šè­¦æ—¥å¿—ï¼Œçº¢è‰²çš„é”™è¯¯æ—¥å¿—ã€‚ä¸‰ç§é¢œè‰²å åŠ çš„é•¿åº¦å°±æ˜¯æ€»æ—¥å¿—ã€‚æ—¶é—´è·¨åº¦å•ä½ä¹Ÿæ˜¯å¯ä»¥è°ƒèŠ‚çš„ã€‚æœ€å¤§è·¨åº¦æ˜¯ä¸€å¤©ï¼Œæœ€çŸ­è·¨åº¦æ˜¯1ç§’ã€‚
ä»ç„¶æ˜¯æ—¥å¿—æ ¼å¼ è‡ªåŠ¨æ—¥å¿—æ ¼å¼æ£€æµ‹ ç³»ç»Ÿæ—¥å¿— WebæœåŠ¡å™¨è®¿é—®æ—¥å¿— æŠ¥é”™æ—¥å¿— ç­‰ç­‰ è¿‡æ»¤ å¯ä»¥è®¾ç½®å¤šä¸ªè¿‡æ»¤è§„åˆ™ æ—¶é—´çº¿è¿‡æ»¤ ç²¾ç¡®æ—¶é—´çš„æ—¥å¿— ä¸Šä¸ªå°æ—¶ï¼Œä¸‹ä¸ªå°æ—¶ ä¸Šä¸€åˆ†é’Ÿï¼Œä¸‹ä¸€åˆ†é’Ÿ èƒ½å¤ŸæŒ‰ç…§æ—¶é—´å»è¿½è¸ªæ—¥å¿—
æŒ‰ç…§æ—¶é—´å‘¨æœŸç»Ÿè®¡ ç»Ÿè®¡æ¯ç§’å‡ºç°çš„é”™è¯¯ï¼Œå‘Šè­¦å’Œæ€»æ—¥å¿—çš„é‡ è¯­æ³•é«˜äº® Tabé”®è‡ªåŠ¨è¡¥å…¨ å‚è€ƒ https://lnav.readthedocs.io/en/latest/ å¦‚æœä½ æ›´å–œæ¬¢GUIå·¥å…·ï¼Œé‚£ä¹Ÿå¯ä»¥è¯•è¯•https://github.com/nickbnf/glogg åè®° æœ€è¿‘å› ä¸ºå·¥ä½œéœ€è¦ï¼Œæ¯å¤©éƒ½ä¼šå»æ’æŸ¥å¾ˆå¤šçš„æ—¥å¿—æ–‡ä»¶ã€‚æˆ‘ä¹Ÿæ›¾æƒ³è¿‡è£…ELKä¹‹ç±»çš„å·¥å…·ï¼Œä½†æ˜¯æˆ‘æ”¶åˆ°æ˜¯æ–‡ä»¶ã€‚æ—¥å¿—æ–‡ä»¶è¦è½¬å­˜åˆ°ELKä¸­ä¹Ÿè¦èŠ±åŠŸå¤«ã€‚å¦å¤–ELKä¹Ÿæ˜¯éå¸¸è€—è´¹èµ„æºçš„ã€‚ELKéƒ¨ç½²åˆ°ä¸€åŠæˆ‘å°±æœæ–­æ”¾å¼ƒäº†ã€‚
ä¸å…¶å—è¾•åŒ—è¾™ï¼Œä¸å¦‚å›å½’æœ¬è´¨ã€‚æ‰¾äº›å‘½ä»¤è¡Œçš„å°å·¥å…·ç›´æ¥åˆ†ææ—¥å¿—æ–‡ä»¶ã€‚</p></div><footer class=entry-footer><span title='2020-03-13 21:48:40 +0800 CST'>2020-03-13 21:48:40</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to å‘½ä»¤è¡Œæ—¥å¿—æŸ¥çœ‹ç¥å™¨ï¼šlnav" href=https://wdd.js.org/posts/2020/03/wikbh8/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>å¦‚ä½•çƒ§è‚‰æ‰å¥½åƒ</h2></header><div class=entry-content><p>1. é€‰è‚‰ **çŒªè‚‰ï¼Œè‚¥ç˜¦ç›¸é—´çš„äº”èŠ±è‚‰æ‰æœ€å¥½åƒã€‚**ç²¾ç˜¦è‚‰åƒèµ·æ¥ä¼šå¤ªæŸ´ï¼Œå¤ªè‚¥çš„è‚‰ä¼šæ˜¾å¾—å¤ªè…»ã€‚äº”èŠ±è‚‰åˆ™åˆšåˆšå¥½ï¼Œä¸æŸ´ä¹Ÿä¸è…»ã€‚
2. ç‚’å¹² çƒ§å¥½çš„çŒªè‚‰ä¸­å¦‚æœæœ‰ç”Ÿæ°´çš„å‘³é“ï¼Œåˆ™å£æ„Ÿä¸å¥½ï¼Œè€Œä¸”ä¼šæ˜¾å¾—è‚‰ä¸å¤Ÿç†Ÿã€‚
3. å…·ä½“æ­¥éª¤ äº”èŠ±è‚‰æ´—å‡€ï¼Œåˆ‡ç‰‡ã€‚æ”¾å…¥å¹²å‡€çš„ç‚’é”…ä¸­ï¼Œç„¶åå¼€ç«çƒ§ å°†äº”èŠ±è‚‰çš„æ°´åˆ†çƒ§å¹²ï¼Œå¹¶ä¸”å†’æ²¹ï¼Œè‚‰é¢å‘é»„ æ”¾å…¥å§œè‘±è’œï¼Œå°ç±³æ¤’ï¼ŒåŠ å…¥ç”ŸæŠ½ï¼Œæ–™é…’ï¼Œé£Ÿç›çˆ†ç‚’ã€‚å¦‚æœçŒªæ²¹æ¯”è¾ƒå°‘ï¼Œåˆ™å¯ä»¥æ”¾å…¥é€‚é‡é£Ÿç”¨æ²¹ ç„¶åå¯ä»¥æŒ‰éœ€åŠ å…¥è”¬èœã€‚ä¾‹å¦‚èŠ±èœã€æˆ–è€…èŠ¹èœã€æˆ–è€…å°é’æ¤’ ç‚’åˆ°è”¬èœ9æˆç†Ÿï¼Œç„¶åå‡ºé”…</p></div><footer class=entry-footer><span title='2020-02-26 20:37:52 +0800 CST'>2020-02-26 20:37:52</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to å¦‚ä½•çƒ§è‚‰æ‰å¥½åƒ" href=https://wdd.js.org/posts/2020/02/edtzzx/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>æˆ‘çš„æ•°æ®å¯è§†åŒ–å¤„ç†è¿‡ç¨‹</h2></header><div class=entry-content><p>æ•°æ®è§„æ•´ æˆ‘çš„æ•°æ®æ¥æºä¸€èˆ¬éƒ½æ˜¯æ¥è‡ªäºæ—¥å¿—æ–‡ä»¶ï¼Œä¸åŒçš„æ—¥å¿—æ–‡ä»¶æ ¼å¼å¯èƒ½éƒ½ä¸ç›¸åŒã€‚æ‰€ä»¥ç¬¬ä¸€æ­¥å°±æ˜¯æŠŠæ•°æ®æŠ½å–å‡ºæ¥ï¼Œå¹¶ä¸”æ ¼å¼åŒ–ã€‚
ä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä¼šç”¨grepæˆ–è€…awkè¿›è¡Œåˆæ­¥çš„æ•´ç†ã€‚å¦‚æœshellè„šæœ¬å¤„ç†ä¸å¤ªæ–¹ä¾¿ï¼Œé€šå¸¸æˆ‘ä¼šå†™ä¸ªjsè„šæœ¬ã€‚
Node.jsçš„readlineå¯ä»¥å®ç°æŒ‰è¡Œå–å‡ºã€‚å¤„ç†è¿‡åçš„è¾“å‡ºä¾ç„¶æ˜¯å†™æ–‡ä»¶ã€‚
const readline = require('readline') const fs = require('fs') const dayjs = require('dayjs') const fileName = 'data.log' const batch = dayjs().format('MMDDHHmmss') const dist = fs.createWriteStream(`${fileName}.out`) const rl = readline.createInterface({ input: fs.createReadStream(fileName) }) rl.on('line', handlerLine) function handlerLine (line) { let info = line.split(' ') let time = dayjs(`2020-${info[0]} ${info[1]}`).valueOf() let log = `rtpproxy,tag=b${batch} socket=${info[2]},mem=${info[3]} ${time}000000\n` console.log(log) dist.write(log) } è¾“å‡ºçš„æ–‡ä»¶æ ¼å¼å¦‚ä¸‹ï¼Œè‡³äºä¸ºä»€ä¹ˆæ˜¯è¿™ç§æ ¼å¼ï¼Œä¸”çœ‹ä¸‹æ–‡åˆ†æ™“ã€‚
rtpproxy,tag=b0216014954 socket=691,mem=3106936 1581477499000000000 rtpproxy,tag=b0216014954 socket=615,mem=3109328 1581477648000000000 rtpproxy,tag=b0216014954 socket=669,mem=3113764 1581477901000000000 rtpproxy,tag=b0216014954 socket=701,mem=3114820 1581477961000000000 æ•°æ®å¯¼å…¥ ä»¥å‰æˆ‘éƒ½ä¼šæŠŠæ•°æ®è§„æ•´åçš„è¾“å‡ºå†™æˆä¸€ä¸ªJSONæ–‡ä»¶ï¼Œç„¶åå†™htmlé¡µé¢ï¼Œå¼•å…¥Echartsåº“ï¼Œè¿›è¡Œæ•°æ®å¯è§†åŒ–ã€‚
ä½†æ˜¯è¿™ç§æ–¹å¼è¿‡äºç¹çï¼Œæ¯æ¬¡éƒ½è¦å†™ä¸ªEcharsçš„Optionsã€‚
æ‰€ä»¥æˆ‘æƒ³ï¼Œå¦‚æœæŠŠæ•°æ®å†™å…¥influxdbï¼Œç„¶åç”¨grafanaå»åšå¯è§†åŒ–ï¼Œé‚£å²‚ä¸æ˜¯ååˆ†æ–¹ä¾¿ã€‚
æ‰€ä»¥ï¼Œæˆ‘ä»¬è¦æŠŠæ•°æ®å¯¼å…¥influxdbã€‚
å¯åŠ¨influxdb grafana ä¸‹é¢æ˜¯ä¸€ä¸ªMakefileï¼Œ ç”¨æ¥å¯åŠ¨å®¹å™¨ã€‚
make create-network ç”¨æ¥åˆ›å»ºä¸¤ä¸ªå®¹å™¨çš„ç½‘ç»œï¼Œè¿™æ ·grafanaå°±å¯ä»¥é€šè¿‡å®¹å™¨åè®¿é—®influxdbäº†ã€‚ make run-influxdb å¯åŠ¨influxdbï¼Œå…¶ä¸­8086ç«¯å£æ˜¯influxdbå¯¹å¤–æä¾›æœåŠ¡çš„ç«¯å£ make run-grafana å¯åŠ¨grafana, å…¶ä¸­3000ç«¯å£æ˜¯grafanaå¯¹å¤–æä¾›æœåŠ¡çš„ç«¯å£ run-influxdb: docker run -d -p 8083:8083 -p 8086:8086 --network b2 --name influxdb influxdb:latest run-grafana: docker run -d --name grafana --network b2 -p 3000:3000 grafana/grafana create-network: docker network create -d bridge --ip-range=192.168.1.0/24 --gateway=192.168.1.1 --subnet=192.168.1.0/24 b2 æ¥ç€ä½ æ‰“å¼€localhost:3000ç«¯å£ï¼Œè¾“å…¥é»˜è®¤çš„ç”¨æˆ·åå¯†ç  admin/amdinæ¥ç™»å½•
...</p></div><footer class=entry-footer><span title='2020-02-16 14:55:15 +0800 CST'>2020-02-16 14:55:15</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to æˆ‘çš„æ•°æ®å¯è§†åŒ–å¤„ç†è¿‡ç¨‹" href=https://wdd.js.org/posts/2020/02/mrgkvf/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>æ•…éšœçš„ç‰¹å¾åˆ†ææ–¹æ³•</h2></header><div class=entry-content><p>ç‰¹å¾ç»´åº¦ ç‰¹å¾é¡¹ é›†ä¸­ æ— è§„å¾‹ å‘¨æœŸæ€§ æ—¶é—´ é›†ä¸­åœ¨æŸä¸ªæ—¶é—´ç‚¹å‘ç”Ÿ æŒ‰å›ºå®šæ—¶é—´é—´éš”å‘ç”Ÿ ç©ºé—´ é›†ä¸­åœ¨æŸä¸ªç©ºé—´å‘ç”Ÿ äººç‰© é›†ä¸­åœ¨æŸä¸ªäººç‰©èº«ä¸Šå‘ç”Ÿ</p></div><footer class=entry-footer><span title='2020-02-14 20:08:17 +0800 CST'>2020-02-14 20:08:17</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to æ•…éšœçš„ç‰¹å¾åˆ†ææ–¹æ³•" href=https://wdd.js.org/posts/2020/02/rx59i2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>æˆ‘èµ°è¿‡çš„nginxåå‘ä»£ç†çš„å‘</h2></header><div class=entry-content><p>ä¸‹æ–‡çš„è®ºè¿°éƒ½ä»¥ä¸‹é¢çš„é…ç½®ä¸ºä¾‹å­
location ^~ /p/security { rewrite /p/security/(.*) /security/$1 break; proxy_pass http://security:8080; proxy_redirect off; proxy_set_header Host $host; add_header 'Access-Control-Allow-Origin' '*' always; add_header 'Access-Control-Allow-Credentials' 'true' always; } å¦‚æœdnsæ— æ³•è§£æï¼Œnginxåˆ™æ— æ³•å¯åŠ¨ securityå¦‚æœæ— æ³•è§£æï¼Œé‚£ä¹ˆnginxåˆ™æ— æ³•å¯åŠ¨ DNSç¼“å­˜é—®é¢˜ï¼š nginxå¯åŠ¨æ—¶ï¼Œå¦‚æœå°†security dnsè§£æä¸º1.2.3.4ã€‚å¦‚æœsecurityçš„ipåœ°å€å˜äº†ã€‚nginxä¸ä¼šè‡ªåŠ¨è§£ææ–°çš„ipåœ°å€ï¼Œå¯¼è‡´åå‘ä»£ç†æŠ¥é”™504ã€‚ åå‘ä»£ç†çš„DNSç¼“å­˜é—®é¢˜åŠ¡å¿…é‡è§† è·¨åŸŸå¤´é…ç½®çš„always åå‘ä»£ç†ä¸€èˆ¬éƒ½æ˜¯å¸Œæœ›å…è®¸è·¨åŸŸçš„ã€‚å¦‚æœä¸åŠ alwaysï¼Œé‚£ä¹ˆåªä¼šå¯¹æˆåŠŸçš„è¯·æ±‚åŠ è·¨åŸŸå¤´ï¼Œå¤±è´¥çš„è¯·æ±‚åˆ™ä¸ä¼šã€‚ å…³äº**â€˜Access-Control-Allow-Originâ€™ â€˜*â€™ï¼Œå¦‚æœåç«¯æœåŠ¡æœ¬èº«å°±å¸¦æœ‰è¿™ä¸ªå¤´ï¼Œé‚£ä¹ˆå¦‚æœä½ åœ¨nginxä¸­å†æ·»åŠ è¿™ä¸ªå¤´ï¼Œå°±ä¼šåœ¨æµè§ˆå™¨ä¸­é‡åˆ°ä¸‹é¢çš„æŠ¥é”™ã€‚è€Œè§£å†³åŠæ³•å°±æ˜¯ä¸è¦åœ¨nginxä¸­è®¾ç½®è¿™ä¸ªå¤´ã€‚**
Access to fetch at 'http://192.168.40.107:31088/p/security/v2/login' from origin 'http://localhost:5000' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: The 'Access-Control-Allow-Origin' header contains multiple values '*, *', but only one is allowed. Have the server send the header with a valid value, or, if an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled. å‚è€ƒé“¾æ¥ http://nginx.org/en/docs/http/ngx_http_headers_module.html http://www.hxs.biz/html/20180425122255.html https://blog.csdn.net/xiojing825/article/details/83383524 https://cloud.tencent.com/developer/article/1470375 https://blog.csdn.net/bbg221/article/details/79886979</p></div><footer class=entry-footer><span title='2020-02-13 21:21:13 +0800 CST'>2020-02-13 21:21:13</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to æˆ‘èµ°è¿‡çš„nginxåå‘ä»£ç†çš„å‘" href=https://wdd.js.org/posts/2020/02/ngse8g/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>kindleé˜…è¯»å™¨çš„å¯¿å‘½</h2></header><div class=entry-content><p>2018å¹´1æœˆ26æ—¥ï¼Œæˆ‘åœ¨äº¬ä¸œä¸Šä¹°äº†ä¸€ä¸ªKindle Paperwhite, è·ç¦»ä»Šå¤©ï¼Œå¤§æ¦‚å·²ç»2å¹´å¤šä¸€ç‚¹äº†ã€‚
æˆ‘æ˜¯ä¸€ä¸ªé‡åº¦è¯»è€…ï¼Œæ¯å¤©éƒ½ä¼šèŠ±ä¸Šä¸€äº›æ—¶é—´å»é˜…è¯»ã€‚æœ€è¿‘ä¸¤å¤©å‘ç°ï¼Œæœ¬æ¥å¯ä»¥è¿ç»­ä¸¤å‘¨ä¸ç”¨å……ç”µçš„kindleã€‚åŸºæœ¬ä¸Šç°åœ¨æ˜¯ç”µé‡ä»¥æ¯å¤©50%çš„é€Ÿåº¦å‡å°‘ã€‚æˆ–è®¸ï¼Œ2å¹´ï¼Œå°±æ˜¯kindleçš„å¯¿å‘½ã€‚
åˆšå¼€å§‹è¯»ä¹¦æ€»è§‰å¾—æ²¡æœ‰ä»€ä¹ˆè¿›åº¦ï¼Œåæ¥æˆ‘å°±å–œæ¬¢æŠŠæ¯å¤©è¯»ä¹¦çš„è¿›åº¦ç»™è®°å½•ä¸‹æ¥ã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯èƒ½å¤Ÿç£ä¿ƒæˆ‘ä¸è¦å·æ‡’ï¼Œ
æˆ‘è¯»ä¹¦æœ‰ä¸ªä¹ æƒ¯ï¼Œæ¯å¤©ä»¥è‡³å°‘1%çš„è¿›åº¦å»è¯»ä¸€æœ¬ä¹¦ï¼Œå¹¶ä¸”æˆ‘ä¼šå°†è¿›åº¦è®°å½•ä¸‹æ¥ã€‚åŸºæœ¬ä¸Šï¼Œæˆ‘æ¯å¤©ä¼šè¯»7-8æœ¬ä¹¦çš„1%ã€‚
ä¸¤å¹´æ—¶é—´å†…æˆ‘è¯»è¿‡çš„ä¹¦ï¼Œè¦æ¯”æˆ‘ä»å°å­¦åˆ°å¤§å­¦è¯»è¿‡çš„ä¹¦éƒ½è¦å¤šã€‚</p></div><footer class=entry-footer><span title='2020-02-04 09:12:29 +0800 CST'>2020-02-04 09:12:29</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to kindleé˜…è¯»å™¨çš„å¯¿å‘½" href=https://wdd.js.org/posts/2020/02/amkcs2/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>è®ºç¦¹ä¸‰è¿‡å®¶é—¨è€Œä¸å…¥çš„çœŸå®åŸå› </h2></header><div class=entry-content><p>æœ€æ—©å¬è¯´â€œä¸‰è¿‡å®¶é—¨è€Œä¸å…¥â€ï¼Œæ˜¯è¯´ç¦¹æ²»æ°´å¤§å…¬æ— ç§ï¼Œè·¯è¿‡å®¶é—¨éƒ½æ²¡æœ‰å›å®¶ã€‚
æœ€è¿‘çœ‹åˆ°å²è®°ï¼Œå‘ç°è¿™å¥è¯åŸæœ¬æ˜¯
ç¦¹ä¼¤å…ˆäººçˆ¶é²§(å‘éŸ³å’Œæ»šç›¸åŒ)åŠŸä¹‹ä¸æˆå—è¯›ï¼Œä¹ƒåŠ³èº«ç„¦æ€ï¼Œå±…å¤–åä¸‰å¹´ï¼Œè¿‡å®¶é—¨ä¸æ•¢å…¥
â€œä¸‰è¿‡å®¶é—¨è€Œä¸å…¥"è¿™ä¸ªçŸ­è¯­ä¸­, ä¸åŸæ–‡å°‘ä¸€ä¸ªâ€œæ•¢â€å­—ï¼Œå°‘äº†ä¸€ä¸ªå­—ï¼Œå«ä¹‰å·®è·å¾ˆå¤§ã€‚
æ²¡æœ‰æ•¢å­—ï¼Œè¯´æ˜æ˜¯è‡ªå·±ä¸»åŠ¨çš„ã€‚åŠ ä¸Šæ•¢å­—ï¼Œåˆ™ä¼šè®©äººæ€è€ƒã€‚ç¦¹ä¸ºä»€ä¹ˆä¸æ•¢å›å®¶ï¼Ÿä»–åœ¨æ€•ä»€ä¹ˆå‘¢ï¼Ÿ
è¿™é‡Œå°±éœ€è¦æåˆ°ç¦¹çš„çˆ¶äº²é²§ã€‚
é²§æ²»æ°´ä¹å¹´ï¼Œæ²¡æœ‰æŠŠæ°´æ²»ç†å¥½ã€‚åœ¨èˆœå·¡è§†çš„æ—¶å€™ï¼Œè¢«èµæ­»åœ¨ç¾½å±±ã€‚
èˆœç™»ç”¨ï¼Œæ‘„è¡Œå¤©å­ä¹‹æ”¿ï¼Œå·¡ç‹©ã€‚è¡Œè§†é²§ä¹‹æ²»æ°´æ— çŠ¶ï¼Œä¹ƒæ®›ï¼ˆå‘éŸ³å’Œå³ç›¸åŒï¼‰é²§äºç¾½å±±ä»¥æ­»
æ‰€ä»¥ï¼Œå¦‚æœç¦¹æ²»ä¸å¥½æ°´ï¼Œä½ æƒ³ç¦¹çš„ä¸‹åœºæ˜¯ä»€ä¹ˆï¼Ÿ</p></div><footer class=entry-footer><span title='2020-01-09 13:43:47 +0800 CST'>2020-01-09 13:43:47</span>&nbsp;Â·&nbsp;<span>1 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to è®ºç¦¹ä¸‰è¿‡å®¶é—¨è€Œä¸å…¥çš„çœŸå®åŸå› " href=https://wdd.js.org/posts/2020/01/encss4/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>è¿›ç¨‹å®æˆ˜</h2></header><div class=entry-content><p></p></div><footer class=entry-footer><span title='2019-12-18 09:10:04 +0800 CST'>2019-12-18 09:10:04</span>&nbsp;Â·&nbsp;<span>0 min</span>&nbsp;Â·&nbsp;<span>Eddie Wang</span></footer><a class=entry-link aria-label="post link to è¿›ç¨‹å®æˆ˜" href=https://wdd.js.org/posts/2019/12/drkxqu/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://wdd.js.org/posts/page/19/>Â«&nbsp;Prev&nbsp;
</a><a class=next href=https://wdd.js.org/posts/page/21/>Next&nbsp;&nbsp;Â»</a></nav></footer></main><footer class=footer><span>&copy; 2026 <a href=https://wdd.js.org/>æ´é¦™æ˜¥</a></span> Â·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>