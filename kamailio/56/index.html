<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Kamailio 5.6 Wiki | 洞香春</title>
<meta name=keywords content><meta name=description content="Kamailio VOIP"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/kamailio/56/><link crossorigin=anonymous href=/assets/css/stylesheet.821c51435cba3e33e49e590a06514c54c32ac7957095ffcc1e0f390c47cf3228.css integrity="sha256-ghxRQ1y6PjPknlkKBlFMVMMqx5Vwlf/MHg85DEfPMig=" rel="preload stylesheet" as=style><link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://wdd.js.org/kamailio/56/index.xml><link rel=alternate hreflang=en href=https://wdd.js.org/kamailio/56/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://wdd.js.org/kamailio/56/"><meta property="og:site_name" content="洞香春"><meta property="og:title" content="Kamailio 5.6 Wiki"><meta property="og:description" content="Kamailio VOIP"><meta property="og:locale" content="en"><meta property="og:type" content="website"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Kamailio 5.6 Wiki"><meta name=twitter:description content="Kamailio VOIP"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"新朋友 - kamailio学习笔记","item":"https://wdd.js.org/kamailio/"},{"@type":"ListItem","position":2,"name":"Kamailio 5.6 Wiki","item":"https://wdd.js.org/kamailio/56/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org/ accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/books/ title=读书><span>读书</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/golang/ title=Golang><span>Golang</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/kamailio/56/ title="Kamailio 5.6 wiki"><span class=active>Kamailio 5.6 wiki</span></a></li><li><a href=https://wdd.js.org/network/ title=Network><span>Network</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/fe/ title=前端><span>前端</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://wdd.js.org/>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/kamailio/>新朋友 - kamailio学习笔记</a></div><h1>Kamailio 5.6 Wiki</h1><div class=post-description>Kamailio VOIP</div></header><div class=post-content><ol><li>核心概念<ul><li><a href=./structure/>1.1 脚本结构 - 全局参数、模块配置、路由</a></li><li><a href=./generic-elements/>1.2 通用元素 - 注释、标识符、变量、值、表达式</a></li><li><a href=./pre-processor/>1.3 预处理指令 - 文件导入、宏定义、环境变量读取</a></li><li><a href=./core-keywords/>1.4 关键词</a></li><li><a href=./core-values/>1.5 核心值</a></li><li><a href=./core-params/>1.6 核心参数</a></li><li><a href=./dns-params/>1.7 DNS参数</a></li><li><a href=./tcp-params/>1.8 TCP参数</a></li><li><a href=./tls-params/>1.9 TLS参数</a></li><li><a href=./sctp-params/>1.10 SCTP参数</a></li><li><a href=./udp-params/>1.11 UDP参数</a></li><li><a href=./bl-params/>1.12 黑名单参数</a></li><li><a href=./rt-params/>1.13 实时参数</a></li><li><a href=./core-func/>1.14 核心函数</a></li></ul></li></ol></div><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.6 核心参数</h2></header><div class=entry-content><p>kamailio和核心参数有106个，控制了kamailio的运行方式。
1. advertised_address 2. advertised_port 3. alias ⭐️ 4. async_workers 5. async_nonblock 6. async_usleep 7. async_workers_group 8. auto_aliases 9. auto_bind_ipv6 10. bind_ipv6_link_local 11. check_via ⭐️ 12. children 13. chroot 14. corelog 15. debug ⭐️ 16. description 17. disable_core_dump 18. disable_tls 19. enable_tls 20. exit_timeout 21. flags 22. force_rport ⭐️ 23. fork 24. fork_delay 25. group 26. http_reply_parse 27. ip_free_bind 28. ipv6_hex_style 29. kemi.onsend_route_callback 30. kemi.received_route_callback 31. kemi.reply_route_callback 32. kemi.pre_routing_callback 33. latency_cfg_log ⭐️ 34. latency_limit_action ⭐️ 35. latency_limit_db ⭐️ 36. latency_log ⭐️ 37. listen ⭐️ 38. loadmodule 39. loadmodulex 40. loadpath 41. local_rport ⭐️ 42. log_engine_data 43. log_engine_type 44. log_facility ⭐️ 45. log_name ⭐️ 46. log_prefix ⭐️ 47. log_prefix_mode ⭐️ 48. log_stderror 49. cfgengine 50. maxbuffer ⭐️ 51. max_branches 52. max_recursive_level 53. max_while_loops ⭐️ 54. mcast 55. mcast_loopback 56. mcast_ttl 57. memdbg 58. memlog ⭐️ 59. mem_join 60. mem_safety 61. mem_status_mode 62. mem_summary 63. mhomed 64. mlock_pages 65. modinit_delay 66. modparam 67. modparamx 68. onsend_route_reply 69. open_files_limit 70. phone2tel 71. pmtu_discovery 72. port 73. pv_buffer_size 74. pv_buffer_slots 75. pv_cache_limit 76. pv_cache_action 77. rundir 78. received_route_mode 79. reply_to_via 80. route_locks_size 81. server_id 82. server_header ⭐️ 83. server_signature ⭐️ 84. shm_force_alloc 85. shm_mem_size 86. sip_parser_log 87. sip_parser_mode ⭐️ 88. sip_warning (noisy feedback) 89. socket_workers 90. sql_buffer_size ⭐️ 91. statistics ⭐️ 92. stats_name_separator 93. tos 94. udp_mtu ⭐️ 95. udp_mtu_try_proto 96. uri_host_extra_chars 97. user ⭐️ 98. user_agent_header ⭐️ 99. verbose_startup ⭐️ 100. version_table ⭐️ 101. wait_worker1_mode 102. wait_worker1_time 103. wait_worker1_usleep 104. workdir ⭐️ 105. xavp_via_params 106. xavp_via_fields 1. advertised_address 用处不大，将会废弃
...</p></div><footer class=entry-footer><span title='2025-03-29 00:30:55 +0800 CST'>2025-03-29 00:30:55</span>&nbsp;·&nbsp;31 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.6 核心参数" href=https://wdd.js.org/kamailio/56/core-params/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1. 核心概念</h2></header><div class=entry-content><p>1.16. Custom Global Parameters These are parameters that can be defined by the writer of kamailio.cfg in order to be used inside routing blocks. One of the important properties for custom global parameters is that their value can be changed at runtime via RPC commands, without restarting Kamailio.
The definition of a custom global parameter must follow the pattern:
group.variable = value desc "description" The value can be a quoted string or integer number.
...</p></div><footer class=entry-footer>17 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1. 核心概念" href=https://wdd.js.org/kamailio/56/core/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.1 脚本结构 - 全局参数、模块配置、路由</h2></header><div class=entry-content><p>1. Structure The structure of the kamailio.cfg can be seen as three parts:
global parameters modules settings routing blocks For clarity and making it easy to maintain, it is recommended to keep them in this order, although some of them can be mixed.
✅ 这三个部分可以混合，但为了清晰和维护的方便，建议按照这个顺序排列。
2. Global Parameters Section This is the first part of the configuration file, containing the parameters for the core of kamailio and custom global parameters.
...</p></div><footer class=entry-footer>2 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.1 脚本结构 - 全局参数、模块配置、路由" href=https://wdd.js.org/kamailio/56/structure/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.10 SCTP参数</h2></header><div class=entry-content><p>1. disable_sctp Global parameter to disable SCTP support in the SIP server. see enable_sctp
Default value is ‘auto’.
Example of usage:
disable_sctp=yes 2. enable_sctp enable_sctp = 0/1/2 - SCTP disabled (0)/ SCTP enabled (1)/auto (2), default auto (2) 3. sctp_children sctp children no (similar to udp children)
sctp_children = number 4. sctp_socket_rcvbuf Size for the sctp socket receive buffer
Alias name: sctp_socket_receive_buffer
sctp_socket_rcvbuf = number 5. sctp_socket_sndbuf Size for the sctp socket send buffer
...</p></div><footer class=entry-footer>6 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.10 SCTP参数" href=https://wdd.js.org/kamailio/56/sctp-params/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.11 UDP参数</h2></header><div class=entry-content><p>1. udp4_raw Enables raw socket support for sending UDP IPv4 datagrams (40-50% performance increase on linux multi-cpu).
Possible values: 0 - disabled (default), 1 - enabled, -1 auto.
In “auto” mode it will be enabled if possible (sr started as root or with CAP_NET_RAW). udp4_raw can be used on Linux and FreeBSD. For other BSDs and Darwin one must compile with -DUSE_RAW_SOCKS. On Linux one should also set udp4_raw_mtu if the MTU on any network interface that could be used for sending is smaller than 1500.
...</p></div><footer class=entry-footer>2 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.11 UDP参数" href=https://wdd.js.org/kamailio/56/udp-params/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.12 黑名单参数</h2></header><div class=entry-content><p>1. dst_blocklist_expire Alias name: dst_blocklist_ttl
How much time a blocklisted destination will be kept in the blocklist (w/o any update).
dst_blocklist_expire = time in s (default 60 s) 2. dst_blocklist_gc_interval How often the garbage collection will run (eliminating old, expired entries).
dst_blocklist_gc_interval = time in s (default 60 s) 3. dst_blocklist_init If off, the blocklist is not initialized at startup and cannot be enabled at runtime, this saves some memory.
...</p></div><footer class=entry-footer>1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.12 黑名单参数" href=https://wdd.js.org/kamailio/56/bl-params/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.13 实时参数</h2></header><div class=entry-content><p>1. real_time Sets real time priority for all the Kamailio processes, or the timers (bitmask).
Possible values: 0 - off 1 - the "fast" timer 2 - the "slow" timer 4 - all processes, except the timers Example: real_time= 7 => everything switched to real time priority. real_time = &lt;int> (flags) (default off) 2. rt_policy Real time scheduling policy, 0 = SCHED_OTHER, 1= SCHED_RR and 2=SCHED_FIFO
rt_policy= &lt;0..3> (default 0) 3. rt_prio Real time priority used for everything except the timers, if real_time is enabled.
...</p></div><footer class=entry-footer>1 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.13 实时参数" href=https://wdd.js.org/kamailio/56/rt-params/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.14 核心函数</h2></header><div class=entry-content><p>Functions exported by core that can be used in route blocks.
1. add_local_rport ⭐️ Add rport parameter to local generated Via header – see RFC3581. In effect for forwarded SIP requests.
Example of usage:
add_local_rport(); 2. avpflags 3. break ‘break’ statement can be used to end a ‘case’ block in a ‘switch’ statement or exit from a ‘while’ statement.
4. drop ⭐️ Stop the execution of the configuration script and alter the implicit action which is done afterwards.
...</p></div><footer class=entry-footer>9 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.14 核心函数" href=https://wdd.js.org/kamailio/56/core-func/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.2 通用元素 - 注释、标识符、变量、值、表达式</h2></header><div class=entry-content><p>1. Comments Line comments start with # (hash/pound character - like in shell) or / / (double forward slash - like in C++/Java).
Block comments start with /* (forward slash and asterisk) and are ended by */ (sterisk and forward slash) (like in C, C++, Java).
Example:
# this is a line comment // this is another line comment /* this is a block comment */ Important: be aware of preprocessor directives that start with #! (hash/pound and exclamation) - those are no longer line comments.
...</p></div><footer class=entry-footer>2 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.2 通用元素 - 注释、标识符、变量、值、表达式" href=https://wdd.js.org/kamailio/56/generic-elements/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>1.3 预处理指令 - 文件导入、宏定义、环境变量读取</h2></header><div class=entry-content><p>预处理指令主要的目的是方便脚本维护，方便脚本在不同环境下运行。 预处理之后，脚本才会开始解析。
1. include_file include_file "path_to_file" Include the content of the file in config before parsing. path_to_file must be a static string. Including file operation is done at startup. If you change the content of included file, you have to restart the SIP server to become effective.
路径必须是静态，修改脚本要重启
The path_to_file can be relative or absolute. If it is not absolute path, first attempt is to locate it relative to current directory, and if fails, relative to directory of the file that includes it. There is no restriction where include can be used or what can contain - any part of config file is ok. There is a limit of maximum 10 includes in depth, otherwise you can use as many includes as you want. Reporting of the cfg file syntax errors prints now the file name for easier troubleshooting.
...</p></div><footer class=entry-footer>5 min&nbsp;·&nbsp;Eddie Wang</footer><a class=entry-link aria-label="post link to 1.3 预处理指令 - 文件导入、宏定义、环境变量读取" href=https://wdd.js.org/kamailio/56/pre-processor/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://wdd.js.org/kamailio/56/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2025 <a href=https://wdd.js.org/>洞香春</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>