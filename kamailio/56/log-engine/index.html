<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>1.19 日志引擎 | 洞香春</title>
<meta name=keywords content="all"><meta name=description content="Log Engine CLI Parameter
The &ndash;log-engine parameter allows to specify what logging engine to
be used, which is practically about the format of the log messages. If
not set at all, then Kamailio does the classic style of line-based plain
text log messages.
The value of this parameter can be &ndash;log-engine=name or
&ndash;log-engine=name:data.
The name of the log engine can be:

json - write logs in structured JSON format

the data for json log engine can be a set of character
flags:

a - add log prefix as a special field
A - do not add log prefix
c - add Call-ID (when available) as a dedicated JSON
attribute
j - the log prefix and message fields are printed in
JSON structure format, detecting if they are enclosed in
between { } or adding them as a text field
M - strip EOL (&rsquo;\n&rsquo;) from the value of the log message
field
N - do not add EOL at the end of JSON document
p - the log prefix is printed as it is in the root json
document, it has to start with comma (,) and be a valid
set of json fields
U - CEE (Common Event Expression) schema format -
https://cee.mitre.org/language/1.0-beta1/core-profile.html





Example of JSON logs when running Kamailio with
&ldquo;&ndash;log-engine=json:M&rdquo; :"><meta name=author content="Eddie Wang"><link rel=canonical href=https://wdd.js.org/kamailio/56/log-engine/><link crossorigin=anonymous href=/assets/css/stylesheet.821c51435cba3e33e49e590a06514c54c32ac7957095ffcc1e0f390c47cf3228.css integrity="sha256-ghxRQ1y6PjPknlkKBlFMVMMqx5Vwlf/MHg85DEfPMig=" rel="preload stylesheet" as=style><link rel=icon href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=16x16 href=https://wdd.js.org/cowboy.ico><link rel=icon type=image/png sizes=32x32 href=https://wdd.js.org/cowboy.ico><link rel=apple-touch-icon href=https://wdd.js.org/cowboy.ico><link rel=mask-icon href=https://wdd.js.org/cowboy.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://wdd.js.org/kamailio/56/log-engine/><noscript><style>#theme-toggle,.top-link{display:none}</style></noscript><meta property="og:url" content="https://wdd.js.org/kamailio/56/log-engine/"><meta property="og:site_name" content="洞香春"><meta property="og:title" content="1.19 日志引擎"><meta property="og:description" content="Log Engine CLI Parameter The –log-engine parameter allows to specify what logging engine to be used, which is practically about the format of the log messages. If not set at all, then Kamailio does the classic style of line-based plain text log messages.
The value of this parameter can be –log-engine=name or –log-engine=name:data.
The name of the log engine can be:
json - write logs in structured JSON format the data for json log engine can be a set of character flags: a - add log prefix as a special field A - do not add log prefix c - add Call-ID (when available) as a dedicated JSON attribute j - the log prefix and message fields are printed in JSON structure format, detecting if they are enclosed in between { } or adding them as a text field M - strip EOL (’\n’) from the value of the log message field N - do not add EOL at the end of JSON document p - the log prefix is printed as it is in the root json document, it has to start with comma (,) and be a valid set of json fields U - CEE (Common Event Expression) schema format - https://cee.mitre.org/language/1.0-beta1/core-profile.html Example of JSON logs when running Kamailio with “–log-engine=json:M” :"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="kamailio"><meta property="article:tag" content="All"><meta property="og:image" content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="1.19 日志引擎"><meta name=twitter:description content="Log Engine CLI Parameter
The &ndash;log-engine parameter allows to specify what logging engine to
be used, which is practically about the format of the log messages. If
not set at all, then Kamailio does the classic style of line-based plain
text log messages.
The value of this parameter can be &ndash;log-engine=name or
&ndash;log-engine=name:data.
The name of the log engine can be:

json - write logs in structured JSON format

the data for json log engine can be a set of character
flags:

a - add log prefix as a special field
A - do not add log prefix
c - add Call-ID (when available) as a dedicated JSON
attribute
j - the log prefix and message fields are printed in
JSON structure format, detecting if they are enclosed in
between { } or adding them as a text field
M - strip EOL (&rsquo;\n&rsquo;) from the value of the log message
field
N - do not add EOL at the end of JSON document
p - the log prefix is printed as it is in the root json
document, it has to start with comma (,) and be a valid
set of json fields
U - CEE (Common Event Expression) schema format -
https://cee.mitre.org/language/1.0-beta1/core-profile.html





Example of JSON logs when running Kamailio with
&ldquo;&ndash;log-engine=json:M&rdquo; :"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"新朋友 - kamailio学习笔记","item":"https://wdd.js.org/kamailio/"},{"@type":"ListItem","position":2,"name":"Kamailio 5.6 Wiki","item":"https://wdd.js.org/kamailio/56/"},{"@type":"ListItem","position":3,"name":"1.19 日志引擎","item":"https://wdd.js.org/kamailio/56/log-engine/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"1.19 日志引擎","name":"1.19 日志引擎","description":"Log Engine CLI Parameter The \u0026ndash;log-engine parameter allows to specify what logging engine to be used, which is practically about the format of the log messages. If not set at all, then Kamailio does the classic style of line-based plain text log messages.\nThe value of this parameter can be \u0026ndash;log-engine=name or \u0026ndash;log-engine=name:data.\nThe name of the log engine can be:\njson - write logs in structured JSON format the data for json log engine can be a set of character flags: a - add log prefix as a special field A - do not add log prefix c - add Call-ID (when available) as a dedicated JSON attribute j - the log prefix and message fields are printed in JSON structure format, detecting if they are enclosed in between { } or adding them as a text field M - strip EOL (\u0026rsquo;\\n\u0026rsquo;) from the value of the log message field N - do not add EOL at the end of JSON document p - the log prefix is printed as it is in the root json document, it has to start with comma (,) and be a valid set of json fields U - CEE (Common Event Expression) schema format - https://cee.mitre.org/language/1.0-beta1/core-profile.html Example of JSON logs when running Kamailio with \u0026ldquo;\u0026ndash;log-engine=json:M\u0026rdquo; :\n","keywords":["all"],"articleBody":"Log Engine CLI Parameter The –log-engine parameter allows to specify what logging engine to be used, which is practically about the format of the log messages. If not set at all, then Kamailio does the classic style of line-based plain text log messages.\nThe value of this parameter can be –log-engine=name or –log-engine=name:data.\nThe name of the log engine can be:\njson - write logs in structured JSON format the data for json log engine can be a set of character flags: a - add log prefix as a special field A - do not add log prefix c - add Call-ID (when available) as a dedicated JSON attribute j - the log prefix and message fields are printed in JSON structure format, detecting if they are enclosed in between { } or adding them as a text field M - strip EOL (’\\n’) from the value of the log message field N - do not add EOL at the end of JSON document p - the log prefix is printed as it is in the root json document, it has to start with comma (,) and be a valid set of json fields U - CEE (Common Event Expression) schema format - https://cee.mitre.org/language/1.0-beta1/core-profile.html Example of JSON logs when running Kamailio with “–log-engine=json:M” :\n{ \"idx\": 1, \"pid\": 18239, \"level\": \"DEBUG\", \"module\": \"maxfwd\", \"file\": \"mf_funcs.c\", \"line\": 74, \"function\": \"is_maxfwd_present\", \"logprefix\": \"{1 1 OPTIONS 715678756@192.168.188.20} \", \"message\": \"value = 70 \" } { \"idx\": 1, \"pid\": 18239, \"level\": \"DEBUG\", \"module\": \"core\", \"file\": \"core/socket_info.c\", \"line\": 644, \"function\": \"grep_sock_info\", \"logprefix\": \"{1 1 OPTIONS 715678756@192.168.188.20} \", \"message\": \"checking if host==us: 9==9 \u0026\u0026 [127.0.0.1] == [127.0.0.1]\" } Example config for printing log message with j flag:\nxinfo(\"{ \\\"src_ip\\\": \\\"$si\\\", \\\"method\\\": \\\"$rm\\\", \\\"text\\\": \\\"request received\\\" }\"); Example config for printing log messages with p flag:\nlog_prefix=\", \\\"src_ip\\\": \\\"$si\\\", \\\"tv\\\": $TV(Sn), \\\"mt\\\": $mt, \\\"ua\\\": \\\"$(ua{s.escape.common})\\\", \\\"cseq\\\": \\\"$hdr(CSeq)\\\"\" ","wordCount":"310","inLanguage":"en","image":"https://wdd.js.org/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"0001-01-01T00:00:00Z","dateModified":"0001-01-01T00:00:00Z","author":{"@type":"Person","name":"Eddie Wang"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://wdd.js.org/kamailio/56/log-engine/"},"publisher":{"@type":"Organization","name":"洞香春","logo":{"@type":"ImageObject","url":"https://wdd.js.org/cowboy.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://wdd.js.org/ accesskey=h title="洞香春 (Alt + H)"><img src=https://wdd.js.org/cowboy.ico alt aria-label=logo height=35>洞香春</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://wdd.js.org/books/ title=读书><span>读书</span></a></li><li><a href=https://wdd.js.org/freeswitch/ title=FreeSWITCH><span>FreeSWITCH</span></a></li><li><a href=https://wdd.js.org/kamailio/ title=Kamailio><span>Kamailio</span></a></li><li><a href=https://wdd.js.org/opensips/ title=OpenSIPS><span>OpenSIPS</span></a></li><li><a href=https://wdd.js.org/vim/ title=VIM><span>VIM</span></a></li><li><a href=https://wdd.js.org/categories/ title=分类><span>分类</span></a></li><li><a href=https://wdd.js.org/fe/ title=前端><span>前端</span></a></li><li><a href=https://wdd.js.org/search/ title=搜索><span>搜索</span></a></li><li><a href=https://wdd.js.org/tags/ title=标签><span>标签</span></a></li><li><a href=https://wdd.js.org/archives/ title=归档><span>归档</span></a></li><li><a href=https://wdd.js.org/about/ title=我><span>我</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://wdd.js.org/>Home</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/kamailio/>新朋友 - kamailio学习笔记</a>&nbsp;»&nbsp;<a href=https://wdd.js.org/kamailio/56/>Kamailio 5.6 Wiki</a></div><h1 class="post-title entry-hint-parent">1.19 日志引擎</h1><div class=post-meta>2 min&nbsp;·&nbsp;Eddie Wang&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/kamailio/56/log-engine/index.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#log-engine-cli-parameter aria-label="Log Engine CLI Parameter">Log Engine CLI Parameter</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=log-engine-cli-parameter>Log Engine CLI Parameter<a hidden class=anchor aria-hidden=true href=#log-engine-cli-parameter>#</a></h1><p>The <strong>&ndash;log-engine</strong> parameter allows to specify what logging engine to
be used, which is practically about the format of the log messages. If
not set at all, then Kamailio does the classic style of line-based plain
text log messages.</p><p>The value of this parameter can be <strong>&ndash;log-engine=name</strong> or
<strong>&ndash;log-engine=name:data</strong>.</p><p>The name of the log engine can be:</p><ul><li><strong>json</strong> - write logs in structured JSON format<ul><li>the <strong>data</strong> for <strong>json</strong> log engine can be a set of character
flags:<ul><li><strong>a</strong> - add log prefix as a special field</li><li><strong>A</strong> - do not add log prefix</li><li><strong>c</strong> - add Call-ID (when available) as a dedicated JSON
attribute</li><li><strong>j</strong> - the log prefix and message fields are printed in
JSON structure format, detecting if they are enclosed in
between <strong>{ }</strong> or adding them as a <strong>text</strong> field</li><li><strong>M</strong> - strip EOL (&rsquo;\n&rsquo;) from the value of the log message
field</li><li><strong>N</strong> - do not add EOL at the end of JSON document</li><li><strong>p</strong> - the log prefix is printed as it is in the root json
document, it has to start with comma (<strong>,</strong>) and be a valid
set of json fields</li><li><strong>U</strong> - CEE (Common Event Expression) schema format -
<a href=https://cee.mitre.org/language/1.0-beta1/core-profile.html>https://cee.mitre.org/language/1.0-beta1/core-profile.html</a></li></ul></li></ul></li></ul><p>Example of JSON logs when running Kamailio with
&ldquo;<strong>&ndash;log-engine=json:M</strong>&rdquo; :</p><pre><code>{ &quot;idx&quot;: 1, &quot;pid&quot;: 18239, &quot;level&quot;: &quot;DEBUG&quot;, &quot;module&quot;: &quot;maxfwd&quot;, &quot;file&quot;: &quot;mf_funcs.c&quot;, &quot;line&quot;: 74, &quot;function&quot;: &quot;is_maxfwd_present&quot;, &quot;logprefix&quot;: &quot;{1 1 OPTIONS 715678756@192.168.188.20} &quot;, &quot;message&quot;: &quot;value = 70 &quot; }

{ &quot;idx&quot;: 1, &quot;pid&quot;: 18239, &quot;level&quot;: &quot;DEBUG&quot;, &quot;module&quot;: &quot;core&quot;, &quot;file&quot;: &quot;core/socket_info.c&quot;, &quot;line&quot;: 644, &quot;function&quot;: &quot;grep_sock_info&quot;, &quot;logprefix&quot;: &quot;{1 1 OPTIONS 715678756@192.168.188.20} &quot;, &quot;message&quot;: &quot;checking if host==us: 9==9 &amp;&amp; [127.0.0.1] == [127.0.0.1]&quot; }
</code></pre><p>Example config for printing log message with <strong>j</strong> flag:</p><pre><code>xinfo(&quot;{ \&quot;src_ip\&quot;: \&quot;$si\&quot;, \&quot;method\&quot;: \&quot;$rm\&quot;, \&quot;text\&quot;: \&quot;request received\&quot; }&quot;);
</code></pre><p>Example config for printing log messages with <strong>p</strong> flag:</p><pre><code>log_prefix=&quot;, \&quot;src_ip\&quot;: \&quot;$si\&quot;, \&quot;tv\&quot;: $TV(Sn), \&quot;mt\&quot;: $mt, \&quot;ua\&quot;: \&quot;$(ua{s.escape.common})\&quot;, \&quot;cseq\&quot;: \&quot;$hdr(CSeq)\&quot;&quot;
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://wdd.js.org/tags/all/>All</a></li></ul></footer><script src=https://giscus.app/client.js data-repo=wangduanduan/wangduanduan.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkxMTkyMjMyNjA=" data-category=Announcements data-category-id=DIC_kwDOBxsz3M4CAjBq data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>&copy; 2025 <a href=https://wdd.js.org/>洞香春</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>